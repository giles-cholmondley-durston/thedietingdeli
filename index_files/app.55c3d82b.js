"use strict";function AddressValidationPopupController(e,n,t,r,a){function o(){var t=e.selectedAddress.fullText===e.originalAddress.fullText;n.close({selectedAddress:e.selectedAddress,forceSave:t})}function i(){n.dismiss()}e.candidateAddresses=_.map(t,function(e){return e.fullText=a.createFullTextAddress(e),e}),e.selectedAddress=_.first(e.candidateAddresses),e.originalAddress=r,e.originalAddress.fullText=a.createFullTextAddress(r),e.suggestedAddress=_.first(e.candidateAddresses),e.dismissDialog=i,e.selectAddress=o}function CustomErrors(){function e(e){this.name="LoginRequiredError",this.message=e||""}var n={LoginRequiredError:e};return n}function matchDirective(){return{restrict:"A",require:"ngModel",link:function(){function e(e,n,t,r){function a(e){return angular.isUndefined(e)||null===e||""==e}e.$watch(function(){return[e.$eval(t.gcNgMatch),r.$viewValue]},function(e){var n=a(e[0])&&a(e[1])||!a(e[0])&&e[0]===e[1];r.$setValidity("match",n)},!0)}return e}()}}function UnskipPopupService(e,n,t,r,a,o,i,s){this.processing=!1,this.maybeShowUnskipPopup=function(){if(!this.processing){this.processing=!0;var l=this,c=o.getPayload();return c.trackingAttributes&&c.trackingAttributes.lastMenuDateUnskipPopupShown||o.isSuspended()?void 0:a.getUserCarts("user-"+c.id,s.date,i.limit).then(function(a){l.processing=!1;for(var i=angular.copy(a),s=null,u=0;u<a.length;++u)if(moment().isBefore(i[u].cutoffTime)){s=i[u];break}var d=moment(s.deliveryDate).day("monday").format("YYYY-MM-DD");s&&"SKIP"==s.status&&c.trackingAttributes.lastMenuDateUnskipPopupShown!==d&&r.getOrSetUnskipPopupTest().then(function(r){if("on"===r){var a=e.open({templateUrl:"unskip/unskip-popup.tpl.html",windowClass:"unskip-popup",resolve:{arrivalDate:function(){function e(){return moment(s.deliveryDate)}return e}(),menuDate:function(){function e(){return d}return e}(),menuRecipes:function(){function e(){return _.filter(s.recipes,function(e){return!!e})}return e}(),firstName:function(){function e(){return c.firstName}return e}(),userId:function(){function e(){return c.id}return e}(),cartId:function(){function e(){return s.id}return e}()},controller:"UnskipPopupController"});a.opened.then(function(){t.view("unskip_popup"),n.all("user").customPUT({lastMenuDateUnskipPopupShown:d},"trackingAttributes").then(function(){o.refreshToken()})})}})})["catch"](function(e){console.error("Error occurred while fetching carts ",e.stack)})}}}function UnskipSuccessPopupService(e,n){this.openUnskipSuccess=function(t){var r=e.open({templateUrl:"unskip/unskip-success-popup.tpl.html",windowClass:"unskip-success-popup",resolve:{deliveryDate:function(){function e(){return t}return e}()},controller:"UnskipSuccessPopupController"});r.opened.then(function(){n.view("unskip_popup_sucess")})}}function UtilityProvider(){this.isMobile=function(){return navigator.userAgent.match(/iPhone|iPad|iPod|Opera Mini|Android|IEMobile|BlackBerry/i)},this.$get=function(){return this}}function PressLogosCtrl(e){e.pressLogos=[{name:"real-simple",url:"//cdn.greenchef.com/assets/Photos/Home/PressLogos/real-simple@1x.15aca634.png",urlRetina:"//cdn.greenchef.com/assets/Photos/Home/PressLogos/real-simple@2x.c56164cb.png",urlMobile:"//cdn.greenchef.com/assets/Photos/Home/PressLogos/real-simple_mobile@1x.7a282841.png",urlMobileRetina:"//cdn.greenchef.com/assets/Photos/Home/PressLogos/real-simple_mobile@2x.3551b307.png"},{name:"eater",url:"//cdn.greenchef.com/assets/Photos/Home/PressLogos/eater@1x.d0d050b1.png",urlRetina:"//cdn.greenchef.com/assets/Photos/Home/PressLogos/eater@2x.fb96ed34.png",urlMobile:"//cdn.greenchef.com/assets/Photos/Home/PressLogos/eater_mobile@1x.c3326a8a.png",urlMobileRetina:"//cdn.greenchef.com/assets/Photos/Home/PressLogos/eater_mobile@2x.4c035fb9.png"},{name:"forbes",url:"//cdn.greenchef.com/assets/Photos/Home/PressLogos/forbes@1x.341bb25c.png",urlRetina:"//cdn.greenchef.com/assets/Photos/Home/PressLogos/forbes@2x.cc545dcf.png",urlMobile:"//cdn.greenchef.com/assets/Photos/Home/PressLogos/forbes_mobile@1x.22841216.png",urlMobileRetina:"//cdn.greenchef.com/assets/Photos/Home/PressLogos/forbes_mobile@2x.9b85d0e4.png"},{name:"mashable",url:"//cdn.greenchef.com/assets/Photos/Home/PressLogos/mashable@1x.faa88e10.png",urlRetina:"//cdn.greenchef.com/assets/Photos/Home/PressLogos/mashable@2x.9c0b42b2.png",urlMobile:"//cdn.greenchef.com/assets/Photos/Home/PressLogos/mashable_mobile@1x.a02feed3.png",urlMobileRetina:"//cdn.greenchef.com/assets/Photos/Home/PressLogos/mashable_mobile@2x.e1ca1d08.png"},{name:"self",url:"//cdn.greenchef.com/assets/Photos/Home/PressLogos/self@1x.bfe11511.png",urlRetina:"//cdn.greenchef.com/assets/Photos/Home/PressLogos/self@2x.d2ce69df.png",urlMobile:"//cdn.greenchef.com/assets/Photos/Home/PressLogos/self_mobile@1x.c47ae9bd.png",urlMobileRetina:"//cdn.greenchef.com/assets/Photos/Home/PressLogos/self_mobile@2x.c709d8b8.png"},{name:"yahoo",url:"//cdn.greenchef.com/assets/Photos/Home/PressLogos/yahoo@1x.af41daea.png",urlRetina:"//cdn.greenchef.com/assets/Photos/Home/PressLogos/yahoo@2x.5d16441b.png",urlMobile:"",urlMobileRetina:""},{name:"people",url:"//cdn.greenchef.com/assets/Photos/Home/PressLogos/people@1x.1ff14636.png",urlRetina:"//cdn.greenchef.com/assets/Photos/Home/PressLogos/people@2x.e0e69adc.png",urlMobile:"//cdn.greenchef.com/assets/Photos/Home/PressLogos/people_mobile@1x.675bea6b.png",urlMobileRetina:"//cdn.greenchef.com/assets/Photos/Home/PressLogos/people_mobile@2x.2d7d9e73.png"},{name:"buzz-feed",url:"//cdn.greenchef.com/assets/Photos/Home/PressLogos/buzz-feed@1x.185a950e.png",urlRetina:"//cdn.greenchef.com/assets/Photos/Home/PressLogos/buzz-feed@2x.3c125dbd.png",urlMobile:"//cdn.greenchef.com/assets/Photos/Home/PressLogos/buzz-feed_mobile@1x.445775a5.png",urlMobileRetina:"//cdn.greenchef.com/assets/Photos/Home/PressLogos/buzz-feed_mobile@2x.b85c93ae.png"},{name:"main-street-vegan",url:"//cdn.greenchef.com/assets/Photos/Home/PressLogos/main-street-vegan@1x.75668761.png",urlRetina:"//cdn.greenchef.com/assets/Photos/Home/PressLogos/main-street-vegan@2x.ea0928df.png",urlMobile:"//cdn.greenchef.com/assets/Photos/Home/PressLogos/main-street-vegan_mobile@1x.99c4e752.png",urlMobileRetina:"//cdn.greenchef.com/assets/Photos/Home/PressLogos/main-street-vegan_mobile@2x.5411488a.png"}]}function SignupCtl2(e,n,t,r,a,o,i,s){function l(e,t){t&&i.goToStep(n.current.parent||n.current.name,e)}function c(e){e&&!e.valid&&(s.clearCouponParams(),r.setToDefaultTestVersion(),r.defaultCoupon().then(function(e){a.setDefaultCoupon(e)}))}e.enableAutomaticDeliveryDayChoice=r.enableAutomaticDeliveryDayChoice(),e.handleClickBreadcrumb=l;var u=a.getCouponData();c(u),e.$on(t.couponInvalid,c);var d=function(n,t){var r=i.getCurrentStateSettings(n);r?(r.requiredFields&&_.each(r.requiredFields,function(e){o.getField(e)||(t&&t.preventDefault(),i.resetSignupFlow())}),e.currentStep=n,e.breadcrumb=i.getBreadcrumb(n)):n.startsWith("sign-up-v2")&&(t&&t.preventDefault(),i.resetSignupFlow())};d(n.current.parent||n.current.name),e.$on("$stateChangeStart",function(e,n){d(n.name,e)})}function UnskipPopupController(e,n,t,r,a,o,i,s,l,c){function u(){var o={status:"DELIVERY"};r.updateUserCart("user-"+s,l,o).then(function(){t.click("popup_unskip"),n.close(),a.openUnskipSuccess(e.date)},function(){})}function d(){t.click("popup_unskip_xbutton"),n.close()}function p(){t.click("popup_unskip_cancel"),n.close()}e.date=i.format("dddd, MMMM Do"),e.firstName=o,e.recipes=c,e.popupUnskipButton=u,e.popupCloseX=d,e.popupCancelButton=p,n.result.then(function(){},function(){t.click("popup_unskip_outsidebox")})}function recipecard(){return{restrict:"E",templateUrl:"unskip/recipe-card.tpl.html"}}function UnskipSuccessPopupController(e,n,t,r,a,o){function i(){a.click("viewplan_success"),t.go("account"),n.close(),r.location.reload()}function s(){a.click("popup_success_xbutton"),n.close(),r.location.reload()}e.date=o,e.viewPlanClick=i,e.popupCloseX=s,n.result.then(function(){},function(){a.click("popup_success_outsidebox")})}function ConfirmSelectionController(e,n,t,r,a,o){function i(){n.dismiss({updatedCart:a})}function s(){n.close({updatedCart:a})}var l=this;l.cancel=i,l.closeModal=s,l.newPlanName=t,l.oldPlanName=r,l.affectedDeliveryDate=o}function IntroToFlexibleOrderingController(e,n){function t(){n.close()}e.closeModal=t}function LocalChangeNotificationController(e,n,t,r){function a(){e.close(),r.showRAF()}var o=this;o.cartDate=n,o.cartUpdate=t,o.closeModal=a}function SkipOrderController(e,n,t,r,a,o,i,s){function l(){return _.any(m.otherMenus,function(e){return!e||_.isEmpty(e.recipes)})}function c(n){m.getThisSubmitting=!0,u(n).then(function(n){e.close(n)})}function u(e){var a=t.getMealName(r,s.mealPreference.mealPlan),o=e.planName,i={mealPreference:{mealPlan:e.planValue,dietaryOptOuts:[]}};return n.updateUserCart(g,f,i).then(function(e){return m.getThisSubmitting=!1,{action:"getPlan",oldPlanName:a,newPlanName:o,updatedCart:e}})}function d(){m.skipSubmitting=!0,i.click("confirm-skip-order",{menuUser:s.menuUserId});var t={status:"SKIP"};n.updateUserCart(g,f,t).then(function(n){m.skipSubmitting=!1,e.close({action:"skipOrder",updatedCart:n})})}function p(){e.dismiss({upcomingCart:s})}var m=this;m.skipOrder=d,m.closeModal=p,m.getThisPlan=c;var g=s.userId,f=s.id;m.deliveryDate=s.deliveryDate,m.otherMenus=a,m.hideMenus=l,m.isFamilyPlan=t.isUserFamilyPlan(s.mealPreference.mealPlan)}AddressValidationPopupController.$inject=["$scope","$modalInstance","candidateAddresses","originalAddress","UspsAddressService"],UnskipPopupService.$inject=["$modal","GreenchefAPI","tracker","ABTest","FlexibleOrderingAPI","AuthService","NUM_CARTS_FETCHED","START_DATE"],UnskipSuccessPopupService.$inject=["$modal","tracker"],PressLogosCtrl.$inject=["$scope"],SignupCtl2.$inject=["$scope","$state","PAYMENT_EVENTS","ABTest","PaymentService","SignupDataService","SignupFlowService","URLParam"],UnskipPopupController.$inject=["$scope","$modalInstance","tracker","FlexibleOrderingAPI","UnskipSuccessPopupService","firstName","arrivalDate","userId","cartId","menuRecipes","START_DATE","NUM_CARTS_FETCHED"],UnskipSuccessPopupController.$inject=["$scope","$modalInstance","$state","$window","tracker","deliveryDate"],ConfirmSelectionController.$inject=["$scope","$modalInstance","newPlanName","oldPlanName","updatedCart","affectedDeliveryDate"],IntroToFlexibleOrderingController.$inject=["$scope","$modalInstance"],LocalChangeNotificationController.$inject=["$modalInstance","cartDate","cartUpdate","Modals"],SkipOrderController.$inject=["$modalInstance","FlexibleOrderingAPI","MenuService","mealPlans","otherMenus","subscription","tracker","upcomingCart"],angular.module("greenchef.account",["ui.router","plusOne","ui.bootstrap","flexibleOrdering","calendrical","greenchef.account.modals"]).config(["$stateProvider",function(e){e.state("account",{url:"/account/your-plan",params:{editPlan:null},views:{main:{controller:"YourAccount",templateUrl:"account/account.tpl.html"}},data:{pageTitle:"Your Plan"},resolve:{user:function(){function e(e,n,t,r,a,o){return e.isDoneSignup()?e.getSignupState()===t.canceled?(r.go("my-account.reactivate"),n.reject()):e.getUserInfo():n.reject(new o.LoginRequiredError)}return e.$inject=["AuthService","$q","SIGNUP_STATE","$state","$rootScope","CustomErrors"],e}(),subscriptions:function(){function e(e,n,t){return t.getUserSubscriptions("user-"+e.id,n).then(function(e){return e})["catch"](function(e){console.error("Error occurred while fetching subscription",e.stack)})}return e.$inject=["user","mealPlansData","FlexibleOrderingAPI"],e}(),carts:function(){function e(e,n,t,r){return n.getUserCarts("user-"+e.id,t.date,r.limit).then(function(e){return e})["catch"](function(e){console.error("Error occurred while fetching carts ",e.stack)})}return e.$inject=["user","FlexibleOrderingAPI","START_DATE","NUM_CARTS_FETCHED"],e}(),mealPlansData:function(){function e(e,n,t){return e.getSignup().then(function(e){return n.filterPlansAndAddCopy(e,t)})["catch"](function(e){console.error("Error occurred while fetching mealPlans ",e.stack)})}return e.$inject=["SiteCMSService","PlanInfoService","user"],e}()}})}]),function(){angular.module("flexibleOrdering",[])}(),function(){angular.module("greenchef.home",["ui.router","plusOne"])}(),angular.module("greenchef.reviews",[]).config(["$stateProvider",function(e){e.state("reviews",{url:"/reviews",views:{main:{controller:"ReviewsCtrl",templateUrl:"landing/reviews.tpl.html"}},data:{pageTitle:"Reviews"}})}]),function(){angular.module("greenchef.marketing-pages",["ui.router","greenchef.why-gc-marketing","greenchef.how-it-works-marketing","greenchef.keto-plan-marketing"]).directive("frequentlyAskedQuestions",["$filter",function(e){return{restrict:"E",scope:{eventNameReadMore:"=",eventPrefix:"=",faqConfig:"=",planPrices:"="},templateUrl:"marketing/faq.tpl.html",link:function(){function n(n){var t={},r="";if(!_.isEmpty(n.planPrices)){var a=n.planPrices.mealTypes.concat(n.planPrices.familyMealTypes);_.each(a,function(n){t[n.value]=e("currency")(n.cost)})}_.isEmpty(t)||(r=["<p>Our pricing is based on the plan you choose and how many people will be eating each dinner.</p>","<p>2-Person Plan: 1 box contains 3 dinners for 2 people (6 meals/servings total per box).</p>","<p>Family Plan: 1 box contains 2 dinners for a family of four, served family-style for parents and kids (8 meals/servings total per box).</p>","<p>",'<ul class="faq-ul">',"<li>Omnivore "+String(t["choice-omnivore"])+" per meal</li>","<li>Vegetarian "+String(t["choice-vegetarian"])+" per meal</li>","<li>Gluten-Free "+String(t["choice-glutenfree"])+" per meal</li>","<li>Paleo "+String(t["choice-paleo"])+" per meal</li>","<li>Keto "+String(t["choice-keto"])+" per meal</li>","<li>Vegan ",t.vegan," per meal</li>","</ul>","</p>","<p>",'<ul class="faq-ul">',"<li>Family Omnivore ",t["family-omnivore"]," per meal</li>","<li>Family Carnivore ",t["family-meat"]," per meal</li>","</ul>","</p>","<p>Note: Above prices do not include $6.99 shipping and handling per box.</p>"].join("")),n.faq={title:"Frequently Asked Questions",items:[]},_.isEmpty(r)||n.faq.items.push({answer:r,eventName:n.eventPrefix+"-faq-1",question:"How much does Green Chef cost?",toggle:!1}),n.faq.items.push({answer:"<p>Green Chef delivers almost everywhere in the continental United States. We are currently unable to deliver to Alaska, Hawaii, and parts of Louisiana. When you sign up, we’ll make sure we can reach you. If we’re not yet in your neighborhood, simply create an account to be notified when we deliver to your area.</p>",eventName:n.eventPrefix+"-faq-2",question:"Where do you deliver?",toggle:!1},{answer:"<p>Boxes are delivered Monday through Friday. You can choose which weekday you want your boxes delivered, depending on where you live. Not every weekday may be an option in all regions, and Green Chef does not deliver on weekends. You can expect deliveries by 8:00 pm, depending on carrier.</p>",eventName:n.eventPrefix+"-faq-3",question:"When are boxes delivered?",toggle:!1}),_.isEmpty(n.faqConfig)||(n.faq.title=n.faqConfig.title,n.faq.items=n.faqConfig.items.concat(n.faq.items))}return n}()}}]).directive("getStarted",function(){return{restrict:"E",scope:{getStartedTitle:"=",eventNameGetStarted:"=",getStartedOnclick:"&"},templateUrl:"marketing/get-started.tpl.html"}})}(),angular.module("greenchef.on-the-menu",["ui.router","ui.bootstrap"]).constant("GENERIC_ERROR","Oops! An error occurred during the update.").config(function(){function e(e){e.state("on-the-menu",{url:"/on-the-menu",onEnter:function(){function e(e){e.go("menus")}return e.$inject=["$state"],e}()}).state("menus",{url:"/menus",views:{main:{controller:"MenusPageCtrl",templateUrl:"on-the-menu/main/v3.on-the-menu.tpl.html"}},params:{menuData:null},data:{pageTitle:"On the menu",autoscroll:!0},resolve:{resolvePlanInfoService:function(){function e(e){return e.resolveData()}return e.$inject=["PlanInfoService"],e}()}}).state("menus.main",{url:"/main",views:{"menu-specific":{controller:"MenusPageCtrl",templateUrl:"on-the-menu/main/main-menu-page.tpl.html"}},params:{menuData:null},data:{pageTitle:"On the menu",autoscroll:!0}}).state("menus.choice-omnivore",{url:"/choiceomnivore",views:{"menu-specific":{controller:"ChoiceOmnivoreMenuCtrl",templateUrl:"on-the-menu/plans/menu-specific.tpl.html"}},data:{pageTitle:"Omnivore",autoscroll:!0}}).state("menus.vegan",{url:"/vegan",views:{"menu-specific":{controller:"VeganMenuCtrl",templateUrl:"on-the-menu/plans/menu-specific.tpl.html"}},data:{pageTitle:"Vegan",autoscroll:!0}}).state("menus.choice-vegetarian",{url:"/vegetarian",views:{"menu-specific":{controller:"VegetarianMenuCtrl",templateUrl:"on-the-menu/plans/menu-specific.tpl.html"}},data:{pageTitle:"Vegetarian",autoscroll:!0}}).state("menus.choice-pescatarian",{url:"/pescatarian",views:{"menu-specific":{controller:"PescatarianMenuCtrl",templateUrl:"on-the-menu/plans/menu-specific.tpl.html"}},data:{pageTitle:"Pescatarian",autoscroll:!0}}).state("menus.family-omnivore",{url:"/omnivorefam",views:{"menu-specific":{controller:"FamilyOmnivoreMenuCtrl",templateUrl:"on-the-menu/plans/menu-specific.tpl.html"}},data:{pageTitle:"Family Omnivore",autoscroll:!0}}).state("menus.choice-glutenfree",{url:"/glutenfree",views:{"menu-specific":{controller:"GlutenFreeMenuCtrl",templateUrl:"on-the-menu/plans/menu-specific.tpl.html"}}}).state("menus.choice-paleo",{url:"/paleo",views:{"menu-specific":{controller:"PaleoMenuCtrl",templateUrl:"on-the-menu/plans/menu-specific.tpl.html"}}}).state("menus.choice-keto",{url:"/keto",views:{"menu-specific":{controller:"KetoMenuCtrl",templateUrl:"on-the-menu/plans/menu-specific.tpl.html"}}}).state("menus.family-meat",{url:"/carnivorefam",views:{"menu-specific":{controller:"FamilyCarnivoreMenuCtrl",templateUrl:"on-the-menu/plans/menu-specific.tpl.html"}},data:{pageTitle:"Family Carnivore",autoscroll:!0}}).state("menus.omnivore",{url:"/omnivore",views:{"menu-specific":{controller:"OmnivoreMenuCtrl",templateUrl:"on-the-menu/plans/menu-specific.tpl.html"}},data:{pageTitle:"Omnivore",autoscroll:!0}}).state("menus.meat",{url:"/carnivore",views:{"menu-specific":{controller:"CarnivoreMenuCtrl",templateUrl:"on-the-menu/plans/menu-specific.tpl.html"}},data:{pageTitle:"Carnivore",autoscroll:!0}})}return e.$inject=["$stateProvider"],e}()),angular.module("greenchef.my-account",["ui.router","ui.bootstrap"]).config(["$stateProvider",function(e){function n(e,n,t){return r(t,n.all("referrals").customGET())}function t(e,n){return{"account-content":{templateUrl:e,controller:n}}}function r(e,n){var t=e.defer();return n.then(function(e){t.resolve(e)},function(){t.resolve({})}),t.promise}n.$inject=["isAuthenticated","GreenchefAPI","$q"],e.state("my-account",{url:"/my-account",resolve:{isAuthenticated:function(){function e(e,n,t){var r=t.defer();return e.isAuthenticated()?r.resolve():r.reject(new n.LoginRequiredError),r.promise}return e.$inject=["AuthService","CustomErrors","$q","$state"],e}(),orderData:function(){function e(e,n,t){return r(t,n.all("order").customGET())}return e.$inject=["isAuthenticated","GreenchefAPI","$q"],e}(),paymentData:function(){function e(e,n,t){return r(t,n.all("payment").customGET())}return e.$inject=["isAuthenticated","GreenchefAPI","$q"],e}(),userData:function(){function e(e,n,t){return e.isDoneSignup()?e.getUserInfo():t.when(null)}return e.$inject=["AuthService","ABTest","$q"],e}(),signupData:function(){function e(e){return e.getSignup()}return e.$inject=["SiteCMSService"],e}()},views:{main:{controller:"MyAccountCtrl",templateUrl:"my-account/my-account.tpl.html"}},data:{pageTitle:"My Account"}}).state("my-account.free-meals",{url:"/free-meals",resolve:{referralLinkData:n},views:t("my-account/1-free-meals.tpl.html","MyAccountFreeMealsCtrl")}).state("my-account.friends",{url:"/friends",resolve:{referralLinkData:n},views:t("my-account/1-free-meals.tpl.html","MyAccountFreeMealsCtrl")}).state("my-account.account-info",{url:"/account-info",views:t("my-account/2-account-info.tpl.html","MyAccountInfoCtrl")}).state("my-account.order-history",{url:"/order-history",views:t("my-account/order-history.tpl.html","MyAccountHistoryCtrl"),data:{autoscroll:!0}}).state("my-account.reactivate",{url:"/reactivate",views:t("my-account/5-reactivate.tpl.html","MyAccountReactivateCtrl")})}]),angular.module("greenchef.terms",["ui.router","ui.bootstrap","legalupdate"]).config(function(){function e(e,n,t){var r=n.$get(),a=moment();t.getParams().today&&(a=moment(t.getParams().today));var o=a.isAfter(r.changeDate)||a.isSame(r.changeDate)?r.currentChange:r.previousChange;e.state("terms",{url:"/terms/:version",params:{version:{value:o,squash:!0}},views:{main:{controller:"TermsCtrl",controllerAs:"vm",templateUrl:"terms/terms.tpl.html"}},data:{pageTitle:"Terms"}}).state("privacy",{url:"/privacy/:version",params:{version:{value:o,squash:!0}},views:{main:{controller:"TermsCtrl",controllerAs:"vm",templateUrl:"terms/privacy.tpl.html"}},data:{pageTitle:"Privacy"}})}return e.$inject=["$stateProvider","LegalUpdateProvider","URLParamProvider"],e}()),angular.module("greenchef.sign-up",["ui.router","ui.bootstrap","greenchef.sign-up.coupon","greenchef.sign-up.welcome","greenchef.sign-up.payment","greenchef.sign-up.preferences","greenchef.sign-up.shipping","greenchef.sign-up.thankyou","greenchef.sign-up.summary","greenchef.sign-up.delivery-details"]).directive("gcSignup2OrderSummary",function(){return{restrict:"E",scope:{showShippingAddress:"=",showCompleteButton:"=",firstDeliveryDate:"=",order:"=",invoice:"=",mealType:"=",planInfo:"=",termsSignupFlow:"=",changeFirstDelivery:"&",changeServingSize:"&",getBoxNum:"&",showNumBoxLink:"=",orderFutureTerms:"=",formSubmitting:"="},templateUrl:"sign-up/order-summary.tpl.html"}}),angular.module("greenchef.account.modals",[]),angular.module("greenchef.paleo-landing",["greenchef.landing-page-service","ui.router","ui.bootstrap","plusOne","ngSanitize"]).config(["$stateProvider",function(e){e.state("paleo-landing",{url:"/paleoplan",views:{main:{controller:"PaleoLandingCtrl",templateUrl:"landing/menus-landing.tpl.html"}},resolve:{price:function(){function e(e){return e.getSignup().then(function(n){var t=n.mealPlans.mealTypes.filter(function(e){return"paleo"===e.value})[0].planId;return e.getRecipesByPlanId(t).then(function(e){return e.planRecipes[t].cost})})}return e.$inject=["SiteCMSService"],e}()},data:{pageTitle:"Paleo Landing",loggingTitle:"paleo_landing"}})}]),angular.module("greenchef.tv-landing",[]).config(["$stateProvider",function(e){e.state("tv-landing",{url:"/tv",views:{main:{controller:"TvLandingCtrl",templateUrl:"landing/tv/v3.tv-landing.tpl.html"}},data:{pageTitle:"Healthy Meal Kit Delivery Service",loggingTitle:"tv_new"},resolve:{testVersion:function(){function e(e,n,t,r,a){a.extendParams({tv:"tvland1"});var o=r.defer();return e.getOrSetABTest(t).then(function(e){return"homepage"===e?(n.go("tv_home"),o.reject()):o.resolve(),o.promise})}return e.$inject=["ABTest","$state","AB_TV_LANDING","$q","URLParam"],e}()}})}]),angular.module("greenchef.vegan-landing",["greenchef.landing-page-service","ui.router","ui.bootstrap","plusOne","ngSanitize"]).config(["$stateProvider",function(e){e.state("vegan-landing",{url:"/veganplan",views:{main:{controller:"VeganLandingCtrl",templateUrl:"landing/menus-landing.tpl.html"}},resolve:{price:function(){function e(e){return e.getSignup().then(function(n){var t=n.mealPlans.mealTypes.filter(function(e){return"vegan"===e.value})[0].planId;return e.getRecipesByPlanId(t).then(function(e){return e.planRecipes[t].cost})})}return e.$inject=["SiteCMSService"],e}()},data:{pageTitle:"Vegan Landing",loggingTitle:"vegan_landing"}})}]),angular.module("greenchef.sign-up.welcome",["ui.router","ui.bootstrap","legalupdate"]),angular.module("greenchef",["greenchef.url-param","greenchef.abtest","LocalStorageModule","templates-app","greenchef.modals","greenchef.navbar","greenchef.footer","greenchef.address-validation","greenchef.banners","greenchef.utility","greenchef.better-tooltip","greenchef.cancel","greenchef.debug-panel","greenchef.eco","greenchef.custom-errors","greenchef.recipes","greenchef.home","greenchef.home-data-service","greenchef.homeve2-owl-carousel-service","greenchef.ipgeo","greenchef.learn-more","greenchef.notification-services","greenchef.on-the-menu","greenchef.sign-in","greenchef.sign-up","greenchef.marketing-pages","greenchef.my-account","greenchef.order-services","greenchef.landing-page-service","greenchef.unskipPopup","greenchef.unskipSuccessPopup","greenchef.unskip-popup-services","greenchef.payment-services","greenchef.pricing-services","greenchef.shipping-services","greenchef.menu-services","greenchef.metadata-service","greenchef.redirect","greenchef.referral-services","greenchef.referral-landing","greenchef.reset-password","greenchef.terms","greenchef.unsubscribe","greenchef.format","greenchef.account-service","greenchef.paleo","greenchef.social-sharing-service","greenchef.owl-carousel-service","greenchef.menus-landing-service","greenchef.vegan","greenchef.tv-landing","greenchef.vegan-landing","greenchef.paleo-landing","greenchef.vegan-ad","greenchef.paleo-ad","greenchef.account","greenchef.google-360-service","greenchef.sms-link-service","greenchef.carousel-meals","greenchef.carousel-testimonials","greenchef.carousel-twitter","greenchef.reviews","greenchef.your-plan-service","ngScrollSpy","ngSanitize","ngCookies","ngHtmlCompile","ngClipboard","ui.router","restangular","angularMoment","angular-md5","base64","gc-ng-match","720kb.socialshare","legalupdate","ngFitText","ng-fastclick","gilbox.sparkScroll","ngTouch"]).config(["ngClipProvider",function(e){e.setPath("//cdn.greenchef.com/assets/ZeroClipboard.a070e931.swf")}]).config(function(){function e(e,n,t,r,a,o,i,s,l){a.resourceUrlWhitelist(["self","http://cdn.greenchef.com/**","https://cdn.greenchef.com/**","http://cdn2.greenchef.com/**","https://cdn2.greenchef.com/**","http://cdn-staging.greenchef.com/**","https://cdn-staging.greenchef.com/**"]),o.html5Mode(!0),r.strictMode(!1),r.caseInsensitive(!0),i.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|sms):/),l.enable();var c="/home";t.otherwise(function(e,n){var t=n.search();return console.log("otherwise search=",t,"path=",n.path()),s.setOriginalPath(n.path()),c+location.search}),t.deferIntercept()}return e.$inject=["URLParamProvider","$stateProvider","$urlRouterProvider","$urlMatcherFactoryProvider","$sceDelegateProvider","$locationProvider","$compileProvider","RedirectProvider","BetterTooltipProvider"],e}()).config(["localStorageServiceProvider",function(e){e.setPrefix("com.greenchef")}]).run(function(){function e(e,n,t,r,a,o,i,s,l,c){i.setInterceptors(r,!0),i.setInterceptors(o,!1),i.setInterceptors(a,!1),t.init(),s.init(),l.init(),n.listen(),c.trackSessionStart(),SmoothScroll({frameRate:50,animationTime:200,stepSize:30}),$.stellar({horizontalScrolling:!1,positionProperty:"transform",hideDistantElements:!1})}return e.$inject=["$window","$urlRouter","Redirect","GreenchefAPI","PublicAPI","SignupAPI","APIConfig","PaymentService","ABTest","ConversionTracking"],e}()).controller("AppCtrl",function(){function e(e,n,t,r,a,o,i,s,l,c,u,d){function p(){i.error("google-analytics-unable-to-load")}l.addStateChangeHandler(n),e.metaService=l,n.recordGoogleAnalyticsTimeout=p,n.$on("$stateChangeError",function(e,n,r,a,o,i){i instanceof c.LoginRequiredError&&t.go("sign-in.timeout")}),n.$on("$locationChangeSuccess",function(){i.view(n.trackerViewName,n.trackerParams)}),n.$on("$stateChangeSuccess",function(t,r,a){console.log("transitioning to: "+r.url," toParams=",a),e.currentStateName=r.name;var o;if(angular.isDefined(r.data.loggingTitle)&&(o=r.data.loggingTitle),angular.isDefined(r.data.pageTitle)&&(angular.isDefined(r.data.loggingTitle)||angular.isDefined(r.data.customTrack)||(o=r.data.pageTitle),n.pageTitle="Green Chef | "+r.data.pageTitle),o&&(angular.isDefined(r.data.trackerParams)?n.trackerParams=r.data.trackerParams:delete n.trackerParams,n.trackerViewName=o,mixPanelTrackView=o),(angular.isDefined(r.views)&&angular.isDefined(r.views.main)||r.data&&r.data.autoscroll)&&window.scrollTo(0,0),u.isAuthenticated()&&u.isDoneSignup()){var i=(new Date).getTime();i-u.getLastTokenRefreshTimestamp()>s.ttl&&u.refreshToken(),d.unskipPopup()}})}return e.$inject=["$rootScope","$scope","$state","$location","$log","$window","tracker","CONSTANTS","MetadataService","CustomErrors","AuthService","UserFeatures"],e}()),window.cloudspongeProxy=function(){var e,n,t,r="https://api.cloudsponge.com/auth",a=!1,o=function(e){var n,t=[];for(n in e)t.push(n+"="+encodeURIComponent(e[n]));return t.join("&")},i=function(e){var n={};return e.replace(/([^?=&]+)(=([^&]*))?/g,function(e,t,r,a){return n[t]=decodeURIComponent(a)}),n},e=i(window.location.search);n={};for(t in e)("code"===t||"state"===t||"error"===t||"error_code"===t||"forward"===t)&&(n[t]=e[t]);return n.state&&(n.code||n.error||n.error_code)&&(a=!0,window.location=r+"?"+o(n)),window.addEventListener("load",function(){var e,n=document.getElementsByClassName("cs-force");for(e=0;e<n.length;e++)n[e].href=r+window.location.search},!1),{redirecting:a,force:function(){function e(){return window.location=r+window.location.search,!1}return e}()}}(),function(){function e(e,n,t,r,a,o,i,s,l,c,u,d,p,m,g,f,h,v,y,b){function S(){t.filteredMealPlans=t.upcomingSubscription.mealPreference.mealPlan.isFamilyPlan?h.mealPlans.familyMealTypes:h.mealPlans.mealTypes}function P(e,n){var t={};return _.forEach(e,function(e,n){t[n]={name:e.kitId,recipes:e.recipes,cost:e.cost}}),_.forEach(n,function(e,n){t[n]={name:e.planName,recipes:e.recipes,cost:e.cost,isChoicePlan:!0}}),t}function w(e){t.loadingRecipes=!1;var n=P(e.planRecipes,e.planCatalogs),r=t.allPlansData.filter(function(e){return e.value===t.upcomingCart.mealPreference.mealPlan})[0].planId;t.currentPlan=n[r],t.sortChoiceRecipes(t.upcomingCart,t.currentPlan);for(var o,i=t.filteredMealPlans,s=t.upcomingSubscription.mealPreference.mealPlan.isFamilyPlan,l=0;l<i.length;l++)if(o=n[i[l].planId],!_.isEmpty(o)){if(!d.processRecipes(o.recipes,s,o.isChoicePlan))return a.reject();i[l].meals=o}t.availableFlexPlans="vegan"===t.upcomingSubscription.mealPreference.mealPlan.name?t.filteredMealPlans.filter(function(e){return"vegetarian"===e.name}):t.filteredMealPlans}function k(){return t.currentPlan={},t.availableFlexPlans={},t.recipesDataByDate[t.menuDate]?w(t.recipesDataByDate[t.menuDate]):g.getRecipes(t.upcomingCart.deliveryDate).then(function(e){return e&&e.planRecipes&&!_.isEmpty(e.planRecipes)?(t.recipesDataByDate[t.menuDate]=e,w(e)):a.reject()},function(){t.loadingRecipes=!1,l.error(t,o)})}function C(){t.cutOff=moment(t.upcomingCart.cutoffTime).isBefore(),t.menuDate=moment(t.upcomingCart.deliveryDate).day("monday").format("YYYY-MM-DD")}function T(e,n){m.navigateToRecipePage(e,n)}function M(e){t.carts=_.chain(e).cloneDeep().sortBy("deliveryDate").value()||[],t.showHolidayBanner=p.showHolidayBanner(t.carts,t.upcomingSubscription.deliveryWindow),t.affectedWeek=p.affectedWeek}function D(e){t.upcomingCart=t.carts[e]||null,t.upcomingCart&&(t.upcomingCart.index=e,C(),S(),k())}function I(r){y.click("replace-upcoming-order",{menuUser:t.upcomingCart.menuUserId}),n.open({templateUrl:"account/modals/replace-order/replace-order-modal.tpl.html",windowClass:"replace-order-modal",controller:"ReplaceOrderController",controllerAs:"vm",resolve:{currentCart:function(){function e(){return t.upcomingCart}return e}(),currentMealPlan:function(){function e(){return d.getMealPlanValue(t.filteredMealPlans,t.upcomingCart.mealPreference.mealPlan)}return e}(),replacePlan:function(){function e(){return d.getMealPlanValue(t.filteredMealPlans,r.value)}return e}()}}).result.then(function(r){"unskipConfirm"===r.action?n.open({templateUrl:"account/modals/unskip-order/unskip-order.tpl.html",windowClass:"unskip-order-modal",controller:"UnSkipOrderController",controllerAs:"vm",resolve:{currentCart:function(){function e(){return t.upcomingCart}return e}(),replaceMealPlan:function(){function e(){return d.getMealPlanName(t.filteredMealPlans,r.data.mealPreference.mealPlan)}return e}(),data:function(){function e(){return r.data}return e}()}}).result.then(function(e){"unskipSuccess"===e.action&&t.updateCartInScope(e.updatedCart)}):"replacedSuccess"===r.action&&t.updateCartInScope(r.updatedCart),e()})}t.user=b.plain(),t.subscriptions=v||[],t.showReplaceOrder=I,t.upcomingSubscription=t.subscriptions[0],t.mealPlans=h,t.navigateToRecipePage=T,t.allPlansData=h.mealPlans.familyMealTypes.concat(h.mealPlans.mealTypes),t.recipesDataByDate={},t.availableFlexPlans=[],t.currentPlan={},t.loadingRecipes=!0,M(f),D(0),l.init(t),s.init(t),t.editPlan=function(){n.open({templateUrl:"account/modals/edit-subscription/plan-modal.tpl.html",controller:"EditSubsController",controllerAs:"vm",windowClass:"edit-plan-modal",resolve:{subscription:function(){function e(){return angular.copy(t.upcomingSubscription)}return e}(),mealPlans:function(){function e(){return h.mealPlans}return e}()}}).result.then(function(e){var r=e.updatedSubscription;r.mealPreference.mealPlan=d.getMealTypeObject(h.mealPlans,r.mealPreference.mealPlan),n.open({templateUrl:"account/modals/edit-subscription/edit-subscription-confirmation-modal.tpl.html",controller:"ConfirmSubscriptionController",controllerAs:"vm",windowClass:"v3-page inform-modal edit-account-confirmation",background:"static",resolve:{subscription:function(){function e(){return t.upcomingSubscription
}return e}(),updatedSubscription:function(){function e(){return r}return e}(),cart:function(){function e(){return t.carts[0]}return e}()}}),"canceled"===t.upcomingSubscription.status&&"active"===r.status&&c.refreshToken(),t.upcomingSubscription=r;var a=moment().format("YYYY-MM-DD");u.getUserCarts(r.userId,a,i.limit).then(function(e){M(e)})})},t.sortChoiceRecipes=function(e,n){var t=e.recipes.map(function(e){return e._id});n.recipes&&(n.recipes.forEach(function(e){e.inCart=t.includes(e._id)}),n.recipes.sort(function(e,n){return n.inCart-e.inCart}))},t.isCartDeliverable=function(){return"DELIVERY"===t.upcomingCart.status},t.selectCart=function(e){D(e)},t.updateCartInScope=function(e){var n=t.carts,r=e.cartId||e.id,a=_.findIndex(n,{id:r});-1!==a&&n.splice(a,1,_.extend(n[a],e)),M(n),D(a)},t.updateAllCartsInScope=function(e){M(e),D(0)},r.editPlan&&t.editPlan()}e.$inject=["$anchorScroll","$modal","$scope","$stateParams","$q","GENERIC_ERROR","NUM_CARTS_FETCHED","AccountService","Alerts","AuthService","FlexibleOrderingAPI","MenuService","NotificationService","RecipePages","SiteCMSService","carts","mealPlansData","subscriptions","tracker","user"],angular.module("greenchef.account").constant("GENERIC_ERROR","Oops! An error occured during the update.").controller("YourAccount",e)}(),angular.module("greenchef.address-validation",["ui.bootstrap"]).controller("AddressValidationPopupController",AddressValidationPopupController),angular.module("greenchef.abtest",[]).constant("AB_NAV_GIFT_CTA",{testId:"nav-gift-cta",versionIds:["get25off","get25","feedfriends"],versionWeights:[50,25,25]}).constant("AB_TEST_KEY",{singlePlan:"sp",showShipping:"sso",glutenFree:"gf",splashHome:"sh"}).constant("AB_HOME_SP57",{testId:"tv-home-sp57",versionIds:["sp5","sp7h"],versionWeights:[50,50]}).constant("AB_HOME_TV89",{testId:"home-tv89",versionIds:["sp8","sp9"],versionWeights:[50,50]}).constant("AB_HOME_2FREETRUE",{testId:"home-2freetrue",versionIds:["sp10"],versionWeights:[100]}).constant("AB_FAMILY_PRICING",{testId:"tv-family-pricing",versionIds:["high-price","low-price"],versionWeights:[50,50]}).constant("AB_UNSKIP_POPUP",{testId:"show-unskip-popup",versionIds:["on","off"],versionWeights:[50,50]}).constant("AB_TV_LANDING",{testId:"tv-landing",versionIds:["landing-page","homepage"],versionWeights:[50,50]}).constant("AB_VEGAN_AD",{testId:"vegan-ad",versionIds:["vegan-landing","veganhome"],versionWeights:[50,50]}).constant("AB_PALEO_AD",{testId:"paleo-ad",versionIds:["paleo-landing","paleohome"],versionWeights:[50,50]}).constant("AB_VEGAN_SUF",{testId:"vegan-suf",versionIds:["SUF_preselect","SUF_nooptions"],versionWeights:[50,50]}).constant("AB_PALEO_SUF",{testId:"paleo-suf",versionIds:["SUF_preselect","SUF_nooptions"],versionWeights:[50,50]}).constant("AB_HEAR_ABOUT_US",{testId:"hearaboutus-feedback",versionIds:["on","off"],versionWeights:[90,10]}).constant("AB_ORG_BONUS",{testId:"org-bonus",versionIds:["org-bonus-40","org-bonus-50"],versionWeights:[50,50]}).constant("AB_TESTVERSION_SPLIT",{pd12:{name:"AB_PRICING",testId:"price-drop",versionIds:["pd1","pd2"],versionWeights:[100,0]},sp35:{name:"AB_SP35",testId:"tv-sp35",versionIds:["sp3","sp5"],versionWeights:[50,50]},su34:{name:"AB_NUF_V2_NOPOPUP",testId:"tv-su34",versionIds:["su3","su4"],versionWeights:[0,100]},famo_choice:{name:"AB_FAMO_CHOICE",testId:"tv-famo_choice",versionIds:["famo4","choice4"],versionWeights:[50,50]},su4_plan:{name:"AB_SU4_PLAN",testId:"tv-su4_plan",versionIds:["su4","choice4"],versionWeights:[50,50]},ke2:{name:"AB_TV_KETO",testId:"tv-keto",versionIds:["su4","ke3"],versionWeights:[50,50]}}).constant("DEFAULT_TEST_VERSION","pd12").provider("ABTest",["URLParamProvider",function(e){function n(){var n=e.getParams(),t=n[r];return t&&0!==t.length?parseInt(t):0}var t="tv",r="tva",a="-odtk";this.getVersion=function(){var n=e.getParams(),r=n[t];return r&&0!==r.length?r:null},this.getODTKVersion=function(){return this.enableFreeTrialButton()?this.getVersion()+a:this.getVersion()},this.isVersion=function(e){return-1!==e.indexOf(this.getVersion())},this.isNotVersion=function(e){return-1===e.indexOf(this.getVersion())},this.$get=["$q","$cookieStore","AuthService","md5","tracker","GreenchefAPI","URLParam","AB_FAMILY_PRICING","DEFAULT_TEST_VERSION","AB_UNSKIP_POPUP","AB_TESTVERSION_SPLIT",function(t,r,a,o,i,s,l,c,u,d,p){function m(e,n,t,r){r=r?r:0;var a=o.createHash(e+"::"+n),i=((parseInt(a.substr(0,9),16)+r)%t.length+t.length)%t.length,s=t[i];return s}function g(e,n,t){var r=null,a=0,o=Math.floor(100*Math.random()+1);if(n.length===t.length)for(var i=0;i<n.length;i++)o>a&&(r=n[i]),a+=t[i];return r}function f(e,n,t,r,a){a=a&&a>0?a:0;var i=o.createHash(e+"::"+n),s=parseInt(i.substr(0,9),16)%100,l=0;angular.forEach(r,function(e){return s-=e,0>s?!1:(l++,void 0)}),l=(l+a)%t.length;var c=t[l];return c}function h(e){var n="ab-"+e,t=r.get(n);return t}function v(n,r,a,o){if(e.getParams().hasOwnProperty(n)){var s=e.getParams()[n];if(r.includes(s))return t.when(s)}return i.getCookieId().then(function(e){var t=null,i=h(n);return i?t=i:o||(t=f(e,n,r,a),y(n,t)),t})}function y(e,n){var t="ab-"+e;r.put(t,n),i.abtest(e,n)}var b=t.defer(),S=b.promise,P=this;return this.init=function(){var e=this.getVersion();if(e||(e=u),e in p){var n=p[e];v(n.testId,n.versionIds,n.versionWeights).then(function(e){l.extendParams({tv:e})})["finally"](function(){b.resolve()})}else b.resolve()},this.getVersionAfterInit=function(){return S.then(function(){return P.getVersion()})["catch"](function(){return P.getVersion()})},this.addUserToTest=function(e,n,t){var r={testId:e,versionId:n,override:!!t};return s.all("user").customPUT(r,"addToABTest")},this.assignUserToTest=function(e,t){var r=a.getUserId();if(!r)return null;var o=n(),i=m(r,e,t,o);return this.addUserToTest(e,i),i},this.assignToTestWeighted=function(e,n,r){var a=null;return a=g(e,n,r),null!==a?(i.abtest(e,a),t.when(a)):t.when(null)},this.assignUserToTestOnServer=function(e,r,o){var i=a.getPayload();if(i&&!i.testGroups.tests[e]&&void 0!==_.find(r,function(n){return n===i.testGroups.tests[e]}))return t(function(n){n(i.testGroups.tests[e])});var l={testId:e,versionIds:r,versionAdjustment:n()};return o&&(l.versionWeights=o),s.all("user").customPUT(l,"assignToABTest").then(function(e){return a.refreshToken(),e})},this.assignCookieToTest=function(e,t){return i.getCookieId().then(function(r){var a=n(),o=assignmentHelper(r,e,t,a);return i.abtest(e,o),o})},this.getExistingABTestVersionForUser=function(e,n){return a.isAuthenticated()?(n||(n=a.getUserInfo()),n.then(function(n){return void 0===n.testGroups.tests[e]||null===n.testGroups.tests[e]?null:n.testGroups.tests[e]})["catch"](function(){return null})):t.when(null)},this.getVersionFromCookie=h,this.removeVersionFromCookie=function(e){var n="ab-"+e;r.remove(n)},this.getOrSetPreUserABTestVersionWeighted=function(e,n,t){return v(e,n,t)},this.setCookieToTest=y,this.enableZipOfferPopup=function(){var e=i.getCampaignParameters();return"groupon"===e.utm_source?!1:this.isVersion([null,"sp4","sp5","sp55","sp6","sp7","sp7h","sp7i","sp8","sp9","sp10","pd1","pd2","sp12","choice2","famo2","su52","pa","emailsp5","ek","ek2","ekon","veg3","su260","su26free","choice260","choice26free"])},this.enableAutomaticDeliveryDayChoice=function(){return!1},this.getDefaultRoute=function(){var e=this.getVersion(),n="/home";return"groupon"===e?n="/sign-up-groupon":"livingsocial"===e?n="/sign-up-livingsocial":"coupon"===e?n="/sign-up-coupon":"holiday"===e?n="/sign-up-holiday":"mma"===e&&(n="/mma"),n},this.defaultCoupon=function(){var e=(t.defer(),this);return S.then(function(){return e.isVersion([null,"sp8","sp9","sp10","choice2","famo2","su52"])?"2FREEHOME":e.isVersion(["sp5","sp55","sp7h","sp7i"])?"4FREEHOME":e.isVersion(["tvland1"])?"4FREETV":e.isVersion(["sp12"])?"20OFFGC":e.isVersion(["sp13"])?"40OFFNEW":null})},this.setToDefaultTestVersion=function(){l.extendParams({tv:u})},this.getOrSetABTest=function(e){return v(e.testId,e.versionIds,e.versionWeights)},this.getOrSetFamilyPricingTest=function(){return v(c.testId,c.versionIds,c.versionWeights,!0)},this.getOrSetUnskipPopupTest=function(){return this.assignUserToTestOnServer(d.testId,d.versionIds,d.versionWeights)},this}],this.getPriceTagUrl=function(){return this.isVersion(["gf","sso"])?"//cdn.greenchef.com/assets/Icons/price_1349.3d1f7b19.png":this.isVersion(["gf2"])?"//cdn.greenchef.com/assets/Icons/price-1299.82ad047b.png":this.isVersion(["vg"])?"//cdn.greenchef.com/assets/Icons/price-1049.eb58d177.png":this.isVersion(["vn","vn4"])?"//cdn.greenchef.com/assets/Icons/price-999.c147b945.png":"//cdn.greenchef.com/assets/Icons/price-full.b872ea8e.png"},this.getPriceTagValue=function(){return this.isVersion(["gf","sso"])?13.49:this.isVersion(["gf2"])?12.99:this.isVersion(["vg"])?10.49:this.isVersion(["vn","vn4"])?9.99:11.99},this.glutenFreeAddonPrice=function(){return this.isVersion(["gf2"])?1:1.5},this.paleoAddonPrice=function(){return 3},this.showShippingCost=function(){return this.isVersion([null,"sp","sp3","sp4","sp5","sp55","sp7","sp7h","sp7i","sp8","sp9","sp10","sp12","sp13","pd1","pd2","choice2","famo2","su52","su3","su4","tvland1","su54","famo4","choice4","ke1","ke3","spu","gf","sh","vn","vn4","vg","mp","bp","pa","pa2","emailsp5","veg1","veg3","choice260","choice26free","ek","ek2","ekon","phl","su260","su26free"])},this.defaultMealPlan=function(){return this.isVersion([null,"sp","sp3","sp4","sp5","sp55","sp7","sp7h","sp7i","sp8","sp9","sp10","sp12","sp13","pd1","pd2","su52","su3","su4","tvland1","su54","ke3","spu","sso","sh","mp","bp","emailsp5","ek","ek2","ekon","phl","su260","su26free"])?"omnivore":this.isVersion(["gf","gf2"])?"gluten-free":this.isVersion(["pa","pa2"])?"paleo":this.isVersion(["veg1","veg3"])?"vegan":this.enableFamilyPlans()?"family-omnivore":this.isVersion(["ke1"])?"keto":"vegetarian"},this.alwaysShowZipOfferPopup=function(){return this.isVersion([null,"sp5","sp55","sp6","sp8","sp9","sp10","pd1","pd2","sp12","choice2","famo2","su52","pa","emailsp5","ek","ek2","ekon","su260","su26free","choice260","choice26free"])},this.zipOfferReplacementCoupon=function(e){var n="9SHIPHOME",t=this.getVersion();return"sp5"===t?n="9SHIPSP5":"sp55"===t?n="9SHIPSP55":"sp4"===t?n="9SHIPSP4":"sp6"===t?n="9SHIPSP6":"sp7"===t||"sp7h"===t||"sp7i"===t?n="9SHIPSP7":"sp8"===t||"ek"===t||"ek2"===t||"ekon"===t?n="5FREE":"sp9"===t||"sp10"===t||"choice2"===t||"famo2"===t||"su52"===t||"veg3"===t?n="4FREE9":"sp12"===t?n="40OFFGC":"pa"===t?n="9SHIPPA1":this.isVersion(["emailsp5"])?n="9SHIPSP5C":"su260"===t||"choice260"===t?n="60OFF":"su26free"===t||"choice26free"===t?n="6FREE":"org-bonus-40"===e?n="40OFFGC":"org-bonus-50"===e&&(n="50OFFGC"),n},this.enableZipOfferPopupAmount=function(){return this.isVersion(["su260","choice260","sp12","pd1","pd2"])?!0:!1},this.zipOfferContent=function(e){var n=this.getVersion(),t={title:"Psst...We've got a better deal for you!",caption:"Did you know there are lots of happy Green Chefs in "+e+"?<br/><br/> Because your neighbors have shown us so much love, we're paying it forward with an extra sweet deal: Enjoy your first box of <b>6 meals FREE</b>! (Just pay $5.99 shipping.)",image:"//cdn.greenchef.com/assets/Icons/zipcodepop_6free.79e96552.png",buttonTitle:"Get my free box"};return"sp55"===n?(t.caption="Did you know there are lots of happy Green Chefs in "+e+"?<br/><br/> Because your neighbors have shown us so much love, we're paying it forward with an extra sweet deal: Enjoy your first box of <b>6 servings FREE</b>! (Just pay $5.99 shipping.)",t.image="//cdn.greenchef.com/assets/Icons/ZipCodePopup_6free.2ddce163.jpg"):"sp8"===n||"ek"===n||"ek2"===n||"ekon"===n?(t.buttonTitle="Get my Meals",t.caption="Did you know there are lots of happy Green Chefs in "+e+"?<br/><br/> Because your neighbors have shown us so much love, we're paying it forward with an extra sweet deal: Get <b>5 free meals</b> in your first box!",t.image="//cdn.greenchef.com/assets/Icons/zipcodepop_5free.456f612e.png"):_.contains(["sp9","sp10","choice2","famo2","su52","veg3"],n)&&(t.buttonTitle="Get my 4 free meals",t.caption="Did you know there are lots of happy Green Chefs in "+e+"?<br/><br/> Because your neighbors have shown us so much love, we're paying it forward with an extra sweet deal: Get <b>4 free meals</b> in your first box! (Save over 65%)",t.image="//cdn.greenchef.com/assets/Icons/zipcodepop_4free.af9cb3e0.png"),t},this.numOfFreeMeals=function(){var e=this.getVersion();return _.contains(["sp9","sp10","choice2","famo2","su52","veg3"],e)?4:_.contains(["sp8","ek","ek2","ekon"],e)?5:_.contains(["sp55","su26free","choice26free"],e)?6:0},this.enableEmailCapture=function(){return this.isVersion(["emailsp5"])},this.enableFreeTrialButton=function(){return this.isVersion(["su52","su54"])},this.enableFamilyPlans=function(){var e=this.getVersion(),n=["famo2","choice2","famo4","choice4","choice260","choice26free"];return _.contains(n,e)},this.showFamilyChoice=function(){var e=this.getVersion();return _.contains(["choice2","choice4","choice260","choice26free","tvland1"],e)}}]),function(){function e(e,n,t,r,a,o,i,s,l,c,u,d){var p=!1,m={init:function(){function e(e){function n(){e.registered=a.getSignupState()==i.registered,e.canceled=a.getSignupState()==i.canceled,e.isDoneSignup=a.isDoneSignup(),e.deliveryState=a.getDeliveryState(),e.isDeliverable=a.isDeliverable(),e.isOptOutSubscription=a.isOptOutSubscription(),e.isSuspended=a.isSuspended(),e.suspension=a.getUserSuspension(),e.isSuspended&&(e.suspendReasonGroups=r(),e.getReasonInfo=s,e.suspendAccountStateTemplate="my-account/suspend-account-state.tpl.html")}function r(){var n=angular.copy(e.suspension),t={other:[],normal:[]};return _.forEach(n.reasons,function(e){e.code===c.noAddress&&(e.dataFields.userString="Your area is currently unsupported by our deliverers"),e.code===c.customerService?t.other.push(e):t.normal.push(e)}),t.normal=_.uniq(t.normal,function(e){return e.dataFields.userString}),t}function o(){t.go("account",{editPlan:!0})}function s(n){var t={message:"",action:"",linkAction:""};return t.message=n.dataFields.userString+".",n.code===c.noDelAddress||n.code===c.noAddress?(t.action=e.editDelivery,t.linkAction="Edit address"):n.code===c.invalidDelWindow?(t.action=o,t.linkAction="Edit delivery window"):(n.code===c.declinedCc||n.code===c.noCc)&&(t.action=e.editPayment,t.linkAction="Edit credit card info"),t}n(),e.$on(l.userStatusUpdated,function(){n()}),e.isInFriends=function(){return t.is("my-account.friends")||t.is("my-account.free-meals")}}return e}(),referralData:function(){function e(){return s.getReferrals(!0)}return e}(),isAccountPagesVisited:function(){function e(){return p}return e}(),setAccountPagesVisited:function(){function e(e){p=e}return e}(),gotoMyAccount:function(){function e(){a.getSignupState()===i.canceled?t.go("my-account"):t.go("account")}return e}(),cancelAccount:function(){function t(t){return d.all("user").customPUT(t,"cancel").then(function(e){if(e&&e.orderPastCutoff&&e.orderPastCutoff.willShip){var n="Account Canceled",t="Your subscription has been canceled.<br/><br/>",r=e.orderPastCutoff,a="shipped"==r.status?"shipped":"prepared";t+="We have already "+a+" your order arriving on "+moment(r.arrivalDate).format("MMMM Do")+".<br/>This order has not been changed.<br/><br/>",u.showConfirmation(n,t)}}).then(function(e){return a.refreshToken().then(function(){return e})})["catch"](function(t){return r.error("cancel-error",t),e.warn("Failed to cancel account: "+t),n.reject(error)})}return t}()};return m}e.$inject=["$log","$q","$state","tracker","AuthService","ABTest","SIGNUP_STATE","ReferralService","AUTH_EVENTS","SUSPEND_REASONS_CODE","Modals","GreenchefAPI"],angular.module("greenchef.account-service",[]).constant("SUSPEND_REASONS_CODE",{customerService:"cs-other",noDelAddress:"no-del-address",noAddress:"no-address",invalidDelWindow:"invalid-del-window",declinedCc:"declined-cc",noCc:"no-cc"}).factory("AccountService",e)}(),angular.module("greenchef").factory("Alerts",function(){function e(){return{init:function(){function e(e){e.alerts=[],e.closeAlert=function(n){e.alerts.splice(n,1)}}return e}(),error:function(){function e(e,n,t){var r={type:"alert-danger",msg:""};r.msg=n,t&&t.length>0&&(r.details=t),e.alerts.push(r)}return e}(),success:function(){function e(e,n){var t={type:"alert-success",msg:""};t.msg=n,e.alerts.push(t)}return e}(),yellow:function(){function e(e,n){var t={type:"alert-yellow",msg:""};t.msg=n,e.alerts.push(t)}return e}(),clear:function(){function e(e){e.alerts=[]}return e}()}}return e.$inject=["Restangular"],e}()),angular.module("greenchef").constant("AUTH_EVENTS",{loginSuccess:"auth-login-success",loginFailed:"auth-login-failed",logoutSuccess:"auth-logout-success",sessionTimeout:"auth-session-timeout",notAuthenticated:"auth-not-authenticated",notAuthorized:"auth-not-authorized",userStatusUpdated:"auth-user-status-updated"}).constant("SIGNUP_STATE",{registered:"registered",noDelivery:"no-delivery",canceled:"canceled",lead:"lead"}).constant("DELIVERY_STATE",{delivery:"delivery",noDelivery:"no-delivery",deliveryAvailable:"delivery-available",blocked:"blocked"}).constant("BANNER_STATE",{bannerUpdated:"auth-banner-updated"}).constant("CONSTANTS",{ttl:3e5}).factory("AuthService",function(){function e(e,n,t,r,a,o,i,s,l,c,u,d){var p=null,m=null;return{signIn:function(){function n(n,r,o,l,u,d){a.all("authenticate").post(o).then(function(n){i.setToken(n.token,l),s.setFeatureFlags(n.featureFlags),u(n),e.$broadcast(c.userStatusUpdated),p&&(console.log("Going to ",p),t.path(p),p=null)},function(n){i.clearToken(),d(n.status,n.data),e.$broadcast(c.userStatusUpdated)})}return n}(),signUp:function(){function n(n,t,r,o,s){a.all("signup").post(r).then(function(n){i.setToken(n.token,!0),o(n),e.$broadcast(c.userStatusUpdated)},function(n){i.clearToken(),s(n.status,n.data),e.$broadcast(c.userStatusUpdated)})}return n}(),signUpAsLead:function(){function n(n){return a.all("signupAsLead").post(n).then(function(e){return i.setToken(e.token,!0),e},function(e){return i.clearToken(),l.reject(e)})["finally"](function(){e.$broadcast(c.userStatusUpdated)})}return n}(),sendPasswordReset:function(){function e(e,n,t){a.all("sendPasswordResetEmail").post({email:e}).then(function(e){n(e)},function(e){t(e.status,e.data)})}return e}(),changePassword:function(){function e(e,n,t,r){a.all("resetPassword").post({resetToken:e,password:n}).then(function(e){t(e)},function(e){r(e.status,e.data)})}return e}(),setNextUrl:function(){function e(e){p||(p=e,console.log("Next url=",p))}return e}(),getLastTokenRefreshTimestamp:function(){function e(){return m}return e}(),setLastTokenRefreshTimestamp:function(){function e(e){angular.isNumber(e)&&(m=e)}return e}(),signOut:function(){function n(){i.clearToken(),e.$broadcast(c.logoutSuccess)}return n}(),getUserInfo:function(){function e(){return l(function(e,n){o.all("user").customGET().then(function(n){e(n)},n)})}return e}(),refreshToken:function(){function n(){return o.all("refreshToken").customGET().then(function(n){i.setToken(n.token),s.setFeatureFlags(n.featureFlags),m=(new Date).getTime(),e.$broadcast(c.userStatusUpdated)},function(){i.clearToken(),e.$broadcast(c.userStatusUpdated)})}return n}(),getToken:function(){function e(){return i.getToken()}return e}(),getPayload:function(){function e(){var e=this.getToken();if(!e)return null;for(var t=e.split(".")[1];t.length%4!==0;)t+="=";return JSON.parse(n.decode(t))}return e}(),getSignupState:function(){function e(){var e=this.getPayload();return e?e.signupState:null}return e}(),getTestGroups:function(){function e(){try{return this.getPayload().testGroups}catch(e){}return{tests:{}}}return e}(),getDeliveryState:function(){function e(){var e=this.getPayload();return e?e.deliveryState:null}return e}(),isDeliverable:function(){function e(){return this.getSignupState()!=u.noDelivery&&this.getDeliveryState()!=d.noDelivery&&this.getDeliveryState()!=d.blocked}return e}(),isOptOutSubscription:function(){function e(){var e=this.getPayload();return e?e.isOptOutSubscription:!1}return e}(),showDeliverySchedule:function(){function e(){var e=this.getSignupState();return e===u.registered||e===u.noDelivery}return e}(),isSuspended:function(){function e(){var e=this.getPayload();return e&&e.suspension?e.suspension.reasons.length>0:!1}return e}(),getUserSuspension:function(){function e(){return this.isSuspended()?this.getPayload().suspension:void 0}return e}(),getUserId:function(){function e(){return this.isAuthenticated()?this.getPayload().id:null}return e}(),getImpersonatedById:function(){function e(){return this.isAuthenticated()?this.getPayload().impersonatedById:null}return e}(),isAuthenticated:function(){function e(){return this.getSignupState()===u.lead?!1:i.hasToken()}return e}(),requireLogin:function(){function e(e){this.isAuthenticated()||(this.setNextUrl(t.path()),r.go(e))}return e}(),isDoneSignup:function(){function e(){var e=this.getSignupState();return e==u.registered||e==u.noDelivery||e==u.canceled}return e}(),isRegistered:function(){function e(){var e=this.getSignupState();return e===u.registered}return e}(),isDoneSignupV2:function(){function e(){var e=this.getSignupState();return this.isAuthenticated()&&(e===u.registered||e===u.canceled)}return e}()}}return e.$inject=["$rootScope","$base64","$location","$state","PublicAPI","GreenchefAPI","UserSession","UserFeatureFlags","$q","AUTH_EVENTS","SIGNUP_STATE","DELIVERY_STATE"],e}()),angular.module("greenchef.better-tooltip",["ui.bootstrap.tooltip","greenchef.utility"]).provider("BetterTooltip",["$tooltipProvider","UtilityProvider",function(e,n){return this.enable=function(){n.isMobile()?e.options({trigger:"click"}):e.options({trigger:"mouseenter"})},this.$get=function(){return this},this}]),angular.module("greenchef").directive("ngCarouselControl",["$document",function(e){return function(n){e.bind("keydown",function(e){n.$apply(function(){37===e.which&&n.showPrevious(),39===e.which&&n.showNext()}),e.preventDefault()})}}]),angular.module("greenchef").directive("collapseList",function(){return{link:function(){function e(e,n){var t=angular.element(n[0].querySelector(".collapse-button")),r=angular.element(n[0].querySelectorAll(".social-list li"));t.bind("click",function(){t.toggleClass("collapse"),r.toggleClass("expand")})}return e}()}}),function(){angular.module("greenchef").constant("ERROR_CODE",{SUSPENDED_USER_NO_DEL:1009,SUSPENDED_USER_INVALID_DEL_WINDOW:1010,INCOMPLETE_ADDRESS:1012}).constant("NUM_CARTS_FETCHED",{limit:5}).constant("START_DATE",{date:moment().format("YYYY-MM-DD")}).constant("MEAL_PLAN_COPY",[{internalName:"choice-glutenfree",displayName:"Gluten-Free",popularity:7,state:"menus.choice-glutenfree",descriptionShort:"Meat, seafood & vegetarian dinners.",description:"Gluten-free and flavor-full, with meat, seafood & vegetarian dinners.",subtitle:"Choice of 3 gluten-free meat, seafood and vegetarian dinners",subtitle2:"Carefully prepared gluten-free dishes.",extendedSubtitle:"No gluten, all flavor. Meat, seafood & vegetarian dinners.",mobileSubtitle:"No gluten, all flavor.",home:{posterImage:{url:"//cdn.greenchef.com/assets/HomeV2/mealPlans/GlutenFree@1x.a0a8b496.png",urlRetina:"//cdn.greenchef.com/assets/HomeV2/mealPlans/GlutenFree@2x.402a176a.png",urlMobile:"//cdn.greenchef.com/assets/HomeV2/mealPlans/GlutenFree_mobile@1x.3749ad34.png",urlMobileRetina:"//cdn.greenchef.com/assets/HomeV2/mealPlans/GlutenFree_mobile@2x.5c1be939.png",clickEvent:"glutenfreeposter"},lovedMeal:{name:"Tuna Poke Bowl",mealPlan:"Gluten-Free Plan",state:"menus.choice-glutenfree",descriptionShort:"Seared tuna served with sushi rice, seaweed & tamari-orange dressing, plus slaw on the side.",description:"Seared tuna is served over sushi rice, then topped with a tamari-orange dressing for an umami kick. A cabbage slaw tossed with orange and bell pepper adds a fresh, lightly sweet crunch on the side.",mealImages:{desktop:"//cdn.greenchef.com/assets/HomeV2/mostLovedMeals/ML_Tuna-Poke-Bowl@1x.f9c743f9.png",desktopRetina:"//cdn.greenchef.com/assets/HomeV2/mostLovedMeals/ML_Tuna-Poke-Bowl@2x.d3e53ec7.jpg",mobile:"//cdn.greenchef.com/assets/HomeV2/mostLovedMeals/ML_Tuna-Poke-Bowl_mobile@1x.358deeec.png",mobileRetina:"//cdn.greenchef.com/assets/HomeV2/mostLovedMeals/ML_Tuna-Poke-Bowl_mobile@2x.05ee832c.png"},clickEvent:"lovedmealtunapoke"}},menusPage:{summary:"Always gluten-free and flavor-full, with meat, seafood, and vegetarian dinners."},preferencesPage:{overview_mobile:"No gluten, all flavor.",ingredient_mobile:"Meat, seafood & vegetarian dinners.",overview_desktop:"No gluten, all flavor.",ingredient_desktop:"Dinners include: Meat, seafood & vegetarian dishes.",glutenCertified:!0},planActiveDates:{userRegisteredAfterDate:moment.utc("2012-01-01"),planStartDate:moment.utc("2012-01-01"),planEndDate:null}},{internalName:"choice-keto",displayName:"Keto",popularity:1,state:"menus.choice-keto",descriptionShort:"For low-carb diets. Gluten-free or gluten.",description:"Satisfying dinners designed for low-carb lifestyles. Gluten-free.",subtitle:"Choice of 3 keto-friendly dinners",subtitle2:"Meals for low-carb lifestyles.",extendedSubtitle:"For low-carb diets. Meat & seafood + veg sides.",mobileSubtitle:"Meals for low-carb lifestyles.",home:{posterImage:{url:"//cdn.greenchef.com/assets/HomeV2/mealPlans/Keto_@1x.00b1d9f4.png",urlRetina:"//cdn.greenchef.com/assets/HomeV2/mealPlans/Keto_@2x.fcd00e68.png",urlMobile:"//cdn.greenchef.com/assets/HomeV2/mealPlans/Keto_mobile@1x.d271170f.png",urlMobileRetina:"//cdn.greenchef.com/assets/HomeV2/mealPlans/Keto_mobile@2x.a9e068fd.png",clickEvent:"ketoposter"},lovedMeal:{name:"Grilled Pork With Chimichurri",mealPlan:"Keto Plan",state:"menus.choice-keto",descriptionShort:"Cumin-dusted boneless pork chops are grilled alongside bell peppers and onion. Served with grilled avocado and a crispy slaw. Topped with a creamy chimichurri sauce.",description:"Cumin-dusted boneless pork chops are grilled alongside bell peppers and onion. Served with grilled avocado and a crispy slaw. Topped with a creamy chimichurri sauce.",mealImages:{desktop:"//cdn.greenchef.com/assets/HomeV2/mostLovedMeals/ML_Cumin-Pork-Chop@1x.6000c77d.png",desktopRetina:"//cdn.greenchef.com/assets/HomeV2/mostLovedMeals/ML_Cumin-Pork-Chop@2x.99cf62a7.jpg",mobile:"//cdn.greenchef.com/assets/HomeV2/mostLovedMeals/ML_Cumin-Pork-Chop_mobile@1x.44b1e426.png",mobileRetina:"//cdn.greenchef.com/assets/HomeV2/mostLovedMeals/ML_Cumin-Pork-Chop_mobile@2x.d3979602.png"},clickEvent:"lovedmealporkchimichurri"}},menusPage:{summary:"Limit carbs, not flavor. Our most popular, and fastest growing menu features keto-friendly dinners that satisfy every craving."},preferencesPage:{overview_mobile:"For low-carb diets. Gluten-free.",ingredient_mobile:"Meat & seafood mains + veg sides.",overview_desktop:"For low-carb diets. Gluten-free.",ingredient_desktop:"Dinners include: Meat & seafood mains + veggie sides.",glutenCertified:!0},planActiveDates:{userRegisteredAfterDate:moment.utc("2012-01-01"),planStartDate:moment.utc("2012-01-01"),planEndDate:null}},{internalName:"choice-omnivore",displayName:"Omnivore",popularity:5,state:"menus.choice-omnivore",descriptionShort:"Meat, seafood & vegetarian dinners.",description:"This diverse, flexible menu has plenty of choices including meat, seafood, and vegetarian dinners. It’s up to you!",subtitle:"Choice of 3 dinners from a flexible menu",subtitle2:"A balanced, seasonal mix.",extendedSubtitle:"Diverse, customizable meals. Meat, seafood & vegetarian dinners.",mobileSubtitle:"Diverse, customizable meals.",home:{posterImage:{url:"//cdn.greenchef.com/assets/HomeV2/mealPlans/Omnivore_Choice_@1x.f9d05f07.png",urlRetina:"//cdn.greenchef.com/assets/HomeV2/mealPlans/Omnivore_Choice_@2x.7aa9cbea.png",urlMobile:"//cdn.greenchef.com/assets/HomeV2/mealPlans/Omnivore_Choice_mobile@1x.c3d87d2f.png",urlMobileRetina:"//cdn.greenchef.com/assets/HomeV2/mealPlans/Omnivore_Choice_mobile@2x.3af73655.png",clickEvent:"choiceomnivoreposter"},lovedMeal:{name:"Asian Meatball Noodle Bowl",mealPlan:"Omnivore Plan",state:"menus.choice-omnivore",descriptionShort:"Spiced beef meatballs are pan-seared and served over a veggie-rich udon noodle salad. Peanut sauce gives the dish umami flavors and toasted peanuts add a light crunch.",description:"Spiced beef meatballs are pan-seared and served over a veggie-rich udon noodle salad. Peanut sauce gives the dish umami flavors and toasted peanuts add a light crunch.",mealImages:{desktop:"//cdn.greenchef.com/assets/HomeV2/mostLovedMeals/ML_Asian-Meatball-Noodle-Bowl@1x.59e1360e.png",desktopRetina:"//cdn.greenchef.com/assets/HomeV2/mostLovedMeals/ML_Asian-Meatball-Noodle-Bowl@2x.938ef72b.jpg",mobile:"//cdn.greenchef.com/assets/HomeV2/mostLovedMeals/ML_Asian-Meatball-Noodle-Bowl_mobile@1x.e818ca3b.png",mobileRetina:"//cdn.greenchef.com/assets/HomeV2/mostLovedMeals/ML_Asian-Meatball-Noodle-Bowl_mobile@2x.51802f59.png"},clickEvent:"lovedmealasianmeatball"}},menusPage:{summary:"Crave variety? Choose exactly what you want with this diverse, flexible menu — featuring meat, seafood, and vegetarian dinners."},preferencesPage:{overview_mobile:"Diverse, customizable meals.",ingredient_mobile:"Meat, seafood & vegetarian dinners.",overview_desktop:"Diverse, customizable meals.",ingredient_desktop:"Dinners include: Meat, seafood & vegetarian dishes to choose from.",glutenCertified:!1},planActiveDates:{userRegisteredAfterDate:moment.utc("2012-01-01"),planStartDate:moment.utc("2012-01-01"),planEndDate:null}},{internalName:"choice-paleo",displayName:"Paleo",popularity:2,state:"menus.choice-paleo",descriptionShort:"Dinners packed with proteins & produce.",description:"Eat like a fancy caveman. Our paleo menu is rich in proteins & produce.",subtitle:"Choice of 3 protein and produce-rich dinner",subtitle2:"Grain-free dishes, packed with protein and veggies.",extendedSubtitle:"No gluten, grains, dairy, soy. Meat & seafood mains + veg sides.",mobileSubtitle:"No gluten, grains, dairy, soy.",home:{posterImage:{url:"//cdn.greenchef.com/assets/HomeV2/mealPlans/Paleo_@1x.2f8643c7.png",urlRetina:"//cdn.greenchef.com/assets/HomeV2/mealPlans/Paleo_@2x.5a021222.png",urlMobile:"//cdn.greenchef.com/assets/HomeV2/mealPlans/Paleo_mobile@1x.e28b2724.png",urlMobileRetina:"//cdn.greenchef.com/assets/HomeV2/mealPlans/Paleo_mobile@2x.4a37d9c5.png",clickEvent:"paleoposter"},lovedMeal:{name:"Salmon With Red Pepper Sauce",mealPlan:"Paleo Plan",state:"menus.choice-paleo",descriptionShort:"Pan-seared salmon is seasoned with an herb-mustard spice blend. The puttanesca is prepared with green beans, grape tomatoes, Kalamata olives, capers, and garlic. A drizzle of roasted red pepper sauce adds sweet and tangy notes.",description:"Pan-seared salmon is seasoned with an herb-mustard spice blend. The puttanesca is prepared with green beans, grape tomatoes, Kalamata olives, capers, and garlic. A drizzle of roasted red pepper sauce adds sweet and tangy notes.",mealImages:{desktop:"//cdn.greenchef.com/assets/HomeV2/mostLovedMeals/ML_Seared-Herb-Mustard-Salmon@1x.8a8d91b4.png",dekstopRetina:"//cdn.greenchef.com/assets/HomeV2/mostLovedMeals/ML_Seared-Herb-Mustard-Salmon@2x.d52d4ace.jpg",mobile:"//cdn.greenchef.com/assets/HomeV2/mostLovedMeals/ML_Seared-Herb-Mustard-Salmon_mobile@1x.06b66b90.png",mobileRetina:"//cdn.greenchef.com/assets/HomeV2/mostLovedMeals/ML_Seared-Herb-Mustard-Salmon_mobile@2x.e52799c4.png"},clickEvent:"lovedmealsalmonredpepper"}},menusPage:{summary:"Eat like an epicurean caveman with this customer favorite — rich in fresh produce and proteins."},preferencesPage:{overview_mobile:"No gluten, grains, dairy, soy.",ingredient_mobile:"Meat & seafood mains + veg sides.",overview_desktop:"No gluten, grains, dairy, or soy.",ingredient_desktop:"Dinners include: Meat & seafood mains + veggie sides.",glutenCertified:!0},planActiveDates:{userRegisteredAfterDate:moment.utc("2012-01-01"),planStartDate:moment.utc("2012-01-01"),planEndDate:null}},{internalName:"choice-pescatarian",displayName:"Pescatarian",popularity:3,state:"menus.choice-pescatarian",descriptionShort:"Plant-focused meals with a seafood twist.",description:"Enjoy the seasonal, select organic produce of a plant-focused vegetarian diet, with the addition of sustainably sourced fish and seafood.",subtitle:"Choice of 3 Plant-based, fish & seafood dinners",subtitle2:"Plant-focused, with fish and seafood but no meat.",extendedSubtitle:"Plant-focused, with fish and seafood but no meat.",mobileSubtitle:"Fish and seafood but no meat.",home:{posterImage:{url:"//cdn.greenchef.com/assets/HomeV2/mealPlans/Pescatarian@1x.db02c98d.png",urlRetina:"//cdn.greenchef.com/assets/HomeV2/mealPlans/Pescatarian@2x.ac2a8e90.png",urlMobile:"//cdn.greenchef.com/assets/HomeV2/mealPlans/Pescatarian_mobile@1x.aa6c3686.png",urlMobileRetina:"//cdn.greenchef.com/assets/HomeV2/mealPlans/Pescatarian_mobile@2x.bdd5fb7a.png",clickEvent:"pescatarianposter"},lovedMeal:{name:"Apricot-Glazed Salmon",mealPlan:"Pescatarian Plan",state:"menus.choice-pescatarian",descriptionShort:"Seasoned salmon fillets are pan-seared, then coated with apricot jam. Roasted to a flaky finish, the salmon is served over couscous cooked with ginger and onions. A drizzle of Greek yogurt — spiced with cardamom and garlic — adds creamy notes on top.",description:"Seasoned salmon fillets are pan-seared, then coated with apricot jam. Roasted to a flaky finish, the salmon is served over couscous cooked with ginger and onions. A drizzle of Greek yogurt — spiced with cardamom and garlic — adds creamy notes on top.",mealImages:{desktop:"//cdn.greenchef.com/assets/HomeV2/mostLovedMeals/ML_apricot_glazed_salmon@1x.a7495f22.png",desktopRetina:"//cdn.greenchef.com/assets/HomeV2/mostLovedMeals/ML_apricot_glazed_salmon@2x.35b3fe80.png",mobile:"//cdn.greenchef.com/assets/HomeV2/mostLovedMeals/ML_apricot_glazed_salmon_mobile@1x.04b01670.png",mobileRetina:"//cdn.greenchef.com/assets/HomeV2/mostLovedMeals/ML_apricot_glazed_salmon_mobile@2x.17b1f6f2.png"},clickEvent:"lovedmealapricotglazedsalmon"}},menusPage:{summary:"Enjoy the seasonal, select organic produce of a plant-focused vegetarian diet, with the addition of sustainably sourced fish and seafood."},preferencesPage:{overview_mobile:"Plant-focused with a seafood twist.",ingredient_mobile:"Vegetarian, fish, and seafood dishes.",overview_desktop:"Plant-focused meals with a seafood twist.",ingredient_desktop:"Dinners include: Vegetarian, fish, and seafood dishes.",glutenCertified:!1},planActiveDates:{userRegisteredAfterDate:moment.utc("2018-11-03 19"),planStartDate:moment.utc("2018-11-03 19"),planEndDate:null}},{internalName:"vegan",displayName:"Vegan",popularity:4,state:"menus.vegan",descriptionShort:"Plant-based, flavorful dinners.",description:"Plant-based made better. An innovative menu with specialty ingredients.",subtitle:"3 plant-based dinners",subtitle2:"Satisfying, plant-based dishes",extendedSubtitle:"All vegan, no animal products. Plant-based main and side dishes.",mobileSubtitle:"All vegan, no animal products.",home:{posterImage:{url:"//cdn.greenchef.com/assets/HomeV2/mealPlans/Vegan@1x.c2e02424.png",urlRetina:"//cdn.greenchef.com/assets/HomeV2/mealPlans/Vegan@2x.4b0e5935.png",urlMobile:"//cdn.greenchef.com/assets/HomeV2/mealPlans/Vegan_mobile@1x.0e2aeb13.png",urlMobileRetina:"//cdn.greenchef.com/assets/HomeV2/mealPlans/Vegan_mobile@2x.0697f165.png",clickEvent:"veganposter"},lovedMeal:{name:"Tempeh Sloppy Joes",mealPlan:"Vegan Plan",state:"menus.vegan",descriptionShort:"A new American classic. Sloppy Joes made with tempeh simmered in a tomato-based sauce along with walnuts, onions, and bell pepper. Served with quick-pickled red cabbage, roasted potatoes, and a vegan basil aϊoli.",description:"A new American classic. Sloppy Joes made with tempeh simmered in a tomato-based sauce along with walnuts, onions, and bell pepper. Served with quick-pickled red cabbage, roasted potatoes, and a vegan basil aϊoli.",mealImages:{desktop:"//cdn.greenchef.com/assets/HomeV2/mostLovedMeals/ML_Tempeh-Sloppy-Joes@1x.d6940f2f.png",desktopRetina:"//cdn.greenchef.com/assets/HomeV2/mostLovedMeals/ML_Tempeh-Sloppy-Joes@2x.b0f6eb92.jpg",mobile:"//cdn.greenchef.com/assets/HomeV2/mostLovedMeals/ML_Tempeh-Sloppy-Joes_mobile@1x.1f2e9ccc.png",mobileRetina:"//cdn.greenchef.com/assets/HomeV2/mostLovedMeals/ML_Tempeh-Sloppy-Joes_mobile@2x.23668e4e.png"},clickEvent:"lovedmealtempehsloppyjoe"}},menusPage:{summary:"You haven’t had plant-based like this. Our innovative menu offers a new take on vegan with natural, specialty ingredients."},preferencesPage:{overview_mobile:"All vegan, no animal products.",ingredient_mobile:"Plant-based main and side dishes.",overview_desktop:"All vegan, no animal products.",ingredient_desktop:"Dinners include: Plant-based main and side dishes.",glutenCertified:!1},planActiveDates:{userRegisteredAfterDate:moment.utc("2012-01-01"),planStartDate:moment.utc("2012-01-01"),planEndDate:null}},{internalName:"choice-vegetarian",displayName:"Vegetarian",popularity:6,state:"menus.choice-vegetarian",descriptionShort:"Unique, delicious vegetarian dinners.",description:"Every dinner makes veggies the star in unique, delicious ways.",subtitle:"Choice of 3 dinners, showcasing veggies",subtitle2:"Diverse, nutrient-rich dishes.",extendedSubtitle:"Plenty of vegetables. Vegetarian main and side dishes.",mobileSubtitle:"Plenty of vegetables.",home:{posterImage:{url:"//cdn.greenchef.com/assets/HomeV2/mealPlans/Vegetarian@1x.e646bece.png",urlRetina:"//cdn.greenchef.com/assets/HomeV2/mealPlans/Vegetarian@2x.75400fc1.png",urlMobile:"//cdn.greenchef.com/assets/HomeV2/mealPlans/Vegetarian_mobile@1x.ed6d5dbe.png",urlMobileRetina:"//cdn.greenchef.com/assets/HomeV2/mealPlans/Vegetarian_mobile@2x.276f3c4c.png",clickEvent:"vegetarianposter"},lovedMeal:{name:'Sriracha Cauliflower "Wings"',mealPlan:"Vegetarian Plan",state:"menus.choice-vegetarian",descriptionShort:"Buffalo wings are made with cauliflower florets coated in a spicy Sriracha-tamari sauce and cumin-spiced flour. It’s all baked until crispy, then served with sweet potato fries and a crisp slaw.",description:"Buffalo wings are made with cauliflower florets coated in a spicy Sriracha-tamari sauce and cumin-spiced flour. It’s all baked until crispy, then served with sweet potato fries and a crisp slaw.",mealImages:{desktop:"//cdn.greenchef.com/assets/HomeV2/mostLovedMeals/ML_Cauliflower-Bites@1x.d1cf45b4.png",desktopRetina:"//cdn.greenchef.com/assets/HomeV2/mostLovedMeals/ML_Cauliflower-Bites@2x.17e4f280.jpg",mobile:"//cdn.greenchef.com/assets/HomeV2/mostLovedMeals/ML_Cauliflower-Bites_mobile@1x.af88b4c4.png",mobileRetina:"//cdn.greenchef.com/assets/HomeV2/mostLovedMeals/ML_Cauliflower-Bites_mobile@2x.550d5e04.png"},clickEvent:"lovedmealsrirachacauliflowerwings"}},menusPage:{summary:"More than just salads. Every dinner makes veggies the star in unique, delicious ways."},preferencesPage:{overview_mobile:"Plenty of vegetables.",ingredient_mobile:"Vegetarian main and side dishes.",overview_desktop:"Plenty of vegetables.",ingredient_desktop:"Dinners include: Vegetarian main and side dishes.",glutenCertified:!1},planActiveDates:{userRegisteredAfterDate:moment.utc("2012-01-01"),planStartDate:moment.utc("2012-01-01"),planEndDate:null}},{internalName:"family-meat",displayName:"Carnivore",popularity:10,state:"menus.family-meat",descriptionShort:"Meat & seafood dinners with veggies.",description:"Meat & seafood dinners served with veggies, for parents & kids alike.",subtitle:"2 meat or seafood dinners for 4  people",subtitle2:"Nourishing meals by land and by sea.",extendedSubtitle:"Customizable animal proteins. Meat & seafood mains + veg sides.",mobileSubtitle:"Customizable animal proteins.",home:{posterImage:{url:"//cdn.greenchef.com/assets/HomeV2/mealPlans/family-carnivore@1x.3f180d89.png",urlRetina:"//cdn.greenchef.com/assets/HomeV2/mealPlans/family-carnivore@2x.1aad8c5b.png",urlMobile:"//cdn.greenchef.com/assets/HomeV2/mealPlans/family-carnivore_mobile@1x.fda6e8eb.png",urlMobileRetina:"//cdn.greenchef.com/assets/HomeV2/mealPlans/family-carnivore_mobile@2x.ea0e3dff.png",clickEvent:"familycarnivoreposter"}},menusPage:{summary:"Meat and seafood lovers, dig in. Every dinner includes a land or sea protein plus veggies."},preferencesPage:{},planActiveDates:{userRegisteredAfterDate:moment.utc("2012-01-01"),planStartDate:moment.utc("2012-01-01"),planEndDate:null}},{internalName:"family-omnivore",displayName:"Omnivore",popularity:9,state:"menus.family-omnivore",descriptionShort:"Meat, seafood & vegetarian dinners.",description:"A variety of meat, seafood & vegetarian dinners for parents & kids.",subtitle:"2 veggie, meat or seafood dinners for 4  people",subtitle2:"A balanced, seasonal mix.",extendedSubtitle:"Diverse, customizable meals. Meat, seafood & vegetarian dinners.",mobileSubtitle:"Diverse, customizable meals.",home:{posterImage:{url:"//cdn.greenchef.com/assets/HomeV2/mealPlans/family-omnivore@1x.4d471d21.png",urlRetina:"//cdn.greenchef.com/assets/HomeV2/mealPlans/family-omnivore@2x.3e8025f7.png",urlMobile:"//cdn.greenchef.com/assets/HomeV2/mealPlans/family-omnivore_mobile@1x.1c8fb9d0.png",urlMobileRetina:"//cdn.greenchef.com/assets/HomeV2/mealPlans/family-omnivore_mobile@2x.26951821.png",clickEvent:"familyomnivoreposter"}},menusPage:{summary:"Crave variety? This diverse, flexible menu has meat, seafood, and vegetarian dinners."},preferencesPage:{},planActiveDates:{userRegisteredAfterDate:moment.utc("2012-01-01"),planStartDate:moment.utc("2012-01-01"),planEndDate:null}}])
}(),angular.module("greenchef").factory("ConversionTracking",function(){function e(e,n,t,r,a,o){function i(){return o.getParams().utm_source}function s(){return o.getParams().cjevent}return{trackDoneSignup:function(){function n(n,t,o,s,l){var c=n.testVersion,u=n.orderTotal,d=n.couponCode,p=t.numPeople,m=t.mealPreference,g=l.numBoxes,f=l.numServings,h=l.pricePerServing,v=l.planId;e.gtmDataLayer.push({event:"DoneSignUp","SignUp.TestVersion":c,"SignUp.InvoiceTotal":u,"SignUp.NumPeople":p,"SignUp.CouponCode":d,"SignUp.ContentIds":[v],"SignUp.Contents":[{content_id:m,quantity:g*f,item_Price:h}],"SignUp.UserId":o,"SignUp.cjEventId":r.getCookie("CJEvent"),"SignUp.Email":s,"SignUp.HashedEmail":a.createHash(s),"SignUp.MealType":m,"SignUp.UtmSource":i()||""})}return n}(),trackAddPaymentInfo:function(){function n(n,t){var r=n.orderTotal,a=t.planId;e.gtmDataLayer.push({"SignUp.InvoiceTotal":r,"SignUp.ContentIds":[a]})}return n}(),trackSubscribeToEmail:function(){function n(){e.gtmDataLayer.push({event:"SubscribeToEmail","EmailSubscribe.AdxcelClickId":o.getParams().adxcel_clickid})}return n}(),trackSessionStart:function(){function a(){var a=s()||"";""!==a&&r.setCookie("CJEvent",s(),14),e.gtmDataLayer.push({event:"StartSession","Session.TestVersion":t.getVersion(),"Session.UrlPath":n.path(),"Session.UtmSource":i()||"","Session.CJEvent":a,"Session.Referrer":document.referrer?document.referrer.substr(0,2048):""})}return a}(),trackAccountManagementVisit:function(){function n(n){var t="";n&&n.customerType&&(t=n.customerType),e.gtmDataLayer.push({event:"AccountMgmtVisit","Account.CustomerType":t})}return n}(),trackProductPageVisit:function(){function n(n){var t="",r="",a="",o="",i=0,s="",l=0;n&&(r=n.name,a="product",o=n.name,i=n.totalCost,s=n.planId,l=n.quantity),e.gtmDataLayer.push({event:"ProductPageView","Product.ContentId":s,"Product.ContentName":r,"Product.ContentType":a,"Product.TotalCost":i,"Product.Contents":{content_id:t,quantity:l,item_price:i},"Product.ContentCategory":o})}return n}(),trackProductRecipeVisit:function(){function n(n){e.gtmDataLayer.push({event:"RecipeView","Product.ContentIds":[n._id],"Product.ContentType":"product"})}return n}(),trackDoneWelcome:function(){function n(){e.gtmDataLayer.push({event:"DoneWelcome"})}return n}(),trackDoneEmailZipCapture:function(){function n(n,t,o,i){e.gtmDataLayer.push({event:"DoneEmailZipCapture","SignUp.UserId":n,"SignUp.HashedEmail":a.createHash(o),"SignUp.CouponCode":t,"SignUp.cjEventId":r.getCookie("CJEvent"),"SignUp.ZipCode":i,"SignUp.Email":o})}return n}(),trackDonePreference:function(){function n(n,t,r){var a=r.numBoxes,o=r.numServings,i=r.pricePerServing,s=r.planId,l=a*o;e.gtmDataLayer.push({event:"DonePreference","SignUp.MealType":t,"SignUp.InvoiceTotal":n,"SignUp.ContentIds":[s],"Signup.Quantity":l,"SignUp.ItemPrice":i})}return n}(),trackDoneShipping:function(){function n(n){var t=n.firstName,r=n.lastName,a=n.phoneNumber,o=n.city,i=n.state;e.gtmDataLayer.push({event:"DoneShipping","SignUp.FirstName":t.toLowerCase(),"SignUp.LastName":r.toLowerCase(),"SignUp.PhoneNumber":a,"SignUp.City":o.toLowerCase(),"SignUp.State":i.toLowerCase()})}return n}()}}return e.$inject=["$window","$location","ABTest","CookieService","md5","URLParam"],e}()),angular.module("greenchef").factory("CookieService",function(){return{getCookie:function(){function e(e){var n="; "+document.cookie,t=n.split("; "+e+"=");return 2===t.length?t.pop().split(";").shift():void 0}return e}(),setCookie:function(){function e(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:!1;t=t||1;var a=new Date;a.setTime(a.getTime()+24*t*60*60*1e3);var o="; expires="+a.toUTCString(),i=r?"; secure":"";return document.cookie=e+"="+n+o+i+"; path=/"}return e}(),deleteCookie:function(){function e(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT; secure; path=/"}return e}()}}),angular.module("greenchef.custom-errors",[]).factory("CustomErrors",CustomErrors),angular.module("greenchef.debug-panel",[]).directive("gcDebugPanel",function(){return{restrict:"E",templateUrl:"shared/debug-panel.tpl.html",controller:function(){function e(e,n,t,r,a,o,i,s,l,c,u,d){function p(e){var t=l.getVersionFromCookie(e);t?n.cookieTests[e]=t:delete n.cookieTests[e]}var m=[c.sp35.testId,u.testId,d.testId];n.enableDebugPanel=!1,n.showDebugPanel=!1,n.enableDebugPanel&&(n.togglePanel=function(){n.showDebugPanel=!n.showDebugPanel,n.showDebugPanel?(angular.element(document.body).addClass("debugging"),n.update()):angular.element(document.body).removeClass("debugging")},n.update=function(){a.isAuthenticated()?r.all("user").customGET("debugProfile").then(function(e){n.user=e}):n.user={},n.urlParams=i.getParams(),n.cookieTests={},angular.forEach(m,function(e){p(e)})},n.hasCookieTests=function(){return"{}"!==JSON.stringify(n.cookieTests)},n.clearCookies=function(){angular.forEach(m,function(e){l.removeVersionFromCookie(e)}),n.update()},n.update(),e.$on("$locationChangeStart",function(){n.update()}),n.recentEvents=[],e.$on(s.logged,function(e,t){n.recentEvents.unshift(t),n.recentEvents.length>50&&n.recentEvents.pop()}))}return e.$inject=["$rootScope","$scope","$timeout","GreenchefAPI","AuthService","SIGNUP_STATE","URLParam","TRACKER_EVENTS","ABTest","AB_TESTVERSION_SPLIT","AB_HOME_SP57","AB_HOME_TV89"],e}(),link:function(){function e(){}return e}()}}),angular.module("greenchef").directive("fbComments",["$location","$document","tracker",function(e,n,t){return{restrict:"A",link:function(){function r(r,a){var o=e.protocol()+"://greenchef.com"+e.path();a[0].dataset.href=o,"undefined"!=typeof FB&&FB&&FB.XFBML.parse(a.parent()[0]),n.ready(function(){FB.Event.subscribe("comment.create",function(){t.click("recipecomment")})})}return r}()}}]),angular.module("greenchef.format",[]).factory("FormatUtils",function(){function e(){return{capitalizeFirst:function(){function e(e){return e?e.charAt(0).toUpperCase()+e.substr(1).toLowerCase():""}return e}(),formatBoxNum:function(){function e(e){return e>1?e+" boxes per week":e+" box per week"}return e}(),formatWeekNum:function(){function e(e){return e>1?e+" weeks":"week"}return e}(),formatBoxNumOnly:function(){function e(e){return e>1?e+" boxes":e+" box"}return e}(),addDays:function(){function e(e,n){return moment(e).add(n,"days").format("YYYY-MM-DD")}return e}()}}return e}()).filter("formatBoxNum",["FormatUtils",function(e){return e.formatBoxNum.bind(e)}]).filter("formatBoxNumOnly",["FormatUtils",function(e){return e.formatBoxNumOnly.bind(e)}]).filter("formatWeekNum",["FormatUtils",function(e){return e.formatWeekNum.bind(e)}]).filter("capitalizeFirst",["FormatUtils",function(e){return e.capitalizeFirst.bind(e)}]).filter("addDays",["FormatUtils",function(e){return e.addDays.bind(e)}]),angular.module("greenchef.google-360-service",[]).factory("Google360Service",["$window",function(e){function n(n,t,r){var a={event:"gaEventTrigger",gaEventCategory:n,gaEventAction:t,gaEventLabel:r,gaEventNonInteraction:!1};e.gtmDataLayer.push(a)}return{trackEvent:n}}]),angular.module("greenchef.home-data-service",[]).factory("HomeDataService",function(){function e(){return[{name:"Brian Caswell",twitterHandle:"@doctorcaz",profileImage:"//cdn.greenchef.com/assets/HomeV2/authors/brian-caswell@1x.ec9d46b5.png",profileImageRetina:"//cdn.greenchef.com/assets/HomeV2/authors/brian-caswell@2x.b828d746.png",tweet:"I've tried all the meal delivery services; I only recommend @GreenChef to my patients."},{name:"Mrs. Angela Green",twitterHandle:"@LovelySplendor",profileImage:"//cdn.greenchef.com/assets/HomeV2/authors/mrs-angela-green@1x.df151525.png",profileImageRetina:"//cdn.greenchef.com/assets/HomeV2/authors/mrs-angela-green@2x.d366569a.png",tweet:"I'm kind of obsessed with @greenchef. Delicious vegan food (they gave other options) and no more waste!"},{name:"Elizabeth A. Denton",twitterHandle:"@TinLizzieBikes",profileImage:"//cdn.greenchef.com/assets/HomeV2/authors/elizabeth-a-denton@1x.926218fd.png",profileImageRetina:"//cdn.greenchef.com/assets/HomeV2/authors/elizabeth-a-denton@2x.30fa6e23.png",tweet:"Seriously, why would I want to eat in a restaurant when my #vegetarian #vegan meals from @greenchef are so inventive, varied & delicous?!?"},{name:"Erik Weber",twitterHandle:"@erikweber",profileImage:"//cdn.greenchef.com/assets/HomeV2/authors/erik-weber@1x.b3c2e324.png",profileImageRetina:"//cdn.greenchef.com/assets/HomeV2/authors/erik-weber@2x.cb4911f8.png",tweet:"I love my @greenchef. Finally got me cooking good meals, 3 times a week, without wasting a bunch of food. I'm all in."}]}function n(){return["carnivore","gluten-free","omnivore","paleo","vegetarian","vegan"]}function t(){return[{name:"Choose",description:"Choose from our wide variety of deliciously clean meal plans at manageable prices, with options to feed two people or a family of four. Simply pick your subscription plan and delivery day. You’ll get convenient weekly deliveries right to your door.",url:"//cdn.greenchef.com/assets/HomeV2/stepsAway/easy@1x.1f1ea22a.png",urlRetina:"//cdn.greenchef.com/assets/HomeV2/stepsAway/easy@2x.7adef15c.png",urlMobile:"//cdn.greenchef.com/assets/HomeV2/stepsAway/easy_mobile@1x.13c4d8de.png",urlMobileRetina:"//cdn.greenchef.com/assets/HomeV2/stepsAway/easy_mobile@2x.17b2b4a4.png"},{name:"Cook",description:"Our premium ingredients come pre-measured and prepped, saving you time. All you have to do is follow easy step-by-step instructions with photos. Cook dinner in about 30 minutes.",url:"//cdn.greenchef.com/assets/HomeV2/stepsAway/convenient@1x.55c8a62e.png",urlRetina:"//cdn.greenchef.com/assets/HomeV2/stepsAway/convenient@2x.2f89fd5f.png",urlMobile:"//cdn.greenchef.com/assets/HomeV2/stepsAway/convenient_mobile@1x.f6492ec1.png",urlMobileRetina:"//cdn.greenchef.com/assets/HomeV2/stepsAway/convenient_mobile@2x.7f1e0620.png"},{name:"Enjoy",description:"Go ahead, pat yourself on the back. You’ll be amazed by the tasty, restaurant-worthy meal you cooked. With new recipes every week, Green Chef gives you deliciously unexpected culinary experiences in your own kitchen.",url:"//cdn.greenchef.com/assets/HomeV2/stepsAway/delicious@1x.4a5d648d.png",urlRetina:"//cdn.greenchef.com/assets/HomeV2/stepsAway/delicious@2x.4be3903d.png",urlMobile:"//cdn.greenchef.com/assets/HomeV2/stepsAway/delicious_mobile@1x.bdf58b70.png",urlMobileRetina:"//cdn.greenchef.com/assets/HomeV2/stepsAway/delicious_mobile@2x.206ad00d.png"}]}function r(){return[{text:"We're your sous chef. Ingredients come pre-portioned, pre-measured, and prepped."},{text:"Recipes are quick and easy, with step-by-step instructions, chef's tips, and photos."},{text:"You don't just get dinner in about 30 minutes, you get your time back."},{text:"No grocery shopping. No meal planning. No guesswork. No problem!"}]}function a(){return[{name:"ellen",url:"//cdn.greenchef.com/assets/HomeV2/partners/ellen@1x.5f1c5703.png",urlRetina:"//cdn.greenchef.com/assets/HomeV2/partners/ellen@2x.3601f53f.png",urlMobile:"//cdn.greenchef.com/assets/HomeV2/partners/ellen_mobile@1x.ba1b4a1a.png",urlMobileRetina:"//cdn.greenchef.com/assets/HomeV2/partners/ellen_mobile@2x.ff5eddf3.png"},{name:"vogue",url:"//cdn.greenchef.com/assets/HomeV2/partners/vogue@1x.0ccea5cb.png",urlRetina:"//cdn.greenchef.com/assets/HomeV2/partners/vogue@2x.cde8461e.png",urlMobile:"//cdn.greenchef.com/assets/HomeV2/partners/vogue_mobile@1x.02a35f66.png",urlMobileRetina:"//cdn.greenchef.com/assets/HomeV2/partners/vogue_mobile@2x.73dbdd27.png"},{name:"realsimple",url:"//cdn.greenchef.com/assets/HomeV2/partners/real-simple@1x.dd951dce.png",urlRetina:"//cdn.greenchef.com/assets/HomeV2/partners/real-simple@2x.6f07764c.png",urlMobile:"//cdn.greenchef.com/assets/HomeV2/partners/real-simple_mobile@1x.74903286.png",urlMobileRetina:"//cdn.greenchef.com/assets/HomeV2/partners/real-simple_mobile@2x.90055913.png"},{name:"parents",url:"//cdn.greenchef.com/assets/HomeV2/partners/parents@1x.7c1cc667.png",urlRetina:"//cdn.greenchef.com/assets/HomeV2/partners/parents@2x.91f6dba9.png",urlMobile:"//cdn.greenchef.com/assets/HomeV2/partners/parents_mobile@1x.7de37152.png",urlMobileRetina:"//cdn.greenchef.com/assets/HomeV2/partners/parents_mobile@2x.9d78cfa1.png"},{name:"people",url:"//cdn.greenchef.com/assets/HomeV2/partners/people@1x.c1b17f7c.png",urlRetina:"//cdn.greenchef.com/assets/HomeV2/partners/people@2x.7edac2c0.png",urlMobile:"//cdn.greenchef.com/assets/HomeV2/partners/people_mobile@1x.e10ee5ec.png",urlMobileRetina:"//cdn.greenchef.com/assets/HomeV2/partners/people_mobile@2x.7b38920b.png"},{name:"forbes",url:"//cdn.greenchef.com/assets/HomeV2/partners/forbes@1x.d166e49d.png",urlRetina:"//cdn.greenchef.com/assets/HomeV2/partners/forbes@2x.69bb70ae.png",urlMobile:"//cdn.greenchef.com/assets/HomeV2/partners/forbes_mobile@1x.442315f1.png",urlMobileRetina:"//cdn.greenchef.com/assets/HomeV2/partners/forbes_mobile@2x.8cedcfdc.png"},{name:"buzzfeed",url:"//cdn.greenchef.com/assets/HomeV2/partners/buzz-feed@1x.c8adc78e.png",urlRetina:"//cdn.greenchef.com/assets/HomeV2/partners/buzz-feed@2x.84b779d1.png",urlMobile:"//cdn.greenchef.com/assets/HomeV2/partners/buzz-feed_mobile@1x.ba04662d.png",urlMobileRetina:"//cdn.greenchef.com/assets/HomeV2/partners/buzz-feed_mobile@2x.5f9ea2ea.png"},{name:"self",url:"//cdn.greenchef.com/assets/HomeV2/partners/self@1x.24eceb05.png",urlRetina:"//cdn.greenchef.com/assets/HomeV2/partners/self@2x.1bdaab38.png",urlMobile:"//cdn.greenchef.com/assets/HomeV2/partners/self_mobile@1x.87739ff7.png",urlMobileRetina:"//cdn.greenchef.com/assets/HomeV2/partners/self_mobile@2x.54c2caf5.png"},{name:"mashable",url:"//cdn.greenchef.com/assets/HomeV2/partners/mashable@1x.fa5aa7f1.png",urlRetina:"//cdn.greenchef.com/assets/HomeV2/partners/mashable@2x.dc023e28.png",urlMobile:"//cdn.greenchef.com/assets/HomeV2/partners/mashable_mobile@1x.834e85f0.png",urlMobileRetina:"//cdn.greenchef.com/assets/HomeV2/partners/mashable_mobile@2x.1229bb6e.png"}]}function o(){return[{plan:"Omnivore",name:"Chicken Bruschetta Pasta",descDesk:"Al-dente capellini pasta tossed in lemon-basil pesto and baby spinach. Topped with roasted chicken, balsamic tomatoes, and creamy goat cheese.",descMobile:"Pasta tossed in lemon-basil pesto & baby spinach. Topped with chicken & creamy goat cheese.",quote:"Super easy. I learned new techniques that I have already used again. The toasted bread crumbs took it to a new level of deliciousness.",author:"Gina D.",urlThumb:""},{plan:"Carnivore",name:"Tuna Poke Bowl",descDesk:"Seared tuna served over sushi rice, then topped with seaweed and tamari-orange dressing for umami flavor. Bok choy slaw makes a crisp side.",descMobile:"Seared tuna served with sushi rice, seaweed & tamari-orange dressing, plus slaw on the side.",quote:"Again, a just fantastic mix of flavors and the tuna was of excellent quality.",author:"Pamela P.",urlThumb:""},{plan:"Gluten-Free",name:"Cumin Spiced Steak",descDesk:"Cumin-seasoned steak served over an arugula and fig salad. Cheesy potatoes with fontina and savory corn flakes create a creamy-crunchy side.",descMobile:"Cumin-seasoned steak served with an arugula & fig salad, plus creamy, cheesy potatoes.",quote:"The quality of the meat was very good and we loved the potato recipe!",author:"Michelle K.",urlThumb:""},{plan:"Vegetarian",name:"Enchilada Quesadilla",descDesk:"Crisp tortillas filled with melty cheese, veggies, and pinto beans, spiced with a paprika blend. Served over herbaceous cilantro-scallion rice.",descMobile:"Crisp tortillas filled with cheese, veggies & beans, served over cilantro-scallion rice.",quote:"VERY flavorful with a good mix of cool and spice and a nice combination of textures.",author:"Margaret F.",urlThumb:""},{plan:"Vegan",name:"Vietnamese Noodle Bowl",descDesk:"A rice noodle bowl topped with tofu and peanuts sautéed in green curry pesto, plus cucumber slaw dressed with mint, lime, and bun bo xao sauce.",descMobile:"Rice noodles topped with tofu & peanuts sautéed in green curry pesto, plus cucumber slaw.",quote:"Wow, simply delicious, visually appealing, right amount of heat and sweet. Brilliant!",author:"Ginger M.",urlThumb:""},{plan:"Paleo",name:"Steak Frites",descDesk:"Seared steaks topped with mushrooms and onions caramelized in paleo Worcestershire sauce. Celery root fries and a mixed green salad balance the dish.",descMobile:"Seared steaks topped with caramelized mushrooms & onions, served with celery root fries.",quote:"Very tasty and I've never tried celeriac fries before. A lovely taste combination.",author:"Joanna T.",urlThumb:""},{plan:"Family",name:"Greek Chicken Flatbread",descDesk:"Flatbread pizza made with naan, hummus, chicken, kalamata olives, and feta cheese. Quinoa, spinach, and sun-dried tomato salad completes the meal.",descMobile:"Flatbread pizza made with naan, hummus, chicken, olives & feta cheese, plus spinach salad.",quote:"The recipe's instructions were simple, quick prep and extremely flavorful!",author:"Jorie H.",urlThumb:""}]}return{getCommunityPosts:e,getDiets:n,getDinnerSteps:t,getEasyPeasy:r,getPressLogos:a,getRecipes:o}}),angular.module("greenchef.homeve2-owl-carousel-service",[]).factory("HomeV2OwlCarouselService",function(){function e(e){if(_.isEmpty(e.id))return console.log("need to provide dom id for owl carousel"),void 0;var n={itemsSmall:2,itemsMedium:3,itemsLarge:4};e=_.defaults(e,n),$(e.id).owlCarousel({loop:!1,margin:24,nav:!0,responsiveClass:!0,responsive:{0:{items:e.itemsSmall,nav:!0},600:{items:e.itemsMedium,nav:!1},1e3:{items:e.itemsLarge,nav:!0}}})}return{initOwl:e}}),angular.module("greenchef.ipgeo",[]).factory("IPGeoService",function(){function e(e,n,t){var r=null,a=null;return{getData:function(){function e(){if(a)return a.promise;a=t.defer();var e="//ipinfo.io/json?token="+ipInfoKey;return n.get(e).success(function(e){r=e,a.resolve(r)}),a.promise}return e}(),clearCache:function(){function e(){r=null}return e}()}}return e.$inject=["$rootScope","$http","$q"],e}()),angular.module("greenchef").directive("loadingState",function(){return{restrict:"E",scope:{text:"@"},templateUrl:"shared/loading-state.tpl.html"}}),angular.module("greenchef").factory("Lookups",function(){return{states:[{name:"Alabama",postalCode:"AL"},{name:"Alaska",postalCode:"AK"},{name:"Arizona",postalCode:"AZ"},{name:"Arkansas",postalCode:"AR"},{name:"California",postalCode:"CA"},{name:"Colorado",postalCode:"CO"},{name:"Connecticut",postalCode:"CT"},{name:"Delaware",postalCode:"DE"},{name:"District of Columbia",postalCode:"DC"},{name:"Florida",postalCode:"FL"},{name:"Georgia",postalCode:"GA"},{name:"Hawaii",postalCode:"HI"},{name:"Idaho",postalCode:"ID"},{name:"Illinois",postalCode:"IL"},{name:"Indiana",postalCode:"IN"},{name:"Iowa",postalCode:"IA"},{name:"Kansas",postalCode:"KS"},{name:"Kentucky",postalCode:"KY"},{name:"Louisiana",postalCode:"LA"},{name:"Maine",postalCode:"ME"},{name:"Maryland",postalCode:"MD"},{name:"Massachusetts",postalCode:"MA"},{name:"Michigan",postalCode:"MI"},{name:"Minnesota",postalCode:"MN"},{name:"Mississippi",postalCode:"MS"},{name:"Missouri",postalCode:"MO"},{name:"Montana",postalCode:"MT"},{name:"Nebraska",postalCode:"NE"},{name:"Nevada",postalCode:"NV"},{name:"New Hampshire",postalCode:"NH"},{name:"New Jersey",postalCode:"NJ"},{name:"New Mexico",postalCode:"NM"},{name:"New York",postalCode:"NY"},{name:"North Carolina ",postalCode:"NC"},{name:"North Dakota",postalCode:"ND"},{name:"Ohio",postalCode:"OH"},{name:"Oklahoma",postalCode:"OK"},{name:"Oregon",postalCode:"OR"},{name:"Pennsylvania",postalCode:"PA"},{name:"Puerto Rico",postalCode:"PR"},{name:"Rhode Island",postalCode:"RI"},{name:"South Carolina",postalCode:"SC"},{name:"South Dakota",postalCode:"SD"},{name:"Tennessee",postalCode:"TN"},{name:"Texas",postalCode:"TX"},{name:"Utah",postalCode:"UT"},{name:"Vermont",postalCode:"VT"},{name:"Virginia",postalCode:"VA"},{name:"Washington",postalCode:"WA"},{name:"West Virginia",postalCode:"WV"},{name:"Wisconsin",postalCode:"WI"},{name:"Wyoming",postalCode:"WY"}]}}),angular.module("greenchef").directive("ngMarkdown",["$window",function(e){return{restrict:"AE",scope:{markdownData:"="},link:function(){function n(n,t){var r=e.markdownit(),a=r.render(n.markdownData||"");t.html(a)}return n}()}}]),angular.module("gc-ng-match",[]).directive("gcNgMatch",["$parse",matchDirective]),angular.module("greenchef.menu-services",[]).constant("MENU_EVENTS",{menuUpdated:"menu-updated"}).constant("MEAL_SERVICE",{omnivore:"omnivore",carnivore:"carnivore",vegetarian:"vegetarian",vegan:"vegan",glutenFree:"gluten-free",paleo:"paleo"}).constant("INDICATOR_DESC",{organic:"All Green Chef recipes contain organic ingredients. See your order for detailed information.",vegetarian:"This recipe is vegetarian",meat:"This recipe contains meat",express:"This recipe is designed to be cooked in 20 minutes or less","gluten-free":"This recipe is gluten-free",paleo:"This recipe is from our paleo menu",vegan:"This recipe is vegan"}).constant("INDICATOR_DISPLAY_TEXT",{meat:"carnivore"}).constant("MENU_FAVORITES_FROM_THE_PAST",{vegan:[{name:"Vegan Crab Cakes",isPublished:!0,mealIntro:"Tempeh cakes & basil-lemon aïoli, arugula slaw",recipeVanity:"vegan-tempeh-crab-cakes-with-basil-aioli-blistered-tomatoes-and",thumbnailImageUrl:"//cdn2.greenchef.com/uploaded/5750af30cb842bf053d05495.jpg"},{name:"Pesto Pasta Primavera",isPublished:!0,mealIntro:"Spring veggies, arugula pesto, artichoke gremolata",recipeVanity:"vegan-linguine-primavera-with-arugula-herb-pesto",thumbnailImageUrl:"//cdn2.greenchef.com/uploaded/573f415392410f2d1586be39.jpg"},{name:"Moroccan Cauliflower",isPublished:!0,mealIntro:"Turmeric, chickpeas, smoky quinoa & spinach",recipeVanity:"vegan-turmeric-roasted-cauliflower",thumbnailImageUrl:"//cdn2.greenchef.com/uploaded/573f40f192410f2d1586be37.jpg"}],vegetarian:[{name:"Mongolian Tofu",isPublished:!0,mealIntro:"Bok choy, mushrooms, snap peas & jasmine rice",recipeVanity:"mongolian-tofu-with-spring-veggie-rice-baby-bok-choy-and",thumbnailImageUrl:"//cdn2.greenchef.com/uploaded/57f289d854ea20a560faac33.jpg"},{name:"Spaghetti Squash Pasta",isPublished:!0,mealIntro:"Kale, mushrooms, sautéed onion & sun-dried tomato",recipeVanity:"kale-and-cremini-mushroom-spaghetti-squash-with-basil-pesto-crostini",thumbnailImageUrl:"//cdn2.greenchef.com/uploaded/568f05d936ade90853c5573b.png"},{name:"Roasted Rainbow Carrots",isPublished:!0,mealIntro:"Barley & chard, chickpeas, artichoke gremolata",recipeVanity:"roasted-carrots-with-barley-and-artichoke-gremolata",thumbnailImageUrl:"//cdn2.greenchef.com/uploaded/57e2f6ece1e9800a3f35a3e1.jpg"}],"gluten-free":[{name:"Vietnamese Shrimp Bowl",isPublished:!0,mealIntro:"Rice noodles, fresh veggies, Thai basil & mint",recipeVanity:"gf-vietnamese-shrimp-noodle-bowl",thumbnailImageUrl:"//cdn2.greenchef.com/uploaded/56be0616213c0bc63cff1715.jpg"},{name:"Cumin-Spiced Steak",isPublished:!0,mealIntro:"Cheesy potatoes, arugula & fig salad",recipeVanity:"gf-cumin-spiced-flat-iron-steak-with-cheesy-potatoes-and-arugula",thumbnailImageUrl:"//cdn2.greenchef.com/uploaded/56b4d111a67636886206c9e6.jpg"},{name:"Saag Halloumi",isPublished:!0,mealIntro:"Curried spinach, rice, mango-coconut chutney",recipeVanity:"curried-halloumi-with-saag-basmati-rice-and-mango-chutney",thumbnailImageUrl:"//cdn2.greenchef.com/uploaded/5750af0ae89f975104c1fe8b.jpg"}],paleo:[{name:"Shrimp Scampi",isPublished:!0,mealIntro:"Grain-free fettuccine & Brussels sprouts, salad",recipeVanity:"paleo-shrimp-scampi",thumbnailImageUrl:"//cdn2.greenchef.com/uploaded/56e31342c323d48307223827.jpg"},{name:"Steak Frites",isPublished:!0,mealIntro:"House salad, onions & mushrooms, celery root fries",recipeVanity:"paleo-steak-frites",thumbnailImageUrl:"//cdn2.greenchef.com/uploaded/57f28bf254ea20a560faac39.jpg"},{name:"Sage Pesto Baked Cod",isPublished:!0,mealIntro:"Butternut squash mash, green beans & shallot",recipeVanity:"paleo-cod-with-sage-pesto-creamy-butternut-squash-and-green",thumbnailImageUrl:"//cdn2.greenchef.com/uploaded/56be06a0b7fc770e0c116b49.jpg"}],omnivore:[{name:"Pink Peppercorn Salmon",isPublished:!0,recipeVanity:"pink-peppercorn-crusted-salmon-with-herb-roasted-baby-potatoes",mealIntro:"Roasted purple potatoes & cucumber salad",thumbnailImageUrl:"//cdn2.greenchef.com/uploaded/56a1a2e1316193450bd95f46.jpg"},{name:"Buttermilk-Brined Chicken",isPublished:!0,recipeVanity:"chicken-and-mushrooms-with-creamy-mustard-thyme-sauce-roasted-spring-vegetables",mealIntro:"Mushrooms, potato & peas, arugula & fig salad",thumbnailImageUrl:"//cdn2.greenchef.com/uploaded/572cc124ae06865b4b2260f1.jpg"},{name:"Enchilada Quesadilla",isPublished:!0,recipeVanity:"veggie-enchilada-quesadilla-with-cheese-blend",mealIntro:"Pinto beans & corn, salad, cilantro-scallion rice",thumbnailImageUrl:"//cdn2.greenchef.com/uploaded/57a4b9b7c6f8eefd473bb45e.jpg"}],meat:[{name:"Ginger-Tamari Steak",isPublished:!0,recipeVanity:"gf-ex-ginger-tamari-steak-with-asian-slaw-and-peanut-sauce",mealIntro:"Veggie & black rice ramen salad, peanut sauce",thumbnailImageUrl:"//cdn2.greenchef.com/uploaded/56d0c78ece5749a5171038a5.jpg"},{name:"Crispy Shrimp Salad",isPublished:!0,recipeVanity:"gf-crispy-shrimp-salad-with-arugula-quinoa-fennel-and-tarragon",mealIntro:"Quinoa, arugula & fennel, tarragon vinaigrette",thumbnailImageUrl:"//cdn2.greenchef.com/uploaded/5735f3ff426246386299f67b.jpg"},{name:"Greek Chicken & Potatoes",isPublished:!0,recipeVanity:"lemon-herb-chicken-with-greek-fingerling-potatoes-and-roasted-artichokes",mealIntro:"Roasted artichoke, arugula, sun-dried tomato sauce",thumbnailImageUrl:"//cdn2.greenchef.com/uploaded/56e310cbc323d4830722381b.jpg"}],keto:[{name:"Merguez Chicken",isPublished:!0,recipeVanity:"keto-merguez-chicken-and-tomato-braised-mushrooms",mealIntro:"Brussels sprouts, mushrooms & tomatoes, almonds",thumbnailImageUrl:"//cdn2.greenchef.com/uploaded/599c59a037ee8ce74dc18ffb.jpg"},{name:"Mustard-Roasted Pork",isPublished:!0,recipeVanity:"keto-mustard-pork-with-roasted-sweet-potatoes-and-mushrooms-with",mealIntro:"Cauliflower, fennel, creminis, sauerkraut sauce",thumbnailImageUrl:"//cdn2.greenchef.com/uploaded/599c59d70bfcc977295bff6c.jpg"},{name:"Sesame-Crusted Tuna",isPublished:!0,recipeVanity:"keto-sesame-crusted-tuna-with-sauteed-asian-veggies",mealIntro:"Sautéed mushrooms, snap peas, bok choy, cashews",thumbnailImageUrl:"//cdn.greenchef.com/assets/Marketing/KetoPlan/sesame_tuna_mobile@2x.3d1e025f.jpg"}]}).factory("MenuService",function(){function e(e,n,t,r,a,o,i,s,l,c,u){var d=null,p=null,m=5;return moment.tz.add("America/New_York|EST EDT EWT EPT|50 40 40 40|01010101010101010101010101010101010101010101010102301010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-261t0 1nX0 11B0 1nX0 11B0 1qL0 1a10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 RB0 8x40 iv0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0"),n.$on(i.logoutSuccess,function(){d=null,p=null}),{getFavoritesFromThePast:function(){function e(e){return u[e]||[]}return e}(),getMyMenus:function(){function e(e,a){if(!e&&null!==d&&p.isAfter()){console.log("Fetched menus from cache");var o=t.defer();return o.resolve(d),o.promise}var i={};return a&&(i.startMenuDate=a),r.all("menus").getList(i).then(function(e){return d=e,p=moment().add(m,"minute"),n.$broadcast(s.menuUpdated,d),e})}return e}(),getHistoricalMenus:function(){function e(){return r.all("historicalMenus").getList().then(function(e){return e})}return e}(),getRecommendedMealPlans:function(){function e(e,n){var t={numPeople:n};return a.one("mealtypes",e).one("plans").get(t)}return e}(),offsetMenuDate:function(){function e(e,n){return moment(e).add(n,"week").format("YYYY-MM-DD")}return e}(),clearCache:function(){function e(){d=null,p=null}return e}(),getNextEditableDeliveryDay:function(){function e(){var e=moment().tz("America/New_York"),n=e.hour()>=12?8:7,e=moment().tz("America/New_York").hour(12).add(n,"day").hour(12);return e.toDate()}return e}(),getCutoffForDeliveryDate:function(){function e(e){return moment(e).tz("America/New_York").hour(12).subtract(7,"day").toDate()}return e}(),skip:function(){function e(e){return r.one("menus",e).customPOST({},"skip")}return e}(),unskip:function(){function e(e){return r.one("menus",e).customPOST({},"unskip")}return e}(),emailOrderReceipt:function(){function e(e){return r.one("menus").customPOST(e,"emailReceipt")}return e}(),getOrderReceiptData:function(){function e(e){return r.one("menus",e).one("receipt").get().then(function(n){return n.id||(n.id=e),n})}return e}(),getIndicatorDescription:function(){function e(e){return c[e]}return e}(),getIndicator:function(){function e(e,n){"organic"==e&&(e="organic_alt2");var t="//cdn.greenchef.com/assets/Icons/indicator-"+e;return n&&(t=t+"-"+n),t+".png"}return e}(),getAvailableRegularMealTypes:function(){function e(e){return _.where(e.mealTypes,{service:void 0})}return e}(),getAvailableSpecialMealTypes:function(){function e(e){var n=e.mealTypes;return result=_.uniq([].concat(_.where(n,{service:l.glutenFree}),_.where(n,{service:l.paleo})))}return e}(),getMealName:function(){function e(e,n){var t=e.mealTypes;e.familyMealTypes&&(t=t.concat(e.familyMealTypes));var r=_.find(t,{value:n});return r?r.name:(r=_.find(e.familyMealTypes,{value:n}),r?r.name:null)}return e}(),getMealTypeObject:function(){function e(e,n){var t=_.find(e.mealTypes,{value:n});return t?t:(t=_.find(e.familyMealTypes,{value:n}),t?t:null)}return e}(),getRecipeNum:function(){function e(e,n){var t=_.find(e.mealTypes,{value:n});return t?t.numRecipes:(t=_.find(e.familyMealTypes,{value:n}),t?t.numRecipes:null)}return e}(),getMealPlanValue:function(){function e(e,n){return e.find(function(e){return e.value===n})}return e}(),getMealPlanName:function(){function e(e,n){return this.getMealPlanValue(e,n).name}return e}(),getPlanMinCost:function(){function e(e){return _(e).map("cost").min().value().toFixed(2)}return e}(),getDollarAmount:function(){function e(e){return Math.floor(e).toFixed(0)}return e}(),getCents:function(){function e(e){return e=parseFloat(Math.round(100*e)/100).toFixed(2),/\d*$/.exec(e)[0]}return e}(),isVegetarian:function(){function e(e){return e===l.vegetarian}return e}(),getRecipeIDList:function(){function e(e,n){return _(e.kitInfo).filter(function(e){return e.kitID.toLowerCase()===n.toLowerCase()}).pluck("recipeInfo").flatten().value()}return e}(),getFamilyRecipeIDs:function(){function e(e){return _(e.kitInfo).filter(function(e){return _.contains(["family-carnivore 1","family-carnivore 2","family-carnivore 3","family-omnivore 1","family-omnivore 2","family-omnivore 3"],e.kitID.toLowerCase())}).pluck("recipeInfo").flatten().uniq().value()}return e}(),getRecipesList:function(){function e(e,n){var t=this.getRecipeIDList(e,n),r=_.reduce(t,function(e,n){return e[n]=!0,e},{});return _.filter(e.recipes,function(e){return e._id in r})}return e}(),getAllRecipes:function(){function e(e){var n=_(e.kitInfo).filter(function(e){return _.contains(["carnivore","omnivore","vegetarian"],e.kitID.toLowerCase())}).pluck("recipeInfo").flatten().uniq().value();return _(e.recipes).compact().filter(function(e){return _.contains(n,e._id)}).value()}return e}(),filterMenusForOptOutUsers:function(){function e(e){return _.filter(e,function(e){return e.willShip})}return e}(),getBoxPerWeek:function(){function n(n,t){return 0===n.numPeople||t.numPeople%n.numPeople!=0?(e.error("Invalid order.numPoeple or selectedMealType.numPeople: "+t.numPeople+" "+n.numPeople),1):t.numPeople/n.numPeople}return n}(),getPlanSummary:function(){function e(e,n){return{planName:e.planInfo.name,recipeNum:e.numRecipes,mealNum:e.numRecipes*e.numPeople,boxNum:this.getBoxPerWeek(e,n)}}return e}(),getCurrentMenu:function(){function e(e){return _.find(e,function(e){return!e.canEditOrder&&e.willShip})}return e}(),recipesPerMenu:function(){function e(e){return e.recipes?e.recipes.length:0}return e}(),getUnknownMenuWeek:function(){function e(e){var n=[];return n=this.isUserFamilyPlan(e.mealPreference)?["still cooking...","check back soon"]:["still cooking...","check back soon","this menu is in the works"],{recipes:n,arrivalDate:null}}return e}(),processRecipes:function(){function e(e,n,t){if(t)return!0;var r=_.map(e,function(e){return e.thumbnailImageUrl});return r=_.compact(r),r.length&&(n&&2===r.length||!n&&3===r.length)?!0:!1}return e}(),isUserFamilyPlan:function(){function e(e){return e&&-1!==e.toLowerCase().indexOf("family")}return e}(),isUserChoicePlan:function(){function e(e){return e&&e.toLowerCase().startsWith("choice")}return e}(),getAvailableMealPlans:function(){function e(e,n){return"2-person"===n?e.mealTypes||[]:e.familyMealTypes||[]}return e}(),getOrderPastCutOffFromMenus:function(){function e(e){return _(e).compact().findLast(function(e){return moment().isAfter(e.cutoffTime)&&e.willShip
})}return e}(),listDietaryOptOuts:function(){function e(e){var n=["choice-omnivore","family-meat","family-omnivore","meat","omnivore"],t=e.mealPlan;if(-1===_.indexOf(n,t)&&!t.proteinCustomizable)return void 0;if(!e.dietaryOptOuts||0===e.dietaryOptOuts.length)return"You are not opted out of any proteins";var r=[];return _.forEach(e.dietaryOptOuts,function(e){e=e.charAt(0).toUpperCase()+e.substr(1).toLowerCase(),r.push("No "+e)}),r.join(", ")}return e}()}}return e.$inject=["$log","$rootScope","$q","GreenchefAPI","PublicAPI","ABTest","AUTH_EVENTS","MENU_EVENTS","MEAL_SERVICE","INDICATOR_DESC","MENU_FAVORITES_FROM_THE_PAST"],e}()),angular.module("greenchef.menus-landing-service",[]).factory("menusLandingService",function(){function e(e){e+="";var n=e.split(".");return n[0]?n[0]:"0"}function n(e){e=parseFloat(e).toFixed(2);var n=e.split(".");return n[1]?n[1].slice(-2):"00"}return{getPriceInteger:e,getPriceDecimal:n}}),angular.module("greenchef.metadata-service",[]).factory("MetadataService",["$rootScope","$state","$location","PaymentService",function(e,n,t,r){var a="https://greenchef.com",o="Green Chef: Organic. Delicious. Delivery",i="Green Chef sends you fresh, organic, sustainable ingredients and delicious recipes to help you cook incredible meals at home.",s="http://cdn.greenchef.com/assets/holdbox_USDA_fajitas.jpg",l=a,c=s,u=i,d=o;return r.getCouponData(function(e){var n=e;if(n){var t=n.couponClaimMethod;if("referral-link"==t){var r="Join "+n.sender.firstName+" at Green Chef and get 4 meals free.",a="Cook nourishing, organic meals in just 30 minutes with Green Chef";d=r,u=a}}},e),{addStateChangeHandler:function(){function e(e){e.$on("$stateChangeSuccess",function(){l="https://"+t.host()+t.path()})}return e}(),getUrl:function(){function e(){return l}return e}(),getImage:function(){function e(){return c}return e}(),getDescription:function(){function e(){return u}return e}(),getTitle:function(){function e(){return d}return e}(),setImage:function(){function e(e){c=e}return e}(),setTitle:function(){function e(e){d=e}return e}(),setDescription:function(){function e(e){u=e}return e}()}}]),angular.module("ngHtmlCompile",[]).directive("ngHtmlCompile",["$compile",function(e){return{restrict:"A",link:function(){function n(n,t,r){n.$watch(r.ngHtmlCompile,function(r){t.html(r),e(t.contents())(n)})}return n}()}}]),function(e){function n(){return r}var t=e.module("ngScrollSpy",[]);t.service("ScrollSpy",["$window",function(n){var t,r=function(e){var n=(e.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,e.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,void 0!==e.pageXOffset),t="CSS1Compat"===(document.compatMode||""),r=(n?e.pageXOffset:t?document.documentElement.scrollLeft:document.body.scrollLeft,n?e.pageYOffset:t?document.documentElement.scrollTop:document.body.scrollTop,{width:e.innerWidth,height:e.innerHeight,maxWidth:e.document.body.scrollWidth,maxHeight:e.document.body.scrollHeight,posX:e.scrollX||e.pageXOffset||e.document.documentElement.scrollLeft,posY:e.scrollY||e.pageYOffset||e.document.documentElement.scrollTop});return r.posX<0?(r.posX=0,r.overscrollLeft=!0):r.posX+r.width>r.maxWidth&&(r.posX=r.maxWidth-r.width,r.overscrollRight=!0),r.posY<0?(r.posY=0,r.overscrollTop=!0):r.posY+r.height>r.maxHeight&&(r.posY=r.maxHeight-r.height,r.overscrollBottom=!0),r.hasOverscroll=r.overscrollTop||r.overscrollBottom||r.overscrollLeft||r.overscrollRight,r},a=function(n,t){if(!n||!t)return e.extend({isEqual:!1,velocityX:0,velocityY:0},t);var r={posX:t.posX-n.posX,posY:t.posY-n.posY,width:t.width-n.width,height:t.height-n.height,maxWidth:t.maxWidth-n.maxWidth,maxHeight:t.maxHeight-n.maxHeight};return t.width>0&&(r.velocityX=r.posX/t.width),t.height>0&&(r.velocityY=r.posY/t.height),r.isEqual=!(0!==r.posX||0!==r.posY||0!==r.width||0!==r.height||0!==r.maxWidth||0!==r.maxHeight),r},o={},i=function(e){var i=r(n),s=a(t,i);if(!s.isEqual||i.hasOverscroll||e){for(var l in o){var c=o[l].cond;(c(i,s)||e)&&o[l].handler(i,s)}t=i}};e.element(n).on("scroll",i);var s=this,l=0;this.trigger=function(){this.isForced=!0,i(!0),this.isForced=!1},this.addHandler=function(e,n){return o[l]={cond:e,handler:n},l++,l-1},this.removeHandler=function(e){delete o[e]},this.onScroll=function(e){return s.addHandler(function(){return!0},function(n,t){e(n,t)})},this.onXScroll=function(e){return s.addHandler(function(e,n){return 0!==n.posX},function(n,t){e(n.posX,t.posX,n,t)})},this.onYScroll=function(e){return s.addHandler(function(e,n){return 0!==n.posY},function(n,t){e(n.posY,t.posY,n,t)})},this.onOverscrollHorz=function(e){return s.addHandler(function(e){return e.overscrollLeft||e.overscrollRight},e)},this.onOverscrollLeft=function(e){return s.addHandler(function(e){return e.overscrollLeft},e)},this.onOverscrollRight=function(e){return s.addHandler(function(e){return e.overscrollRight},e)},this.onOverscrollVert=function(e){return s.addHandler(function(e){return e.overscrollTop||e.overscrollBottom},e)},this.onOverscrollTop=function(e){return s.addHandler(function(e){return e.overscrollTop},e)},this.onOverscrollBottom=function(e){return s.addHandler(function(e){return e.overscrollBottom},e)}}]),t.directive("affix",["ScrollSpy",function(n){var t,r=function(e,n,t,r){var a=e(r[0].getBoundingClientRect());a!==n&&(a?r.addClass(t):r.removeClass(t))},a=function(a,o,i,s){var l,c=!1,u=!1,d=!1;i=e.extend({offset:0},i),"top"===a?t=n.onYScroll(function(e){u=c,r(function(n){return c?c=l<e+i.offset:n.top<i.offset?(l=n.top<i.offset?e+n.top:e,c=!0):!1},u,o,s)}):"bottom"===a?(d=!0,t=n.onYScroll(function(e,t,a){u=c,r(function(t){return c?c=l>=e:t.bottom>=a.height?(l=n.isForced&&0===e?e+t.bottom-a.height-t.height:e+t.bottom-a.height,c=!0):!1},u,o,s)})):"left"===a?t=n.onXScroll(function(e){u=c,r(function(n){return c?c=e>=l:n.left<=0?(l=n.left<0?e+n.left:e,c=!0):!1},u,o,s)}):"right"===a&&(d=!0,t=n.onXScroll(function(e,t,a){u=c,r(function(t){return c?c=l>=e:t.right>=a.width?(l=n.isForced&&0===e?e+t.right-a.width-t.width:e+t.right-a.width,c=!0):!1},u,o,s)})),d&&n.trigger()};return{restrict:"A",scope:{affix:"@",affixClass:"@",affixOptions:"@"},link:function(){function e(e,r){e.affix=e.affix||"top",e.affixClass=e.affixClass||"affix",e.affixOptions=e.affixOptions?e.$eval(e.affixOptions):{},a(e.affix,e.affixClass,e.affixOptions,r),e.$on("destroy",function(){n.removeHandler(t)})}return e}()}}]);var r={onRun:null,state:null,store:function(){function e(e){for(var n in e)this[n]=e[n];this.state=!0,this.run()}return e}(),builder:null,setBuilder:function(){function e(e){this.builder=e,this.run()}return e}(),run:function(){function e(){this.builder&&this.state&&(this.builder(),this.builder=null,this.state=null,this.onRun&&(this.onRun(),this.onRun=null))}return e}()};t.directive("pageitems",["ScrollSpy",function(t){var r=function(r,a){if(e.isDefined(r.selector)){r.spyElems=a[0].getElementsByClassName(r.selector),r.spies={},n().onRun=function(){r.spies[r.spyElems[0].id].set()},n().store({topMargin:function(){function e(){return 0|r.topmargin}return e}(),addSpy:function(){function e(e){r.spies[e.id]=e}return e}(),getSpy:function(){function e(e){return r.spies[e]}return e}(),items:function(){function e(){return r.spyElems}return e}()});var o=r.spyElems,i=0|r.topmargin,s=t.onYScroll(function(e,n,a){for(var l=null,c=r.spies,u=0;u<o.length;u++){var d=o[u],p=c[d.id];if(p.clear(),void 0!==d.getBoundingClientRect().top){var m=d.getBoundingClientRect().top;i>=m?(p.pos=m,null===l&&(l=p),l.pos<p.pos&&(l=p)):null===l&&(l=p)}}a.height+e>=a.maxHeight&&(l=c[o[o.length-1].id]),l.set(),r.$on("destroy",function(){t.removeHandler(s)})})}};return{restrict:"A",scope:{selector:"@",topmargin:"@"},link:r}}]),t.directive("pagemenu",["$compile","$location","$anchorScroll",function(e,t,r){var a=function(a,o){for(var i,s=[],l=[],c=function(e){for(var n={link:e.id,text:e.textContent||e.innerText,parent:""},t=e.tagName,r=0;r<e.classList.length;r++)t+=","+e.classList[r];var a=s.length;if(0===a)s.push(t);else if(t!==s[a-1]){for(var o=a-1;o>=0&&t!=s[o];o--);if(0>o)s.push(t),n.push=!0,l.push(i);else for(n.pop=a-1-o;s.length>o+1;)s.pop(),l.pop()}return l.length>0&&(n.parent=l[l.length-1]),i=n.link,n},u=n().items(),d="",p=0;p<u.length;p++){var m=c(u[p]);if(m.push)d+='<menu class="nav">';else if(m.pop)for(var g=0;g<m.pop;g++)d+="</li></menu>";else 0!==p&&(d+="</li>");d+='<li pagemenuspy="'+m.link+'" parent="'+m.parent+'">',d+='<a href="#'+m.link+'">',d+=m.text,d+="</a>"}d+="</li>",o.append(e(d)(a)),o.on("click",function(e){var a=e.target.hash.substring(1);t.hash(a),r(),0!==n().topMargin()&&setTimeout(function(){window.scrollTo(window.pageXOffset,window.pageYOffset-n().topMargin())},0)})};return{restrict:"E",replace:!0,template:'<menu class="nav pagemenu"></menu>',link:function(){function e(e,t){n().setBuilder(function(){a(e,t)})}return e}()}}]),t.directive("pagemenuspy",["$location","$anchorScroll",function(){return{restrict:"A",link:function(){function e(e,t,r){n().addSpy({id:r.pagemenuspy,parent:r.parent,set:function(){function e(){t.addClass("active");var e=n().getSpy(this.parent);e&&e.set()}return e}(),clear:function(){function e(){t.removeClass("active")}return e}()})}return e}()}}])}(angular),function(){angular.module("greenchef.notification-services",[]).service("NotificationService",function(){function e(){function e(){return{holidayStart:moment("2018-10-22","YYYY-MM-DD"),holidayEnd:moment("2018-11-25","YYYY-MM-DD"),affectedWeekNumber:moment(r,"YYYY-MM-DD").week()}}function n(n,r){var a=e();if(a){var o=moment(),i=_.find(n,function(e){return t(e,r,a.affectedWeekNumber)});if(i&&(o.isBefore(a.holidayEnd)&&o.isAfter(a.holidayStart)||o.isSame(a.holidayStart,"day")||o.isSame(a.holidayEnd,"day")))return!0}return!1}function t(e,n,t){var r=e.arrivalDate||e.deliveryDate,a=moment(r).week();return t===a&&r&&(e.willShip||"DELIVERY"===e.status)&&moment(r).format("dddd").toLowerCase()!==n?!0:!1}var r="2018-11-19";return{showHolidayBanner:n,affectedWeek:r}}return e}())}(),angular.module("greenchef.order-services",[]).factory("OrderService",function(){function e(e){function n(){return e.all("user").customPUT({optIn:!0},"subscription")}function t(e){return e.mealPreference&&e.addressLine1&&e.city&&e.state&&e.zipCode&&e.phoneNumber&&e.addressType&&e.deliveryWindow&&e.firstDeliveryDate}function r(e){return _.values(_.pick(e,["addressLine1","addressLine2","city","state","zipCode"])).join(", ")}var a={switchToRegularSubscription:n,validateOrder:t,getAddressString:r};return a}return e.$inject=["GreenchefAPI"],e}()),angular.module("greenchef.owl-carousel-service",[]).factory("owlCarouselService",function(){function e(e){l=e.item.index,i(l)}function n(e){l=e.item.index}function t(e){i(e.item.index)}function r(e){l>e&&$(".list-meals").trigger("prev.owl.carousel",[500]),e>l&&$(".list-meals").trigger("next.owl.carousel",[500]),i(l)}function a(){$(".list-meals").trigger("prev.owl.carousel",[500]),i(l)}function o(){$(".list-meals").trigger("next.owl.carousel",[500]),i(l)}function i(e){var n=angular.element(document.querySelectorAll(".owl-stage .owl-item")),t=angular.element(document.getElementById("prevBtn")),r=angular.element(document.getElementById("nextBtn"));n[e].classList.remove("left","right"),0===e?(t.addClass("disable"),n[e+1].classList.add("right")):e===n.length-1?(r.addClass("disable"),n[e-1].classList.add("left")):(t.removeClass("disable"),r.removeClass("disable"),n[e-1].classList.add("left"),n[e+1].classList.add("right"))}function s(){$(document).ready(function(){$(".list-meals").owlCarousel({loop:!1,nav:!0,responsive:{0:{stagePadding:50,margin:10,items:1},501:{margin:30,center:!0,items:1},768:{startPosition:3,center:!0,items:2,margin:100},1024:{startPosition:3,center:!0,items:2,margin:122}},onInitialized:e,onChanged:n,onDragged:t})})}var l;return{initOwl:s,prev:a,next:o,moving:r}}),angular.module("greenchef.payment-services",[]).constant("PAYMENT_EVENTS",{fetchedCouponCode:"fetchedCouponCode",couponInvalid:"couponInvalid",couponValid:"couponValid"}).factory("PaymentService",["$rootScope","$location","$q","PublicAPI","GreenchefAPI","URLParam","PAYMENT_EVENTS","AuthService","AUTH_EVENTS","URL_PARAM_EVENTS","IPGeoService","ABTest",function(e,n,t,r,a,o,i,s,l,c,u,d){function p(){P.resolve(),P=t.defer()}function m(n,t,a,o,s){var l=s?"":t,c=s?{code:t}:{};return r.all(n).withHttpConfig({timeout:P.promise}).customGET(l,c).then(function(n){if(!v||v!=b||a){if(n.valid)e.$broadcast(i.couponValid,n.message);else if(e.$broadcast(i.couponInvalid,n.message),h)return;f=t,h=n,v=S,g=!!o,e.$broadcast(i.fetchedCouponCode,h)}},function(n){e.$broadcast(i.couponInvalid,n)})}var g=!1,f=null,h=null,v=null,y=Stripe("pk_live_ZIP7uHYRF3UP9niEeyJhm71L"),b="user",S="url",P=t.defer(),w=t.defer();e.$on(l.logoutSuccess,function(){k.clear()}),e.$on(c.updated,function(){k.init()});var k={fetchCouponTicket:function(){function e(e){var n=e,t={};return r.all("ticket").withHttpConfig({timeout:P.promise}).customGET(n,t)}return e}(),fetchCouponCode:function(){function e(){var e,n=o.getParams(),r=null,a=!1;if(n.emailCouponType&&(n[n.emailCouponType]=n.emailCouponCode,console.log(n.ct)),n.cr?(e=n.cr,r="referral"):n.ct?(e=n.ct,r="couponType"):n.ctk?(e=n.ctk,r="ticket"):n.cl&&(e=n.cl,r="referralLink",a=!0),!e||0===e.length){var i=t.defer();return i.reject("no coupon"),i.promise}return m(r,e,!1,!1,a)}return e}(),fetchCouponFromUser:function(){function n(){return a.all("user/signupCoupon").withHttpConfig({timeout:P.promise}).customGET().then(function(n){h=n,f=h.code,v=b,g=!1,e.$broadcast(i.fetchedCouponCode,h)})}return n}(),getCouponData:function(){function n(n,t){return n&&(h&&n(h),t||(console.log("Warning - please pass in $scope to avoid stale bindings"),t=e),t.$on(i.fetchedCouponCode,function(){n(h)})),h}return n}(),getCouponDataPromise:function(){function e(){return w.promise}return e}(),getCouponCode:function(){function n(n,t){return n&&(n(f),t||(console.log("Warning - please pass in $scope to avoid stale bindings"),t=e),t.$on(i.fetchedCouponCode,function(){n(f)})),f}return n}(),getCouponType:function(){function n(n,t){return n&&(n(h.couponType),t||(console.log("Warning - please pass in $scope to avoid stale bindings"),t=e),t.$on(i.fetchedCouponCode,function(){n(h.couponType)})),h.couponType}return n}(),setCoupon:function(){function e(e){return m("couponType",e,!0)}return e}(),setDefaultCoupon:function(){function e(e){return m("couponType",e,!0,!0)}return e}(),isDefaultCoupon:function(){function e(){return!!h&&g}return e}(),setTicket:function(){function e(e){return m("ticket",e,!0)}return e}(),clear:function(){function n(){h=f=v=null,e.$broadcast(i.fetchedCouponCode,h)}return n}(),init:function(){function e(){function e(){return t==P?d.defaultCoupon().then(function(e){return e?k.setDefaultCoupon(e):void 0}):void 0}function n(){return e()}console.log("Initializing %cDiscounts","color: blue"),p();var t=P;k.fetchCouponCode().then(function(){w.resolve(h)},function(){return t!=P?(w.reject("More than one request created to initialize coupon data"),void 0):(s.isAuthenticated()?k.fetchCouponFromUser().then(function(){w.resolve(h)},function(){if(t!=P)return w.reject("More than one request created to initialize coupon data"),void 0;var e=k.getCouponData();e&&e.valid||n()["finally"](function(){w.resolve(e)})}):n()["finally"](function(){w.resolve(h)}),void 0)})}return e}(),orderFutureTerms:function(){function e(e,n,t,r){if(n&&"once"!=n.duration&&n.duration_in_months){var a=n.duration_in_months;return"Your subscription includes future deliveries at $"+r.total+" per week for "+a+" months ("+n.orderLineDescription+").  After the special offer ends, regular deliveries will continue at $"+r.retailCost+" per week.  You can skip an order or cancel anytime with 7 days notice before 12pm ET. To cancel your subscription please email us at help@greenchef.com or call 888-236-7295."}if(t.frequencyEnabled){var o=t.frequency+" weeks";return 1==t.frequency&&(o="week"),"Your subscription includes future deliveries at $"+r.retailCost+" per delivery, which will arrive every "+o+". You can skip an order or cancel any time with 7 days notice."}return"By Clicking COMPLETE ORDER, you confirm this subscription includes future deliveries at $"+r.retailCost+' per week and you will be charged this amount every week unless you modify your account to select a different plan in accordance with our <a ui-sref="terms">Terms of Service</a>. You can skip an order or cancel with at least 7 days\' notice before 12pm ET. To cancel your subscription please email us at help@greenchef.com or call 888-236-7295. To skip a week, log in to your account and manage your delivery schedule.'}return e}(),disableTrialKitForCouponType:function(){function e(e){return _.contains(["GIFT","EMAILFREEBOX"],e)}return e}(),getStripeInstance:function(){function e(){return y}return e}(),initializeStripeElements:function(){function e(e){var n=this.getStripeInstance().elements(),t=n.create("cardNumber",{style:{base:{color:"#707070",fontFamily:'"sofia-pro", Arial, sans-serif',"::placeholder":{color:"transparent"}},invalid:{color:"#707070"}}}),r=n.create("cardCvc",{style:{base:{color:"#707070",fontFamily:'"sofia-pro", Arial, sans-serif',"::placeholder":{color:"transparent"}},invalid:{color:"#707070"}}}),a=n.create("cardExpiry",{style:{base:{color:"#707070","::placeholder":{color:"#9b9b9b",fontFamily:'"sofia-pro", Arial, sans-serif'}},invalid:{color:"#707070"}}});return t.mount(".card-number"),r.mount(".card-cvc"),a.mount(".card-expiry"),t.on("change",function(n){n&&n.error?(e.stripeCardNumberError=!0,e.$digest()):n.complete&&!n.empty&&n.error||(e.stripeCardNumberError=!1,e.$digest())}),r.on("change",function(n){n&&n.error?(e.stripeCardCvcError=!0,e.$digest()):n.complete&&!n.empty&&n.error||(e.stripeCardCvcError=!1,e.$digest())}),a.on("change",function(n){n&&n.error?(e.stripeCardExpiryError=!0,e.$digest()):n.complete&&!n.empty&&n.error||(e.stripeCardExpiryError=!1,e.$digest())}),{cardNumber:t,cardCvc:r,cardExpiry:a}}return e}(),getErrorMessage:function(){function e(e){var n="Could not save payment details. Please try again later.";return e&&e.data&&(n=e.data),n}return e}()};return k}]),angular.module("greenchef").directive("pinterestShare",["$window","$location",function(e,n){return{restrict:"A",scope:{socialshareUrl:"=",socialshareText:"=",socialshareMedia:"="},link:function(){function t(t,r){r.bind("click",function(){e.open("//www.pinterest.com/pin/create/button/?url="+encodeURIComponent(t.socialshareUrl||n.absUrl())+"&media="+encodeURI(t.socialshareMedia)+"&description="+t.socialshareText,"sharer","toolbar=0,status=0,width=500,height=500")})}return t}()}}]),angular.module("greenchef").factory("PlanInfoService",function(){function e(e,n){function t(e){return _.sortBy(e(),"popularity")}function r(e){return _.min(_.map(e(),"cost"))}function a(){return _.filter(h,{isFamilyPlan:!1})}function o(){return _.filter(h,{isFamilyPlan:!0})}function i(){return h}function s(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=l(n,e,t),a=c(r,e);return a}function l(e,n,t){var r=n;return e.mealPlans.mealTypes=_.filter(e.mealPlans.mealTypes,function(e){var n=_.find(r,{internalName:e.value});return u(n)&&d(n,t)}),e.mealPlans.familyMealTypes=_.filter(e.mealPlans.familyMealTypes,function(e){var n=_.find(r,{internalName:e.value});return u(n)&&d(n,t)}),e}function c(e,n){return e.mealPlans.mealTypes=_.map(e.mealPlans.mealTypes,function(e){var t=_.find(n,{internalName:e.value});return Object.assign({},e,t)}),e.mealPlans.familyMealTypes=_.map(e.mealPlans.familyMealTypes,function(e){var t=_.find(n,{internalName:e.value});return Object.assign({},e,t)}),e}function u(e){if(!e)return!1;var n=moment.utc(),t=e.planActiveDates.planStartDate,r=e.planActiveDates.planEndDate;return!t||!t.isBefore(n)&&!t.isSame(n)||r&&!r.isAfter(n)?!1:!0}function d(e,n){if(!e)return!1;if(!n||"test"===n.userType)return!0;var t=moment.utc(n.registerDate),r=e.planActiveDates.userRegisteredAfterDate;return t.isBefore(r)?!1:!0}function p(){return null==h?f().then(function(n){var t=m(n.mealTypes),r=m(n.familyMealTypes),a=Object.assign({},t,r),o=_.map(e,function(e){return a.hasOwnProperty(e.internalName)?_.assign(e,a[e.internalName]):e});h=_.filter(o,function(e){return u(e)})}):h}function m(e){return e.reduce(function(e,n){var t=n.value;return delete n.value,e[t]=g(n),e},{})}function g(e){var n=e;return n.planMetaData=e.planInfo,delete n.planInfo,n}function f(){return n.getMenusData()}var h=null;return{resolveData:p,getPlanInfoSortedByPopularity:t.bind(this,i),getTwoPersonPlansSortedByPopularity:t.bind(this,a),getFamilyPlansSortedByPopularity:t.bind(this,o),getMinFamilyPlanCost:r.bind(this,o),getMinTwoPersonPlanCost:r.bind(this,a),filterPlansAndAddCopy:s}}return e.$inject=["MEAL_PLAN_COPY","SiteCMSService"],e}()),angular.module("greenchef.pricing-services",[]).factory("PricingService",function(){function e(e,n,t,r,a){function o(e){console.log("Creating Invoice"),this.showShippingCost=a.showShippingCost(),this.testVersion=a.getVersion(),this.useCoupon=!!e,this.reset()}return o.prototype.reset=function(){this.items=[],this.subtotal=0,this.shipping=0,this.discounts=[],this.retailCost=0,this.total=0,this.credits=0,this.updating=!0,this.updateId=0},o.prototype.setInvoiceData=function(e){angular.extend(this,e)},o.prototype.available=function(){return!this.updating},o.prototype.getCoupon=function(){var e={couponCode:"",couponClaimMethod:""};if(this.useCoupon){var t=n.getCouponData();t&&(e.couponCode=t.code,e.couponClaimMethod=t.couponClaimMethod)}return e},o.prototype.updateForKitId=function(e,n,r,a,o){if(e){var i=this,s=this.getCoupon(),l=++this.updateId;return this.credits=a,this.updating=!0,t.getInvoice(n,r,e,a,s.couponCode,s.couponClaimMethod,o).then(function(e){l==i.updateId&&i.setInvoiceData(e)})["finally"](function(){l==i.updateId&&(i.updating=!1)})}},o.prototype.updateForKitCode=function(e,n,r){var a=this,o=this.getCoupon(),i=++this.updateId;return this.credits=n,this.updating=!0,t.getInvoiceWithKitCode(e,n,o.couponCode,o.couponClaimMethod,r).then(function(e){i==a.updateId&&a.setInvoiceData(e)})["finally"](function(){i==a.updateId&&(a.updating=!1)})},{createInvoice:function(){function e(e){return new o(e)}return e}(),getInvoiceWithOrderData:function(){function e(e,n){var t=new o,r=n.numPeople*n.numRecipes;return t.updateForKitCode(e,r).then(function(){return t})}return e}()}}return e.$inject=["PublicAPI","PaymentService","SiteCMSService","PAYMENT_EVENTS","ABTest"],e}()),angular.module("greenchef").directive("ngReadMore",function(){return{restrict:"A",replace:!0,template:"<p></p>",scope:{limit:"=",data:"=",callback:"="},link:function(){function e(e,n){e.$watch("data",function(t){if(t){var r=t,a=' <a class="read-more">Read More</a>',o=' <a class="read-less hidden">Read Less</a>',i=angular.isUndefined(e.limit)?130:e.limit,s=r,l="",c="";if(r.length>i){l=r.substring(0,i);var u=l.lastIndexOf(" ");-1!==u&&(l=r.substr(0,u),c=r.substring(u,r.length)),s=l+a+'<span class="more-text hidden">'+c+"</span>"+o}n.append(s);var d=angular.element(n[0].querySelector(".read-more")),p=angular.element(n[0].querySelector(".more-text")),m=angular.element(n[0].querySelector(".read-less"));d.bind("click",function(){d.addClass("hidden"),p.removeClass("hidden"),m.removeClass("hidden"),e.callback(!0)}),m.bind("click",function(){d.removeClass("hidden"),p.addClass("hidden"),m.addClass("hidden"),e.callback(!1)})}},!0)}return e}()}}),angular.module("greenchef").constant("RECIPE_PAGE_EVENTS",{recipePageUpdated:"recipePage:updated"}).factory("RecipePages",function(){function e(e,n,t,r,a,o,i){var s={};return s.getRecipePage=function(n,t,a,s){r.one("recipe-pages",t).get({token:a}).then(function(t){n.recipePage=t,n.recipePage.platedPhoto&&(n.recipePage.platedPhoto=i.protocol()+":"+n.recipePage.platedPhoto),e.$broadcast(o.recipePageUpdated)},function(e){s.error(n,e.data)})},s.getRelatedRecipes=function(e,n){var t=e.recipePage._id,a=e.recipePage.dietTags;r.all("recipes/relatedRecipes").post({id:t,dietTags:a}).then(function(n){e.relatedRecipes=n},function(t){n.error(e,t.data)})},s.navigateToRecipePage=function(e,r){if(e){var a=e.isPublished&&e.recipeVanity?n.href("recipes",{recipeVanity:e.recipeVanity}):e.linkUrl||"";if(a){var o=r?"_blank":"_self";t.open(a,o)}}},s}return e.$inject=["$rootScope","$state","$window","PublicAPI","Alerts","RECIPE_PAGE_EVENTS","$location"],e}()),angular.module("greenchef.redirect",[]).constant("REDIRECT_EVENTS",{redirected:"redirect.redirected"}).provider("Redirect",function(){function e(){var e=null;return this.setOriginalPath=function(n){new Error;e=n},this.$get=["ABTest","AuthService","AccountService","PublicAPI","$rootScope","$urlRouter","$location","$state","REDIRECT_EVENTS",function(n,t,r,a,o,i,s,l,c){function u(){s.url(n.getDefaultRoute()).replace()}return this.init=function(){o.$on("$locationChangeStart",function(n){var t=null!==e;if("/"===e)return e=null,u(),void 0;if(t){n.preventDefault();var r={path:e};e=null,a.one("redirect").get(r).then(function(e){l.go(e.target.state,e.target.stateParams,{location:!1}),o.$broadcast(c.redirected,e.target)},function(){e=null,u()})}}),o.$on("$stateChangeStart",function(e,n){-1===n.name.indexOf("sign-up-v2")&&"sign-up"!==n.name||!t.isDoneSignupV2()||"sign-up-v2.thank-you"===n.name||(e.preventDefault(),r.gotoMyAccount())})},this}],this}return e}()),angular.module("greenchef.referral-services",[]).constant("REFERRAL_EVENTS",{referralsUpdated:"referrals-updated"}).factory("ReferralService",function(){function e(e,n,t,r,a,o){function i(n){s=n,l=null===n?null:moment().add(c,"minute"),e.$broadcast(o.referralsUpdated,s)}var s=null,l=null,c=5;return e.$on(a.logoutSuccess,function(){i(null)}),e.$on(a.loginSuccess,function(){this.getReferrals(!0)}),{getReferrals:function(){function e(e){if(r.isAuthenticated()){if(!e&&null!=s&&l.isAfter()){var a=n.defer();return a.resolve(s),a.promise}return t.all("user").customGET("referralStatus").then(function(e){return i(e),e})}}return e}(),clearCache:function(){function e(){i(null)}return e}()}}return e.$inject=["$rootScope","$q","GreenchefAPI","AuthService","AUTH_EVENTS","REFERRAL_EVENTS"],e}()),angular.module("greenchef").directive("resendReferral",["$timeout",function(e){return{restrict:"A",link:function(){function n(n,t){var r=angular.element(t[0].querySelector(".resend-button")),a=angular.element(t[0].querySelector(".gift-resent")),o=angular.element(t[0].querySelector(".referral-status"));r.bind("click",function(){o.addClass("hidden"),a.removeClass("hidden"),e(function(){a.addClass("hidden"),o.removeClass("hidden")},6e4)})}return n}()}}]);var greenchefBase="//web-api.greenchef.com";angular.module("greenchef").factory("PublicAPI",function(){function e(e){return e.withConfig(function(e){e.setBaseUrl(greenchefBase+"/boot/")})}return e.$inject=["Restangular"],e}()).factory("GreenchefAPI",function(){function e(e){return e.withConfig(function(e){e.setBaseUrl(greenchefBase+"/api/")})}return e.$inject=["Restangular"],e}()).factory("LogAPI",function(){function e(e){return e.withConfig(function(e){e.setBaseUrl(greenchefBase+"/log/")})}return e.$inject=["Restangular"],e}()).factory("SignupAPI",function(){function e(e){return e.withConfig(function(e){e.setBaseUrl(greenchefBase+"/signup/api/")})}return e.$inject=["Restangular"],e}()).factory("APIConfig",function(){function e(e,n,t,r,a,o,i){return{setInterceptors:function(){function t(t,r){t.addFullRequestInterceptor(function(e,n,t,r,a){a=a||{};var i=o.getToken();return i?a.Authorization="Bearer "+i:delete a.Authorization,{headers:a}}),r?t.setErrorInterceptor(function(e){return 401==e.status||403==e.status||419==e.status||440==e.status?(n.$broadcast({401:i.notAuthenticated,403:i.notAuthorized,419:i.sessionTimeout,440:i.sessionTimeout}[e.status],e),o.signOut(),o.requireLogin("sign-in.timeout"),!1):!0}):t.setErrorInterceptor(function(n,t){return 401===n.status?(o.signOut(),delete n.config.headers.Authorization,e(n.config).then(function(e){t.resolve(e.data)},t.reject),!1):!0})}return t}(),setRecipeInterceptors:function(){function e(e,n){e.addFullRequestInterceptor(function(e,t,r,a,o){return o=o||{},o.Authorization="Bearer "+n,{headers:o}})}return e}()}}return e.$inject=["$http","$rootScope","$state","$location","$window","AuthService","AUTH_EVENTS"],e}()).factory("ConsoleAPI",function(){function e(e){return e.withConfig(function(e){e.setBaseUrl(greenchefBase+"/console/DEN01")})}return e.$inject=["Restangular"],e}()),angular.module("greenchef").directive("anchorSmoothScroll",["$location",function(){return{restrict:"A",replace:!1,scope:{anchorSmoothScroll:"@",yOffset:"="},link:function(){function e(e,n){function t(){r()}function r(){n.on("click",function(){console.log("click",e.anchorSmoothScroll),a(e.anchorSmoothScroll)})}function a(n){var t,r=100,s=parseInt(e.yOffset)?e.yOffset:0,l=o(),c=i(n)-s,u=c>l?c-l:l-c;if(r>u)return a(0,c),void 0;var d=Math.round(u/r);d>=20&&(d=20);var p=Math.round(u/25),m=c>l?l+p:l-p,g=0;if(c>l)for(t=l;c>t;t+=p)setTimeout("window.scrollTo(0, "+m+")",g*d),m+=p,m>c&&(m=c),g++;else for(t=l;t>c;t-=p)setTimeout("window.scrollTo(0, "+m+")",g*d),m-=p,c>m&&(m=c),g++}function o(){return window.pageYOffset?window.pageYOffset:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop?document.body.scrollTop:0}function i(e){for(var n=document.getElementById(e),t=n.offsetTop,r=n;r.offsetParent&&r.offsetParent!=document.body;)r=r.offsetParent,t+=r.offsetTop;return t}t()}return e}()}}]).directive("scroll",["$parse","$document","$window",function(e,n,t){function r(e){var n=o.rectangle(e);return n.top<=s&&n.bottom>s}var a=t._,o=t.verge,i=[],s=100,l=250;return{restrict:"A",scope:{scrollEnter:"&",scrollLeave:"&",scrollItem:"="},link:function(){function e(e,t){var o=a.throttle(function(){var n=r(t),a=i.indexOf(e.scrollItem),o=-1!=a;n&&!o&&(i.push(e.scrollItem),e.$apply(function(){e.scrollEnter({item:e.scrollItem})})),!n&&o&&(i.splice(a,1),e.$apply(function(){e.scrollLeave({item:e.scrollItem})}))},l);angular.element(n).on("scroll",o),e.$on("$destroy",function(){angular.element(n).off("scroll",o)}),r(t)&&i.push(t)}return e}()}}]),angular.module("greenchef.shipping-services",[]).factory("ShippingService",function(){function e(e,n,t,r,a){return{getShippingDates:function(){function e(e,t,r){return e=("00000"+e).slice(-5),n.all("shippingDates").customGET(e,{menuDate:r,addressType:t})}return e}(),findFirstDeliveryDateWithDeliveryWindow:function(){function e(e,n,t){var r=this;return r.getShippingDates(n,void 0,e).then(function(e){var n=r.findFirstDeliveryDate(e,t);return n.firstDeliveryDate?n.firstDeliveryDate:null})}return e}(),findFirstDeliveryDate:function(){function e(e,n){if(!e||0===e.nextShippingDates.length)return null;for(var t=function(){function e(e){return{text:moment(e).format("dddd, MMMM Do"),value:e}}return e}(),r=0;r<e.availableDaysOfWeek.length;++r)if(e.availableDaysOfWeek[r]==n){var a=e.nextShippingDates[r],o=_.map(a,t);return{firstDeliveryDate:a[0],nextShippingDates:o}}return null}return e}(),findNewDeliveryWindow:function(){function e(e,n,t){var r=e;return _.contains(n.availableDaysOfWeek,e)||(r=_.first(n.availableDaysOfWeek)),t&&(r=_.first($scope.shippingDates.availableDaysOfWeek)),r}return e}(),processAddressValidationResponse:function(){function e(e,n,o,i,s){var l=e.error;_.forOwn(l,function(e,l){if("top_banner"===l&&t.error(i,e),"invalid_fields"===l&&(t.error(i,"We couldn’t find the address you provided. Please verify or edit your address. If correct, click "+o+"."),_.each(e,function(e){n[e].$error||(n[e].$error={}),n[e].$setValidity("invalid",!1)})),"candidate_addresses"===l){r.customEvent("modal_view","suggested_address");var c=a.open({templateUrl:"address-validation/shipping-validate-address.tpl.html",windowClass:"shipping-validation-address",resolve:{candidateAddresses:function(){function n(){return e}return n}(),originalAddress:function(){function e(){return i.order}return e}()},controller:"AddressValidationPopupController"});c.result.then(function(e){var t=e.selectedAddress;
i.order.addressLine1=t.addressLine1||"",i.order.addressLine2=t.addressLine2||"",i.order.city=t.city||"",i.order.state=t.state||"",i.order.zipCode=t.zipCode||"",s(n,e.forceSave)},function(){})}})}return e}()}}return e.$inject=["$rootScope","PublicAPI","Alerts","tracker","$modal"],e}()),angular.module("greenchef").factory("SiteCMSService",function(){function e(e,n,t){function r(){var e=n.getVersion();return e||(e=1),e}return{getLearnMore:function(){function a(){return n.getOrSetABTest(t.pd12).then(function(n){var t={};return n&&(t.tests={"price-drop":n}),e.one("cms",1).one("learn-more",r()).get(t)})}return a}(),getOnTheMenu:function(){function n(n){var t={};return n&&(t.menuDate=n),e.one("cms",1).one("on-the-menu",r()).get(t)}return n}(),getMenusData:function(){function a(){return n.getOrSetABTest(t.pd12).then(function(n){var t={tests:{}};return n&&(t.tests["price-drop"]=n),e.one("cms",1).one("menus",r()).get(t)})}return a}(),getRecipesByPlanId:function(){function n(n,t,a){return a=a||{},t&&(a.date=t),e.one("cms",1).one("plan",n).one("recipes",r()).get(a)}return n}(),getSignup:function(){function a(){return n.getOrSetABTest(t.pd12).then(function(n){var t={tests:{}};return n&&(t.tests["price-drop"]=n),e.one("cms",1).one("signup",r()).get(t)})}return a}(),getCancel:function(){function n(){return e.one("cms",1).one("cancel",r()).get()}return n}(),getInvoice:function(){function n(n,t,r,a,o,i,s){return angular.forEach(s,function(e,n){params["tv_"+n]=e}),e.one("cms",1).one("invoice",n).one("kits",r).get(params)}return n}(),getInvoiceWithKitCode:function(){function r(r,a,o,i,s){return n.getOrSetABTest(t.pd12).then(function(n){var t={credits:a,coupon:o,couponClaimMethod:i,tests:{}};return n&&(t.tests["price-drop"]=n),angular.forEach(s,function(e,n){t["tv_"+n]=e}),e.one("cms",1).one("invoiceKitCode",r).get(t)})}return r}(),getRecipes:function(){function n(n){var t={date:n};return e.one("cms",1).all("plan").one("recipes",r()).get(t)}return n}(),getRecommendedKits:function(){function n(n,t){var a={context:"skip",date:t};return e.one("cms",1).one("plans",n).one("recommendations",r()).get(a)}return n}()}}return e.$inject=["PublicAPI","ABTest","AB_TESTVERSION_SPLIT"],e}()),angular.module("greenchef.sms-link-service",[]).factory("SmsLinkService",["$window",function(e){function n(){var e=navigator.userAgent,n=e.match(/(iphone|ipod|ipad).* os ([0-9]+)_/i);return n&&n.length>0?parseInt(n[2]):null}function t(t){var r=n(),a="body="+encodeURIComponent(t);a=null===r?"sms:?"+a:r>=8?"sms:&"+a:"sms:;"+a,e.open(a,"_self",!1)}return{getIosVersion:n,openSmsWindow:t}}]),angular.module("greenchef.social-sharing-service",[]).factory("SocialSharingService",["AuthService","SmsLinkService","$modal","tracker",function(e,n,t,r){function a(e,n,t){var r="undefined"!=typeof window.screenX?window.screenX:window.screenLeft,a="undefined"!=typeof window.screenY?window.screenY:window.screenTop,o="undefined"!=typeof window.outerWidth?window.outerWidth:document.documentElement.clientWidth,i="undefined"!=typeof window.outerHeight?window.outerHeight:document.documentElement.clientHeight-22,s=0>r?window.screen.width+r:r,l=parseInt(s+(o-n)/2,10),c=parseInt(a+(i-t)/2.5,10),u="menubar=no,location=yes,toolbar=no,resizable=yes,scrollbars=yes,width="+n+",height="+t+",left="+l+",top="+c;window.open(e,"",u)}var o=e.getPayload(),i={init:function(){function e(e,i,s){var l=i,c=s||{},u="us";c.firstName&&(u=c.firstName),e.shareFacebook=function(){r.click("share/facebook"),FB.ui({method:"feed",link:l.linkUrl,name:"Join "+u+" at Green Chef and get 4 meals free.",caption:"",picture:"http://cdn.greenchef.com/assets/holdbox_USDA_fajitas.jpg",description:"Cook nourishing, organic meals in just 30 minutes with Green Chef"},function(){})},e.shareEmail=function(){r.click("share/email"),e.shareEmailAddresses="",e.customSubject=o.firstName+" gave you "+l.inviteeRewardDescription+" from Green Chef",e.customText="I love cooking with Green Chef, and I think you will too. That's why I'm giving you 4 free meals to get started.\n\nGreen Chef delivers all you need for nourishing home-cooked meals: fresh, organic, pre-measured ingredients and balanced, easy-to-master recipes. You skip the grocery store, and get a healthy dinner on the table in just 30 minutes.";var n=t.open({templateUrl:"my-account/1.1-email-modal.tpl.html",windowClass:"email-modal",controller:"MyAccountEmailModalCtrl",scope:e});e.cancelEmail=function(){n.dismiss(),r.click("share/cancel")}},e.shareTwitter=function(){a(e.twitterShareUrl(),550,420),r.click("share/twitter")},e.shareText=function(){var e="Order Green Chef & get your first 4 meals free: "+l.linkUrl;n.openSmsWindow(e),r.click("share/text")},e.shareGoogle=function(){a(e.googleShareUrl(),600,600),r.click("share/google")},e.goToNextdoor=function(){r.click("share/nextdoor")},e.twitterShareUrl=function(){var e="https://twitter.com/share?";return e+="url="+encodeURIComponent(l.linkUrl),e+="&hashtags=iamgreenchef",e+="&text=Cook organic with Green Chef! Sign up with my link and get "+l.inviteeRewardDescription+": "},e.googleShareUrl=function(){var e="https://plus.google.com/share?url="+encodeURIComponent(l.linkUrl);return e}}return e}()};return i}]),angular.module("greenchef").constant("TRACKER_EVENTS",{logged:"tracker_events.logged"}).factory("tracker",function(){function e(e,n,t,r,a,o,i,s,l,c,u){function d(){return Math.round(2147483647*Math.random())}function p(){var e={},n=s.getParams();for(var t in n)0==t.indexOf("utm_")&&(e[t]=n[t]);return e}function m(){var e=window,n=document,t=n.documentElement,r=n.getElementsByTagName("body")[0],a=e.innerWidth||t.clientWidth||r.clientWidth,o=e.innerHeight||t.clientHeight||r.clientHeight,i=a+"x"+o,s=screen.width+"x"+screen.height,l=document.referrer.substr(0,2048),c={_vr:i,_sr:s,_dr:l};return c}function g(){l.getData().then(function(e){w._ip=e.ip,w._gr=e.region,w._gc=e.city})}function f(){var e=t.path();return e}function h(){return n(function(e){if(!window.cookieId){var n=a.get(b);n||(n=parseFloat(d()+"."+d())),a.set(b,n),window.cookieId=n}e(window.cookieId)})}function v(n,t,r,s){var l=o.getUserId(),c=o.getImpersonatedById(),d={};s||(s={}),h().then(function(o){if(t&&(d.name=t),r&&(d.url=r),l)angular.extend(d,{userId:l,userIdType:"app",cookieId:o,impersonatedById:c});else{var p={userId:o,userIdType:"cookie",cookieId:o};a.isSupported||(p.isEphemeral=!0),angular.extend(d,p)}angular.extend(s,S),angular.extend(s,P),angular.extend(s,w),s._sid=k,s._sst=C,C=0,d.params=s,i.all(n).customPOST(d),e.$broadcast(u.logged,{event:n,data:d})})}function y(e,n){this.name=e,this.timings={},this.params=n?n:{},this.start=moment()}var b="gc-cookie-id",S=p(),P=m(),w={};g();var k=c.createHash(Math.random()*+new Date+"").substring(0,16),C=1;angular.extend(y.prototype,{log:function(){function e(){T.timing(this.name,this.timings,this.params)}return e}(),step:function(){function e(e){return this.timings[e]=-this.start.diff(),this}return e}()});var T={view:function(){function e(e,n){var t=f();r.gtmDataLayer.push({VirtualPageURL:t,VirtualPageTitle:e,event:"VirtualPageView"}),ga("send","pageview",{page:t,title:e}),n&&(n=_(n).omit(_.isUndefined).omit(_.isNull).value()),v("view",e,t,n)}return e}(),click:function(){function e(e,n){var t=f();ga("send","event","click",e,{page:t}),n&&(n=_(n).omit(_.isUndefined).omit(_.isNull).value()),v("click",e,t,n)}return e}(),link:function(){function e(e,n){var t=f();ga("send","event","link",e,{page:t}),v("link",e,t,n)}return e}(),error:function(){function e(e,n){var t=f();n||(n={}),v("error",e,t,n),ga("send","event","error",e,{page:t})}return e}(),Timer:y,timing:function(){function e(e,n,t){var r=f();t||(t={}),t=angular.copy(t),n&&(t.timings=n),v("timing",e,r,t)}return e}(),abtest:function(){function e(e,n){var t=f(),r={versionId:n};v("abtest",e,t,r)}return e}(),action:function(){function e(e,n){var t=f();v("action",e,t,n)}return e}(),signUpStart:function(){function e(e){var n=f(),t="sign-up-start";ga("send","event",t,{page:n}),v("action",t,n,{cta:e})}return e}(),customEvent:function(){function e(e,n,t){var r=f();v(e,n,r,t)}return e}(),signUpDone:function(){function e(e){var n=f(),t="sign-up-end",r=o.getSignupState(),a={signupState:r};e&&(_.merge(a,e),a=_(a).omit(_.isUndefined).omit(_.isNull).value()),v("action",t,n,a),ga("send","event",t,r,{page:n})}return e}(),getCookieId:h,getCampaignParameters:p};return T}return e.$inject=["$rootScope","$q","$location","$window","localStorageService","AuthService","LogAPI","URLParam","IPGeoService","md5","TRACKER_EVENTS"],e}()).directive("trackSignUp",["tracker",function(e){return function(n,t){t.on("click",function(n){e.signUpStart(n.target.innerText)})}}]).directive("trackClick",["tracker",function(e){return{restrict:"A",scope:{eventName:"@"},link:function(){function n(n,t){t.on("click",function(){e.click(n.eventName)})}return n}()}}]),angular.module("greenchef.unskip-popup-services",[]).service("UnskipPopupService",UnskipPopupService).service("UnskipSuccessPopupService",UnskipSuccessPopupService),angular.module("greenchef.url-param",[]).constant("URL_PARAM_EVENTS",{updated:"url_params.updated"}).constant("COUPON_PARAMS",["cr","ct","ctk","cl"]).provider("URLParam",function(){function e(){var e,n={};console.log("Initializing %cURL Parameters","color: blue");var t=window.location.search;if(t=t.substring(1),t||-1==window.location.hash.indexOf("?")||(t=window.location.hash.split("?")[1]),!t)return{};for(var r=t.split("&"),a=0,o=r.length;o>a;a++)e=r[a].split("="),n[e[0]]=decodeURIComponent(e[1]);return n}var n={};return n=e(),this.getParams=function(){return angular.copy(n)},this.$get=["$rootScope","$location","COUPON_PARAMS","REDIRECT_EVENTS","URL_PARAM_EVENTS",function(t,r,a,o,i){var s=this;return console.log("Initializing URL Param Service"),t.$on(o.redirected,function(r,a){n=e(),n=angular.extend(n,a.urlParams),t.$broadcast(i.updated,s.params)}),this.extendParams=function(e){n=angular.extend(n,e),t.$broadcast(i.updated,s.params)},this.clearCouponParams=function(){_.each(a,function(e){delete n[e]})},this}],this}),angular.module("greenchef").service("UserFeatureFlags",function(){function e(){function e(e){t.featureFlags=e}function n(){return t.featureFlags}var t=this;return{setFeatureFlags:e,getFeatureFlags:n}}return e}()),angular.module("greenchef").service("UserFeatures",function(){function e(e,n,t,r){return{updateTrackingAttribute:function(){function e(e,n){var a={};return a[e]=n,r.all("user").customPUT(a,"trackingAttributes").then(function(){t.refreshToken()})}return e}(),getTrackingAttribute:function(){function e(e){var n=t.getPayload();return n.trackingAttributes?n.trackingAttributes[e]:null}return e}(),unskipPopup:function(){function t(){var t=e.getFeatureFlags();t&&t.UNSKIP_POPUP&&n.maybeShowUnskipPopup()}return t}(),showOrderReceipt:function(){function n(){var n=e.getFeatureFlags();return n&&n.ORDER_RECEIPT?!0:void 0}return n}()}}return e.$inject=["UserFeatureFlags","UnskipPopupService","AuthService","GreenchefAPI"],e}()),angular.module("greenchef").constant("USER_SESSION_KEY",{apiToken:"api-token",signupState:"signup-state"}).service("UserSession",function(){function e(e,n,t){var r="API_TOKEN",a="IMPERSONATE_TOKEN";return{setToken:function(){function e(e,o){return console.log("Set UserSession token"),n.put(r,e),document.cookie=a+"=;domain="+window.location.host+";path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;",o&&t.set(r,e),this}return e}(),clearToken:function(){function e(){console.log("Cleared token"),n.remove(r),document.cookie=a+"=;domain="+window.location.host+";path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;",t.remove(r)}return e}(),getToken:function(){function o(){var o=e[a],i=o&&o.length>0?o:n.get(r);return i?i:t.get(r)}return o}(),hasToken:function(){function e(){return null!==this.getToken()}return e}()}}return e.$inject=["$cookies","$cookieStore","localStorageService"],e}()),angular.module("greenchef").factory("UspsAddressService",function(){function e(e){function n(n,t,r){var a="https://us-autocomplete.api.smartystreets.com/suggest?auth-token=9691187819306927&prefix="+encodeURIComponent(n);return t&&(a+="&prefer=",r&&(a=a+encodeURIComponent(r)+","),a+=encodeURIComponent(t)),e.get(a).then(function(e){return e.status&&200===e.status&&e.data&&e.data.suggestions?e.data.suggestions:[]})}function t(e,n){(n.city!==e.city||n.state!==e.state)&&(n.zipCode=""),n.addressLine1=e.street_line,n.city=e.city,n.state=e.state}function r(e){return _(a).map(function(n){return e[n]||""}).without("").join(" ")}var a=["addressLine1","addressLine2","city","state","zipCode"];return{tryAutocompleteAddress:n,autofillAddressFields:t,createFullTextAddress:r}}return e.$inject=["$http"],e}()),angular.module("greenchef.utility",[]).provider("Utility",UtilityProvider),angular.module("greenchef").directive("wrapFittext",["$window",function(e){"use strcit";return{restrict:"A",link:function(){function n(n,t){n.$watch(function(){return t.parent().attr("class")},function(n,t){n!==t&&setTimeout(function(){e.dispatchEvent(new Event("resize"))},0)})}return n}()}}]),angular.module("greenchef.your-plan-service",[]).factory("YourPlanService",function(){function e(){return/Android|webOS|iPhone|iPad|BlackBerry|Windows Phone|Opera Mini|IEMobile|Mobile/i.test(navigator.userAgent)}function n(e){var n=e.id,t=e.mobileItemCount,r=e.margin;$(document).ready(function(){var e=$("#"+n);e.trigger("destroy.owl.carousel"),e.owlCarousel({margin:r,loop:!1,autoWidth:!0,nav:!1,items:t,stagePadding:50}),e.find(".owl-item").each(function(){$(this).find(".owl-item").length>0&&$(this).remove()})})}function t(e,n){e.modalInstance=n.open({templateUrl:"account/confirm-selection-modal.tpl.html",windowClass:"confirm-selection-modal",scope:e})}function r(e){e.modalInstance&&e.modalInstance.dismiss()}return{initOwl:n,isMobile:e,openConfirmSelectionPopup:t,closePopup:r}}).directive("gcInitOwlWhenDone",["YourPlanService","$timeout",function(e){return{restrict:"E",scope:{mobileItemCount:"@mobileitemcount",marginItem:"@margin"},link:{post:function(){function n(n,t){if(e.isMobile()){var r=parseInt(n.mobileitemcount)||2,a=parseInt(n.margin)||20;n.$evalAsync(function(){var e=t.children().addClass("owl-carousel");$(e[0]).owlCarousel({margin:a,autoWidth:!0,nav:!1,items:r})})}}return n}()}}}]),angular.module("greenchef").service("ZipOfferService",function(){function e(e,n,t,r){return{shouldGetZipOffer:function(){function a(a){var o=!1;return e(function(e){r.enableZipOfferPopup()?t.all("zipDemographics").customGET(a).then(function(n){var t=n&&n.householdIncome>1.3*n.stateHouseholdIncome;o=t,n.canDeliver||(o=!1),e(o)})["catch"](function(t){n.error("Failed in getting zipDemographics"+t),e(o)}):e(o)})}return a}()}}return e.$inject=["$q","$log","PublicAPI","ABTest","Modals","PaymentService","tracker"],e}()),angular.module("greenchef").service("ZopimService",function(){function e(e,n,t,r){function a(){var e=t.getPayload();null!==e&&(e.name&&$zopim.livechat.setName(e.name),e.email&&$zopim.livechat.setEmail(e.email))}return $zopim(a),n.$on(r.loginSuccess,a),n.$on(r.logoutSuccess,a),n.$on(r.userStatusUpdated,a),{}}return e.$inject=["$window","$rootScope","AuthService","AUTH_EVENTS"],e}()),angular.module("greenchef.cancel",["ui.router"]).config(function(){function e(e){e.state("cancel",{url:"/cancel",resolve:{cancelData:function(){function e(e){return e.getCancel()}return e.$inject=["SiteCMSService"],e}()},views:{main:{controller:"CancelCtrl",templateUrl:"cancel/cancel.tpl.html"}},data:{pageTitle:"Cancellation"}})}return e.$inject=["$stateProvider"],e}()).controller("CancelCtrl",function(){function e(e,n,t,r,a,o,i,s,l){a.requireLogin("sign-in.auth-required"),a.getSignupState()==i.canceled&&r.gotoMyAccount();var c=!1;e.cancelData=l,e.cancelSubmitted=!1,e.survey={enableMarketing:!0},e.showMonthly=o.assignUserToTest("cancel-monthly-offer",["yes","no"]),e.getError=function(e){return angular.isDefined(e)&&e.required?"Required":void 0},e.switchToMonthly=function(){c||(c=!0,n.go("account",{editPlan:!0}))},e.submitCancel=function(n){return e.cancelSubmitted=!0,n.$invalid?(n.$submitted=!1,s.error("cancel-invalid-field"),void 0):(c||(c=!0,r.cancelAccount(e.survey).then(function(){r.gotoMyAccount(),c=!1})["catch"](function(){n.$submitted=!1})),void 0)},e.goToAccount=function(){return c?void 0:(c=!0,r.gotoMyAccount(),!1)}}return e.$inject=["$scope","$state","GreenchefAPI","AccountService","AuthService","ABTest","SIGNUP_STATE","tracker","cancelData"],e}()),angular.module("greenchef.carousel-meals",[]).directive("carouselMeals",["HomeV2OwlCarouselService",function(e){return{scope:{meals:"="},templateUrl:"carousel-meals/carousel-meals.tpl.html",link:function(){function n(n){n.meals=_.map(n.meals,function(e){return void 0===e.mealImages.mobile&&(e.mealImages.mobile=e.mealImages.desktop),void 0===e.mealImages.mobileRetina&&(e.mealImages.mobileRetina=e.mealImages.desktopRetina),e});var t={id:"#loved-meals-carousel",itemsSmall:1,itemsMedium:1,itemsLarge:2};n.carouselNext=function(){$(t.id).trigger("next.owl.carousel",500)},n.carouselPrevious=function(){$(t.id).trigger("prev.owl.carousel",500)},n.carouselRenderFinished=function(){e.initOwl(t)}}return n}()}}]),angular.module("greenchef.carousel-testimonials",[]).directive("carouselTestimonials",function(){return{scope:{testimonials:"=",timing:"="},templateUrl:"carousel-testimonials/carousel-testimonials.tpl.html",link:function(){function e(){console.log("testimonials")}return e}()}}),angular.module("greenchef.eco",["ui.router","ui.bootstrap"]).config(function(){function e(e){e.state("eco",{url:"/eco-friendly-packaging",views:{main:{controller:"EcoCtrl",templateUrl:"eco/eco.tpl.html"}},data:{pageTitle:"Learn More"}}).state("ecopack",{url:"/packaging",views:{main:{controller:"EcoCtrl",templateUrl:"eco/eco.tpl.html"}},data:{pageTitle:"Learn More"}})}return e.$inject=["$stateProvider"],e}()).controller("EcoCtrl",function(){function e(e,n){n.eco={title:"Be green",sections:[{anchorName:"box",title:"Cardboard boxes",anchorTitle:"Cardboard boxes",madeOfContent:"Cardboard",doWithContent:"Break it down and recycle it with your curbside recycling or at your local recycling facility.",imageSrc:"//cdn.greenchef.com/assets/Photos/EcoPackaging/cardboard-box@1x.f31395a0.png",imageSrcSet:"//cdn.greenchef.com/assets/Photos/EcoPackaging/cardboard-box@2x.410ab404.png"},{anchorName:"insulation",title:"Jute insulation",anchorTitle:"Jute insulation",madeOfContent:"The outer liner is made of &num;4 plastic film. Our jute insulation is 85&percnt; plant-based recycled materials (approximately 45&percnt; recycled jute and 40&percnt; recycled cotton) and 15&percnt; polytheylene binder. Jute is a rapidly renewable plant material sourced from recycled burlap bags.",doWithContent:"Remove the outer plastic liner and recycle it wherever &num;4 plastic film is accepted. Re-use the jute for things like ground cover and lining planters, or use it for animal bedding. The insulation is not appropriate for composting."},{anchorName:"ice",title:"Ice packs",anchorTitle:"Ice packs",madeOfContent:"Our ice packs are filled with soluble, non-toxic gel. The outer layer is made of &num;4 plastic film.",doWithContent:"Save them in your freezer and reuse them, or store them at room temperature for later use. You can also donate them to local charitable organizations. To recycle, simply cut the corner of the pack, drain the non-toxic gel into the garbage, then rinse out the bag and recycle it wherever &num;4 plastic film is accepted."},{anchorName:"bags",title:"Paper bags",anchorTitle:"Paper bags",madeOfContent:"100&percnt; post-consumer recycled paper",doWithContent:"If a bag is clean and dry, reuse it or recycle it with your curbside recycling. If it&apos;s soiled, you can compost it at home or through your local composting facility.",imageSrc:"//cdn.greenchef.com/assets/Photos/EcoPackaging/paper_bags@1x.39e1ee55.png",imageSrcSet:"//cdn.greenchef.com/assets/Photos/EcoPackaging/paper_bags@2x.91322dbd.png"},{anchorName:"plasticbags",title:"Plastic bags",anchorTitle:"Plastic bags",madeOfContent:"&num;4 plastic film",doWithContent:"Reuse clean bags &lpar;but be sure to dispose of any bags containing fish, meat, or animal products&rpar;. Recycle them wherever &num;4 plastic film is accepted. Just remove the sticker, clean, dry, and drop off.",imageSrc:"//cdn.greenchef.com/assets/Photos/EcoPackaging/plastic_bags@1x.735797c9.png",imageSrcSet:"//cdn.greenchef.com/assets/Photos/EcoPackaging/plastic_bags@2x.8948442b.png"},{anchorName:"paperboardbox",title:"Paperboard boxes",anchorTitle:"Paperboard boxes",madeOfContent:"100&percnt; recycled paperboard",doWithContent:"Recycle them wherever wet strength paperboard is accepted. Make sure the outer portion of the container is unsoiled and the inside is clean.",imageSrc:"//cdn.greenchef.com/assets/Photos/EcoPackaging/paperboard_boxes@1x.7167cf1b.png",imageSrcSet:"//cdn.greenchef.com/assets/Photos/EcoPackaging/paperboard_boxes@2x.fc1e6efd.png"},{anchorName:"plasticcontainers",title:"Plastic jars",anchorTitle:"Plastic jars",madeOfContent:"&num;5 plastic",doWithContent:"Feel free to reuse these dishwasher-safe jars, but do not use them in the microwave. Recycle them wherever &num;5 plastics are accepted, including curbside recycling in many areas.",imageSrc:"//cdn.greenchef.com/assets/Photos/EcoPackaging/plastic_containers@1x.a7109897.png",imageSrcSet:"//cdn.greenchef.com/assets/Photos/EcoPackaging/plastic_containers@2x.21cb8534.png"},{anchorName:"packets",title:"PACKETS",anchorTitle:"Packets",madeOfContent:"&num;4 plastic film",doWithContent:"Recycle them wherever &num;4 plastic film is accepted. Just remove the sticker, clean, dry, and drop off."}]},n.enterSection=function(e){n.activeSection=e},n.leaveSection=function(e){n.activeSection==e&&(n.activeSection=null)}}return e.$inject=["$window","$scope"],e}()),angular.module("greenchef.carousel-twitter",[]).directive("carouselTwitter",function(){return{scope:{posts:"="},templateUrl:"carousel-twitter/carousel-twitter.tpl.html",link:function(){function e(){}return e}()}}),angular.module("flexibleOrdering").factory("FlexibleOrderingAPI",["$http","MenuService",function(e,n){var t="//web-api.greenchef.com/ecommerce/v2/";return{getUserSubscription:function(){function n(n,r){var a=t+"users/"+n+"/subscriptions/"+r;return e.get(a)}return n}(),getUserSubscriptions:function(){function r(r,a){var o=t+"users/"+r+"/subscriptions";return e.get(o).then(function(e){return e.data.map(function(e){return e.mealPreference.mealPlan=n.getMealTypeObject(a.mealPlans,e.mealPreference.mealPlan),e})})}return r}(),updateUserSubscription:function(){function n(n,r,a){var o=t+"users/"+n+"/subscriptions/"+r;return e.put(o,a)}return n}(),createUserSubscription:function(){function n(n,r){var a=t+"users/"+n+"/subscriptions";return e.post(a,r)}return n}(),getUserCarts:function(){function n(n,r,a){a=void 0===a?0:a;var o="";r&&(o="&deliveryDateRange.start="+r);var i=t+"users/"+n+"/carts?limit="+a+o;return e.get(i).then(function(e){return e.data})}return n}(),createUserCart:function(){function n(n,r){var a=t+"users/"+n+"/carts";return e.post(a,r)}return n}(),updateUserCart:function(){function n(n,r,a){var o=t+"users/"+n+"/carts/"+r;return e.put(o,a).then(function(e){return e.data})}return n}(),updateMealChoiceCart:function(){function n(n,r,a){var o=t+"users/"+n+"/carts/"+r+"/dishes";return e.put(o,a).then(function(e){return e.data})}return n}(),destroyUserCart:function(){function n(n,r){var a=t+"users/"+n+"/carts/"+r;return e["delete"](a)}return n}(),getUserCartHistory:function(){function n(n,r){var a=t+"users/"+n+"/carts/"+r+"/history";return e.get(a)}return n}()}}]),function(){angular.module("flexibleOrdering").factory("flexOrderingApiInterceptor",["UserSession",function(e){return{request:function(){function n(n){return e.hasToken()&&(n.headers.Authorization="Bearer "+e.getToken()),n}return n}()}}]).config(["$httpProvider",function(e){e.interceptors.push("flexOrderingApiInterceptor")}])}(),angular.module("greenchef.footer",["ui.router"]).controller("FooterCtrl",function(){function e(e,n,t,r,a){function o(){e.showDeliverySchedule=t.showDeliverySchedule()}e.showDeliverySchedule=t.showDeliverySchedule(),e.$on(a.userStatusUpdated,o),e.$on("$stateChangeSuccess",function(){e.showSiteMap=!(n.includes("sign-up-v2")||n.includes("vegan")||n.includes("press-vegan")||n.includes("vegan-landing")||n.includes("paleo-landing")),e.showFooter=!(n.includes("vegan")||n.includes("press-vegan")||n.includes("vegan-landing")||n.includes("paleo-landing")),e.showFooterLanding=n.includes("vegan-landing")||n.includes("paleo-landing")}),e.currentYear=(new Date).getFullYear(),e.goToMyAccount=r.gotoMyAccount}return e.$inject=["$scope","$state","AuthService","AccountService","AUTH_EVENTS"],e}()),angular.module("greenchef.home").controller("HomeCtrl",["$scope","$state","AUTH_EVENTS","DEFAULT_TEST_VERSION","ABTest","AuthService","HomeDataService","SignupFlowService","URLParam",function(e,n,t,r,a,o,i,s,l){function c(e){e=e||r,l.extendParams({tv:e}),n.go("sign-up")}$.stellar("refresh"),e.diets=i.getDiets(),e.pressLogos=i.getPressLogos();var u=function(){e.isSignedIn=o.isAuthenticated()&&o.isDoneSignup()};e.$on(t.loginSuccess,u),e.$on(t.loginFailed,u),e.$on(t.logoutSuccess,u),e.$on(t.userStatusUpdated,u),u(),e.goToSignUp=function(){s.setUserSignupFlow("default"),s.advance()},e.signUp=c}]),angular.module("greenchef.home").controller("HomeV2Ctrl",["$scope","AB_TESTVERSION_SPLIT","ABTest","HomeDataService","PlanInfoService","HomeV2OwlCarouselService",function(e,n,t,r,a,o){t.getOrSetABTest(n.pd12),e.communityPosts=r.getCommunityPosts(),e.dinnerSteps=r.getDinnerSteps(),e.easyPeasy=r.getEasyPeasy(),e.pressLogos=r.getPressLogos(),e.recipes=r.getRecipes(),e.lovedMeals=_.map(a.getTwoPersonPlansSortedByPopularity(),function(e){return e.home.lovedMeal}),e.mealPlans=a.getPlanInfoSortedByPopularity(),e.scrollToThreeSteps=function(){$("html").animate({scrollTop:$("#three-steps").offset().top-$(".floater-nav").height()},"slow")};var i={mealPlans:{id:"#meal-plans-carousel"}};e.carouselNext=function(e){var n=i[e].id;$(n).trigger("next.owl.carousel",500)},e.carouselPrevious=function(e){var n=i[e].id;$(n).trigger("prev.owl.carousel",500)},e.carouselRenderFinished=function(e){var n=i[e];o.initOwl(n)}}]),function(){angular.module("greenchef.home").config(["$stateProvider",function(e){e.state("prewelcomehomepage",{url:"/prewelcome",views:{main:{controller:"HomeCtrl",templateUrl:"home/v3.home.tpl.html"}},data:{pageTitle:"Healthy Meal Kit Delivery Service",loggingTitle:"home"}}).state("home",{url:"/home",resolve:{resolvePlanInfoService:function(){function e(e){return e.resolveData()}return e.$inject=["PlanInfoService"],e}(),redirect:function(){function e(e,n,t,r){var a=r.defer();return e.isAuthenticated()?t.$evalAsync(function(){n.gotoMyAccount(),a.reject()}):a.resolve(),a.promise}return e.$inject=["AuthService","AccountService","$rootScope","$q"],e}()},views:{main:{controller:"HomeV2Ctrl",templateUrl:"home/v2.home.tpl.html"}},data:{pageTitle:"Healthy Meal Kit Delivery Service",loggingTitle:"homev2"}}).state("tv_home",{url:"^/tv_home",data:{pageTitle:"Healthy Meal Kit Delivery Servicey",loggingTitle:"tv_home"},parent:"home"}).state("veganhome",{url:"^/veganhome",views:{main:{controller:"HomeCtrl",templateUrl:"home/v3.home.tpl.html"}},parent:"home",data:{pageTitle:"Healthy Meal Kit Delivery Service",loggingTitle:"veganhome"}}).state("paleohome",{url:"^/paleohome",parent:"home",views:{main:{controller:"HomeCtrl",templateUrl:"home/v3.home.tpl.html"}},data:{pageTitle:"Healthy Meal Kit Delivery Service",loggingTitle:"paleohome"}}).state("homev2",{url:"/welcome",parent:"home",data:{pageTitle:"Healthy Meal Kit Delivery Service",loggingTitle:"homev2"}}).state("tv40",{data:{pageTitle:"Healthy Meal Kit Delivery Service",loggingTitle:"tv40"},views:{main:{controller:"Tv40Ctrl"}},url:"/tv40"})}])}(),angular.module("greenchef.home").controller("Tv40Ctrl",["$window",function(e){e.location="https://greenchef.com/home?tv=su4&ct=TV40&utm_medium=ad&utm_source=media&utm_campaign=TV40&utm_content=TV40"}]),angular.module("greenchef.landing-page-service",[]).service("LandingPageService",["SignupFlowService","SignupDataService","ABTest","AB_VEGAN_SUF","AB_PALEO_SUF",function(e,n,t,r,a){function o(r){var a;if(r in i)return a=i[r],t.getOrSetABTest(a).then(function(t){"SUF_nooptions"===t?e.setUserSignupFlow("skippedPreference"):e.setUserSignupFlow("selectedMeal"),n.setField("selectedMealPlan",r),e.advance()})}var i={vegan:r,paleo:a};return{startMealPlanFlow:o}}]),angular.module("greenchef.reviews").controller("ReviewsCtrl",["$scope",function(e){$.stellar("refresh"),e.listReviews=[{titleReview:"the answer to a busy mom's prayer",reviewer:"sogoodsopure",contentReview:"This is seriously the answer to a busy mom's prayer. Love this company as the food is organic, grass-fed, wild-caught, colorful fresh! An easy way for those wanting to venture down the path of a new way of eating but don't quite know how to approach it. I'm talking paleo, gluten free and vegan options!",reviewImage1x:"//cdn.greenchef.com/assets/Photos/Reviews/easy-peasy-meals@1x.df220b2f.jpg",reviewImage2x:"//cdn.greenchef.com/assets/Photos/Reviews/easy-peasy-meals@2x.805b03f0.jpg",userImage1x:"//cdn.greenchef.com/assets/Photos/Reviews/avatar-sogoodsopure@1x.3470bb4c.jpg",userImage2x:"//cdn.greenchef.com/assets/Photos/Reviews/avatar-sogoodsopure@2x.68b6a9cc.jpg",textButton:"get easy-peasy meals",instagramLink:"https://www.instagram.com/p/BJli59xhp5f/",clickEvent:"reviewsButton1"},{titleReview:"green chef gives life to our marriage",reviewer:"palmerdill_",contentReview:"Marriage advice: @greenchef gives life to our marriage. I never thought that I would do one of these “buy a meal” programs but this one has been incredible. They send us 3 dinners a week with all organic ingredients and no brainer directions. It saves us time at the grocery store, I can cook them by myself, and they are healthy portions. We have loved every meal!",reviewImage1x:"//cdn.greenchef.com/assets/Photos/Reviews/rekindle-dinner-time@1x.22d509ea.jpg",reviewImage2x:"//cdn.greenchef.com/assets/Photos/Reviews/rekindle-dinner-time@2x.d9ff3be1.jpg",userImage1x:"//cdn.greenchef.com/assets/Photos/Reviews/avatar-palmerdill@1x.a4761a87.jpg",userImage2x:"//cdn.greenchef.com/assets/Photos/Reviews/avatar-palmerdill@2x.b235b395.jpg",textButton:"rekindle dinnertime",instagramLink:"https://www.instagram.com/p/BGF3MEarTjh/",clickEvent:"reviewsButton2"},{titleReview:"saving frozen pizzas from mouths everywhere",reviewer:"asmitty87",contentReview:"Awesome WOD at @crossfitroots followed by a delicious dinner thanks to @greenchef! Thanks for making #paleo easy! #crossfitgirl #foodismedicine #iamgreenchef",reviewImage1x:"//cdn.greenchef.com/assets/Photos/Reviews/rise-bar-dinner@1x.6c44488a.jpg",reviewImage2x:"//cdn.greenchef.com/assets/Photos/Reviews/rise-bar-dinner@2x.dc47a41e.jpg",userImage1x:"//cdn.greenchef.com/assets/Photos/Reviews/avatar-asmitty87@1x.4a2d7dce.jpg",userImage2x:"//cdn.greenchef.com/assets/Photos/Reviews/avatar-asmitty87@2x.514d129a.jpg",textButton:"raise the bar for dinner",instagramLink:"https://www.instagram.com/p/BE9-YhdKfWm/",clickEvent:"reviewsButton3"}],e.communityPosts=[{profileImageRetina:"//cdn.greenchef.com/assets/Photos/WeeklyMenu/MainPage/TwitterPost/mihockeymom@2x.6ee8dc86.png",name:"Shawn Rosenthal",twitterHandle:"@mihockeymom",tweet:"Love how fresh all of the produce is from Green Chef! Tonight's meal was perfect. So loving this.",location:"Coconut Creek, FL"},{profileImageRetina:"//cdn.greenchef.com/assets/Photos/WeeklyMenu/MainPage/TwitterPost/carilynp@2x.2ef3c601.png",name:"Carilyn Platt",twitterHandle:"@carilynp",tweet:"Cooking mushroom & kale linguine with @greenchef...my family thinks I'm a superhero.",location:"Seattle, WA"},{profileImageRetina:"//cdn.greenchef.com/assets/Photos/WeeklyMenu/MainPage/TwitterPost/tin-lizzie-bikes@2x.28867763.png",name:"Elizabeth A. Denton",twitterHandle:"@TinLizzieBikes",tweet:"So happy to have @greenchef vegan meals again this weekend! Seriously feels like high class dining but cheaper and more fun.",location:"Arlington, VA"},{profileImageRetina:"//cdn.greenchef.com/assets/Photos/WeeklyMenu/MainPage/TwitterPost/ri-gator-mom@2x.c17126c0.png",name:"Joanna R+F",twitterHandle:"@RiGatorMom",tweet:"Very impressed with our first @greenchef order! Love the packaging, fact that it’s organic, gluten free & already prepped makes life easier!",location:"Rhode Island"},{profileImageRetina:"//cdn.greenchef.com/assets/Photos/WeeklyMenu/MainPage/TwitterPost/juliaphood@2x.e62fa753.png",name:"Julia Hood",twitterHandle:"@juliaphood",tweet:"Hands down the BEST home meal delivery service! This is our first meal with Green Chef- but not our last!!",location:"Salt Lake City, UT"}]}]),angular.module("greenchef.learn-more",["ui.router","ui.bootstrap"]).config(function(){function e(e){e.state("learn-more",{url:"/learn-more",resolve:{menuPlanData:function(){function e(e,n){return n.getLearnMore().then(function(n){return e.filterPlansAndAddCopy(n)
})}return e.$inject=["PlanInfoService","SiteCMSService"],e}(),resolvePlanInfoService:function(){function e(e){return e.resolveData()}return e.$inject=["PlanInfoService"],e}()},views:{main:{controller:"LearnMoreCtrl",templateUrl:"learn-more/v3.learn-more.tpl.html"}},data:{pageTitle:"Learn More"}})}return e.$inject=["$stateProvider"],e}()).controller("LearnMoreCtrl",function(){function e(e,n,t,r){e.twoPersonPlans=r.getTwoPersonPlansSortedByPopularity(),e.familyPlans=r.getFamilyPlansSortedByPopularity(),e.mealTypes=n.mealPlans.mealTypes.filter(function(e){return e.value.includes("choice")||e.value.includes("vegan")}),e.familyMealTypes=_.sortBy(n.mealPlans.familyMealTypes,["cost","name"]),e.rowSize=3,e.pricesIncludeShipping=n.mealPlans.pricesIncludeShipping,e.testVersion=t.getVersion(),e.priceTagUrl=t.getPriceTagUrl();var a=t.getPriceTagValue();e.priceDollars=Math.floor(a),e.priceCents=Math.round(100*(a-e.priceDollars)),e.mealTypeUrl="learn-more/meal-type.tpl.html",e.learnMore={title:"Home cooking<br/>you have time for",intro:"All you need for three incredible dinners, delivered weekly.",contentList:["Pre-measured and prepped ingredients.","Easy-to-master, original recipes.","Typically ready in 30 minutes or less."],cta:"Join Now",sections:[{anchorName:"food",title:"<span>Responsible sourcing</span>",content:"Green Chef is a certified organic company by CCOF. From wild-caught salmon to GMO-free soybeans, our ingredients are fresh and sustainably sourced.",cta:"Get Started",image:"//cdn.greenchef.com/assets/Photos/LearnMore/purely-delicious.2ad535e3.png"},{anchorName:"delivery",title:"<span>Convenient, flexible delivery</span>",content:"At your doorstep, when you want it.",cta:"Get Started",image:"assets/delivery.png",contentList:["You choose the delivery day.","No commitments ever. Skip weeks when you want to.",'<a href ui-sref="eco">Eco-friendly packaging</a>',"Food is carefully packed in a refrigerated container;<br/> no need to be home when it arrives."]},{anchorName:"recipes",title:"<span>Wholesome meals, designed for you</span>",content:"Just choose your preferences.<br/>We'll worry about the details.",cta:"Get Started",image:"//cdn.greenchef.com/assets/Photos/LearnMore/have-time.35b02fe4.png",contentList:["Diverse recipes, thoughtfully crafted by our chefs.","Choose the menu that fits your lifestyle&mdash;from gluten-free couple to vegetarian family of four, to meat-loving household of six.","Tasty, balanced meals with 450-750 calories per serving."]}]},e.enterSection=function(n){e.activeSection=n},e.leaveSection=function(n){e.activeSection==n&&(e.activeSection=null)},e.getDollarAmount=function(e){return Math.floor(e).toFixed(0)},e.getCents=function(e){return e=parseFloat(Math.round(100*e)/100).toFixed(2),/\d*$/.exec(e)[0]}}return e.$inject=["$scope","menuPlanData","ABTest","PlanInfoService"],e}()),angular.module("greenchef.modals",["greenchef.sharebuttons"]).factory("Modals",function(){function e(e,n,t,r,a){return{showConfirmation:function(){function t(t,r,a,o,i,s){var l=e.$new(),c="confirm-modal";l.title=t,l.caption=r,l.okLabel=a||"OK",l.cancelLabel=o||"Cancel",l.image=i,s&&(c+=" "+s);var u=n.open({templateUrl:"modal/confirm-modal.tpl.html",windowClass:c,controller:"ConfirmationController",scope:l});return u.result}return t}(),showRAF:function(){function e(){var e=moment(),o=null,i=!1;if(r.getCookie("_raf_last_shown")){var s=moment(r.getCookie("_raf_last_shown")),l=moment.duration(e.diff(s));i=l.asDays()>7}else i=!0;return i&&(r.setCookie("_raf_last_shown",e.toString(),1),a.view("RafPop_View"),t(function(){o=n.open({templateUrl:"modal/raf-modal.tpl.html",windowClass:"raf-modal-dialog",controller:"RAFModalController"})},3e3)),o}return e}()}}return e.$inject=["$rootScope","$modal","$timeout","CookieService","tracker"],e}()).controller("ConfirmationController",function(){function e(e,n){e.ok=function(){n.close(!0)},e.cancel=function(){n.dismiss(!1)}}return e.$inject=["$scope","$modalInstance"],e}()).controller("RAFModalController",["$modalInstance","$scope",function(e,n){n.ok=function(){e.close(!0)},n.cancel=function(){e.dismiss(!1)}}]),angular.module("greenchef.navbar",["greenchef.landing-page-service","ui.router"]).controller("NavbarCtrl",function(){function e(e,n,t,r,a,o,i,s,l,c,u,d,p,m,g,f,h,v){e.$state=n,e.isAuthenticated=!1,e.$on("$stateChangeSuccess",function(){e.isGapPage=n.includes("terms")||n.includes("privacy")||n.includes("recipes")||n.includes("on-the-menu")||n.includes("menu")||n.includes("start")||n.includes("my-account")||n.includes("eco")||n.includes("sign-up-coupon"),e.signupButtonData={clickEvent:"join_nav",clickAction:e.goToSignUp,buttonCta:"Join"},n.includes("vegan-landing")?(e.signupButtonData.clickEvent="startvegantopright",e.signupButtonData.clickAction=e.getStarted.bind(null,"vegan"),e.signupButtonData.buttonCta="Start Vegan Plan"):n.includes("paleo-landing")&&(e.signupButtonData.clickEvent="startpaleotopright",e.signupButtonData.clickAction=e.getStarted.bind(null,"paleo"),e.signupButtonData.buttonCta="Start Paleo Plan"),e.showDefaultNavBars=!(n.includes("sign-up-v2")||n.includes("vegan")||n.includes("press-vegan")||n.includes("family-landing")||n.includes("keto-landing"))});var y=function(){function n(){if(e.isAuthenticated=d.isAuthenticated(),e.isAuthenticated){e.userName=d.getPayload().firstName,e.isOptOutSubscription=d.isOptOutSubscription();var n=d.getSignupState();e.isCancelled=n===s.canceled,e.isRegistered=n===s.registered||n===s.noDelivery||n===s.canceled,e.isLeadUser=n===s.lead,g.getReferrals().then(function(n){n&&(e.referralData=n)})}else e.isRegistered=!1}return n}();y(),e.$on(a.loginSuccess,y),e.$on(a.loginFailed,y),e.$on(a.logoutSuccess,y),e.$on(a.userStatusUpdated,y),e.$on(i.referralsUpdated,y),e.$on(o.bannerUpdated,function(n,t){e.showBanner=t.showBanner}),e.signOut=function(){d.signOut(),u.setAccountPagesVisited(!1),n.go("home")},e.goToSignUp=function(){f.setUserSignupFlow("default"),f.advance()},e.getStarted=function(e){m.startMealPlanFlow(e)},e.openMobileNav=function(n){e.navCollapsed=n,t.onclick=null,setTimeout(function(){e.$apply()},0)},e.scrollToCollapse=function(){e.navCollapsed||e.collapseNav()},e.sparkScrollObj={},e.goToInviteFriend=function(t){return v.click(t),"invite-friends-navbar"===t&&v.abtest(r.testId,e.giftCTAtv),n.go("my-account.friends"),!0},e.goToEditSubscription=function(e){v.click(e),n.includes("account",{editPlan:!0})?n.go("account",{editPlan:!0},{reload:!0}):n.go("account",{editPlan:!0})},e.goToSignIn=function(){v.click("sign_nav")},e.freeTrialSignUp=function(){h.clearCouponParams(),h.extendParams({tv:c.getODTKVersion()}),n.go("sign-up")},c.getVersionAfterInit().then(function(){e.enableFreeTrialButton=c.enableFreeTrialButton()&&!d.isAuthenticated()}),c.getOrSetABTest(r).then(function(n){switch(e.giftCTAtv=n,n){case"get25":e.giftCTA="Get $25";break;case"feedfriends":e.giftCTA="Feed Friends";break;default:e.giftCTA="Get $25 Off"}})}return e.$inject=["$scope","$state","$window","AB_NAV_GIFT_CTA","AUTH_EVENTS","BANNER_STATE","REFERRAL_EVENTS","SIGNUP_STATE","URL_PARAM_EVENTS","ABTest","AccountService","AuthService","GreenchefAPI","LandingPageService","ReferralService","SignupFlowService","URLParam","tracker"],e}()).directive("gcV3Navbar",["ABTest","URL_PARAM_EVENTS","$rootScope",function(e,n){return{restrict:"E",transclude:!0,templateUrl:"shared/v3.fixed-header.tpl.html",controller:"NavbarCtrl",link:function(){function e(e){e.navbarInnerUrl="shared/v3.navbar-inner.tpl.html",e.isFloater=!0,e.$on(n.updated,function(){})}return e}()}}]).directive("gcV3DefaultNavbar",["ABTest","URL_PARAM_EVENTS","$rootScope",function(){return{restrict:"E",transclude:!0,templateUrl:"shared/v3.navbar-default.tpl.html",controller:"NavbarCtrl"}}]).directive("navbarCollapseHeight",function(){return{scope:{ngModel:"="},link:function(){function e(e,n){e.$watch(function(){return n.attr("class")},function(){if(n[0].clientHeight>0){e.ngModel={};var t=n[0].clientHeight+n[0].previousElementSibling.clientHeight;e.ngModel[t]={onDown:"scrollToCollapse"}}})}return e}()}}),angular.module("greenchef.paleo",["ui.router","plusOne"]).config(["$stateProvider",function(e){e.state("paleo",{url:"/paleo",views:{main:{controller:"PaleoCtrl",templateUrl:"paleo/v3.paleo.tpl.html"}},data:{pageTitle:"Healthy Meal Kit Delivery Service",loggingTitle:"paleo_home"}})}]).controller("PaleoCtrl",function(){function e(e,n){$.stellar("refresh"),e.diets=n.getDiets(),e.pressLogos=n.getPressLogos()}return e.$inject=["$scope","HomeDataService"],e}());var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};angular.module("greenchef.my-account").controller("MyAccountCtrl",["$modal","$scope","$state","$timeout","$window","AUTH_EVENTS","SUSPEND_REASONS_CODE","SIGNUP_STATE","AccountService","Alerts","AuthService","orderData","signupData",function(e,n,t,r,a,o,i,s,l,c,u,d,p){function m(){n.showDeliverySchedule=u.showDeliverySchedule()}function g(){var e=document.createElement("script");e.type="text/javascript",e.src="https://api.cloudsponge.com/widget/f997924a43477e1c86bc51704d83b093bf68c26d.js",document.body.appendChild(e),a.csPageOptions={}}function f(){u.getDeliveryState();if(!u.isAuthenticated())return t.go("sign-in.timeout"),void 0;if(u.getSignupState()==s.canceled)t.go("my-account.reactivate");else{if(!u.isDoneSignup()&&u.isDeliverable())return t.go("sign-up"),void 0;t.is("my-account")&&t.go("account")}}function h(t){return"/my-account"!=t?(u.isSuspended()&&!l.isAccountPagesVisited()&&e.open({templateUrl:"my-account/blocking-modal.tpl.html",windowClass:"v3-page inform-modal blocking-modal",controller:"ConfirmationController",scope:n,backdrop:"static"}),l.setAccountPagesVisited(!0),void 0):(f(),void 0)}n.isSuspended=u.isSuspended(),n.order=d,n.signupData=p,n.suspendReasonCSCode=i.customerService,(t.includes("my-account.schedule")||t.includes("my-account.next-week")||t.includes("my-account.welcome"))&&t.go("account"),c.init(n),n.$on(o.userStatusUpdated,m),null===u.getLastTokenRefreshTimestamp()&&u.setLastTokenRefreshTimestamp((new Date).getTime()),"undefined"===("undefined"==typeof cloudsponge?"undefined":_typeof(cloudsponge))&&g(),l.init(n),f(),n.$on("$stateChangeSuccess",function(e,n){h(n.url)})}]),angular.module("greenchef.my-account").controller("MyAccountEmailModalCtrl",["$modalInstance","$scope","GreenchefAPI","Modals","tracker",function(e,n,t,r,a){n.sendEmail=function(){var o={emailAddresses:n.shareEmailAddresses,customSubject:n.customSubject,customText:n.customText};t.all("user").customPOST(o,"sendReferralLinkEmail").then(function(){var n="Invite Sent",t="Your invites have been sent.";r.showConfirmation(n,t,!1,"OK").then(function(){e.close(!0)},function(){})}),a.click("share/email/send",o)}}]),angular.module("greenchef.my-account").controller("MyAccountFreeMealsCtrl",["$location","$modal","$scope","$state","$timeout","AccountService","AuthService","GreenchefAPI","Modals","ReferralService","SmsLinkService","SocialSharingService","referralLinkData","tracker",function(e,n,t,r,a,o,i,s,l,c,u,d,p,m){function g(){t.referralFormState.submitted=!1,t.referralFormState.isSent=!1,t.referralFormState.sendingTextMessage=!1,t.referral={firstName:"",lastName:"",email:""}}function f(){o.referralData().then(function(e){t.referralData=e})}function h(n){var t=e.protocol()+"://greenchef.com/menus/main?cr="+n,r="A gift: a free week of Green Chef. "+t;u.openSmsWindow(r)}function v(e){t.shareEmailAddresses||(t.shareEmailAddresses=""),angular.forEach(e,function(e){var n=e.selectedEmail();-1==t.shareEmailAddresses.toLowerCase().indexOf(n.toLowerCase())&&(""!==t.shareEmailAddresses.trim()&&(t.shareEmailAddresses+=", "),t.shareEmailAddresses+=n)}),t.$apply(),t.contacts=e}function y(e){a(function(){t.referralQueue=_.reject(t.referralQueue,function(n){return _.find(e,{id:n.id})}),t.resendReferrals.push(e),t.resendReferrals=_.flatten(t.resendReferrals)},6e4)}t.linkData=p,t.referralFormState={submitted:!1,isSent:!1},d.init(t,p,t.userInfo),g(),f(),t.submitForm=function(e){m.click("freebie/email/send"),t.referral.firstName=t.referral.email;var n=e.$valid;return n?(s.all("user").customPOST(t.referral,"sendReferral").then(function(){t.referralFormState.isSent=!0,a(function(){g(),f()},800),e.$submitted=!1},function(n){"user-exists"===n.data?l.showConfirmation(t.referral.email+" has already signed up",t.referral.email+" is already a Green Chef user.  Please invite another friend!"):"already-invited"===n.data&&l.showConfirmation("Already Invited","You have already invited "+t.referral.email+" to Green Chef.  Please invite another friend!"),t.referralFormState.submitted=!1,e.$submitted=!1}),void 0):(m.error("invalid-referral-field",t.referral),void 0)},t.getError=function(e){if(angular.isDefined(e)){if(e.required)return"Required";if(e.email)return"Invalid email"}},t.sendFreebieTextMessage=function(){m.click("freebie/text/send"),t.referralFormState.sendingTextMessage=!0,s.all("user").customPOST(t.referral,"reserveReferralForTextMessage").then(function(e){a(function(){g(),f()},1e3),h(e.ticket)})},t.resendFreebieTextMessage=function(e){m.click("freebie/text/resend"),h(e.ticket)},t.getCopyLink=function(){return t.linkData.linkUrl},t.clickCopy=function(){};var b={afterSubmitContacts:v,mobile_render:!0};t.openCloudsponge=function(){m.click("share/email/cloudsponge"),cloudsponge.init(b),cloudsponge.launch(),window.scrollTo(0,0)},t.referralQueue=[],t.removeReferralSent=function(e){var n=angular.fromJson(e);t.resendReferrals=_.reject(t.resendReferrals,function(e){return _.find(n,{id:e.id})}),t.referralQueue.push(n),t.referralQueue=_.flatten(t.referralQueue),y(n)},t.resendReferral=function(e){"string"==typeof e&&(e=angular.fromJson(e)),m.click("resend-gift",{recipients:e.length}),s.all("user").customPOST({referralIds:e},"resendReferral").then(function(){},function(){})}}]),angular.module("greenchef.my-account").controller("MyAccountHistoryCtrl",["$modal","$scope","MenuService","RecipePages","UserFeatures","orderData","tracker",function(e,n,t,r,a,o,i){function s(e){return e?!angular.isUndefined(e.mealName)&&!angular.isUndefined(e.mealIntro)&&!angular.isUndefined(e.thumbnailImageUrl):!1}function l(e){n.historicalMenus=e,e&&e.length>0&&(n.totalItems=e.length),n.$watch("currentPage",function(){var e=(n.currentPage-1)*n.itemsPerPage,t=e+n.itemsPerPage;n.filteredMenus=n.historicalMenus.slice(e,t)})}function c(r){$("body").addClass("print-order-receipt"),i.click("receipt_view",{order_id:r.id}),n.modalInstance=e.open({templateUrl:"my-account/7-order-receipt-modal.tpl.html",windowClass:"order-receipt-modal",controller:"OrderReceiptModalCtrl",scope:n,resolve:{receiptData:function(){function e(){return t.getOrderReceiptData(r.id)}return e}()},backdrop:"static"})}function u(){n.modalInstance.dismiss(),$("body").removeClass("print-order-receipt")}n.order=o,n.recipesPerMenu=t.recipesPerMenu,n.itemsPerPage=4,n.currentPage=1,n.maxSize=5,n.receiptModal=c,n.cancel=u,n.navigateToRecipePage=function(e,n){r.navigateToRecipePage(e,n)},n.displayMenuStatus=function(e){return"skip"==e.status?"skip":"autoskip"==e.status?"skip":"canceled"==e.status?"skip":"declined"==e.status?"declined":"shipped"==e.status?"shipped":e.isInvoiced?"invoiced":"open"},n.displayMenuPrice=function(e){var n=e.paid?e.paid:e.userPrice;return n||(n=0),((100*n).toFixed(0)/100).toFixed(2)},n.menuHasRecipeContent=function(e){return _.isEmpty(e.recipes)?!1:_.all(_.map(e.recipes,s))},t.getHistoricalMenus().then(l)}]),angular.module("greenchef.my-account").controller("MyAccountInfoCtrl",["$modal","$q","$scope","$state","$timeout","ERROR_CODE","AccountService","Alerts","ConversionTracking","GreenchefAPI","MenuService","Modals","PaymentService","ShippingService","signupData","userData","paymentData","tracker",function(e,n,t,r,a,o,i,s,l,c,u,d,p,m,g,f,h,v){function y(){v.click("pre_cancel_sub"),r.go("cancel")}function b(){m.getShippingDates(t.order.zipCode,t.order.addressType).then(function(e){e&&(t.shippingDates=e[t.order.addressType],t.shippingDates&&0!==t.shippingDates.nextShippingDates.length&&S())},function(e){s.error(t,"Error in updateAvailableDates: "+e.data),404===e.status&&(e.data="No delivery available to zip code: "+t.order.zipCode)})}function S(){t.nextShippingDates=t.getShipDatesForDeliveryWindow(t.order.deliveryWindow)}function P(e){var r=n.defer(),a=angular.copy(t.order);return angular.extend(a,t.newOrder),c.all("order").customPUT(a,"",{forceSave:!!e}).then(function(e){angular.extend(t.order,t.newOrder),u.getMyMenus(!0).then(function(){r.resolve(e)},function(){r.resolve(e)})},function(e){s.error(t,e.data),v.error("order-error-saving",t.order),r.reject(e)}),r.promise}function w(e){var n=_.find(e,function(e){return moment(e.arrivalDate).diff(new Date,"days")>=0});return n?moment(n.arrivalDate).format("dddd, MMMM Do"):""}function k(){u.getMyMenus(!1).then(function(n){var r=u.getCurrentMenu(n),a=w(n),o="";a&&(o+="These changes will affect your orders after <b>"+a+"</b>."),r&&(o+="&ast;Your current order is past the cut-off and will not be affected.</br>"),t.footerMessage=o,e.open({templateUrl:"my-account/edit-account-confirmation-modal.tpl.html",controller:"MyAccountModalCtrl",windowClass:"v3-page inform-modal edit-account-confirmation",scope:t,backdrop:"static"})})}function C(e,n){if(n.accountInfoUpdated={name:!1,email:!1,password:!1},n.deliveryInfoUpdated={address:!1,phone:!1,startDate:!1},n.paymentInfoUpdated=!1,"userForm"===e.$name)return n.accountInfoUpdated={name:!e.firstname.$pristine||!e.lastname.$pristine,email:!e.email.$pristine,password:!e.password.$pristine},void 0;if("orderForm"===e.$name){var t=!(e.name.$pristine&&e.address.$pristine&&e.address2.$pristine&&e.city.$pristine&&e.state.$pristine&&e.zipcode.$pristine&&e.addressType.$pristine);return n.deliveryInfoUpdated={address:t,phone:e.phone?!e.phone.$pristine:!1},void 0}return"paymentForm"===e.$name?(n.paymentInfoUpdated=e.$dirty,void 0):"zipForm"===e.$name?(n.deliveryInfoUpdated={address:!e.zipcode.$pristine||!e.addressType.$pristine},void 0):"editDeliveryWindow"===e.$name?(n.deliveryInfoUpdated={address:!e.deliveryWindow.$pristine},void 0):void 0}function T(){t.invalidDeliveryWindow=!1,t.addressNoDelivery=!1}function M(n){n===o.SUSPENDED_USER_INVALID_DEL_WINDOW&&(t.invalidDeliveryWindow=!0),n===o.SUSPENDED_USER_NO_DEL&&(t.addressNoDelivery=!0);var r=e.open({templateUrl:"my-account/edit-account-confirmation-modal.tpl.html",controller:"MyAccountModalCtrl",windowClass:"v3-page inform-modal edit-account-confirmation",scope:t,backdrop:"static"});r.result.then(function(){T(),k()})["catch"](function(){a(function(){T()},200)})}t.userInfo=f,t.payment=h,t.signupData=g,t.editDelivery=t.$parent.editDelivery,t.editPayment=t.$parent.editPayment,t.editAccount=t.$parent.editAccount,t.handleCancel=y,t.showLoadingState=!1,t.accountInfoUpdated={},t.deliveryInfoUpdated={},t.paymentInfoUpdated=!1,t.checkFieldsInFormPristine=C,t.getShipDatesForDeliveryWindow=function(e){if(t.shippingDates){for(var n=0;n<t.shippingDates.availableDaysOfWeek.length;++n)if(t.shippingDates.availableDaysOfWeek[n]==e){var r=t.shippingDates.nextShippingDates[n],a=_.map(r,function(e){return{text:moment(e).format("dddd, MMMM Do"),value:e}});return a}return null}},b(),t.$watch("order.zipCode",function(){b()}),t.$watch("order.deliveryWindow",function(){S()}),t.editDelivery=function(){t.save=P,t.newOrder=angular.copy(t.order);var n=e.open({templateUrl:"my-account/2.2-delivery-modal.tpl.html",controller:"MyAccountModalCtrl",windowClass:"my-account-modal-thin",scope:t});n.result.then(function(e){return e?e.error?(t.newOrder=angular.copy(e.order),e.error.attrs&&e.error.attrs.code&&M(e.error.attrs.code),void 0):(k(),void 0):void 0},function(){})},t.editAccount=function(){t.newUserInfo=angular.copy(t.userInfo);var n=e.open({templateUrl:"my-account/2.3-account-modal.tpl.html",controller:"MyAccountInfoModalCtrl",windowClass:"my-account-modal-thin",scope:t});n.result.then(function(e){angular.extend(t.userInfo,t.newUserInfo),e&&k()},function(){})},t.editPayment=function(){t.newPayment={name:t.payment.name};var n=e.open({templateUrl:"my-account/2.4-payment-modal.tpl.html",controller:"MyAccountPaymentModalCtrl",windowClass:"my-account-modal-thin",scope:t});n.rendered.then(function(){var e=p.initializeStripeElements(t);t.cardNumber=e.cardNumber}),n.result.then(function(e){e&&(angular.extend(t.payment,t.newPayment),k())},function(){})},l.trackAccountManagementVisit(f)}]),angular.module("greenchef.my-account").controller("MyAccountInfoModalCtrl",["$modalInstance","$scope","Alerts","AuthService","GreenchefAPI","tracker",function(e,n,t,r,a,o){n.userInfo=n.$parent.newUserInfo,n.updatingUser=!1,t.init(n),n.formSubmitted=!1,n.ok=function(i){if(n.formSubmitted=!0,n.checkFieldsInFormPristine(i,n.$parent),!n.updatingUser){var s=i.$valid;if(!s)return o.error("invalid-field"),void 0;if(!i.$dirty)return e.dismiss(!1),void 0;n.updatingUser=!0,a.all("user").customPUT(n.userInfo).then(function(){r.refreshToken().then(function(){n.userInfo.password=n.userInfo.passwordConfirm="",n.updatingUser=!1,e.close(!0)})},function(e){t.clear(n),t.error(n,e.data),o.error("user-info-error-saving"),n.updatingUser=!1})}},n.cancel=function(){e.dismiss(!1)},n.getError=function(e){if(angular.isDefined(e)){if(e.required)return"Required";if(e.email)return"Invalid email";if(e.duplicate)return"Email address already used";if(e.mustAgreeToTerms)return"You must agree to sign up";if(e.match)return"Passwords must match"}}}]),angular.module("greenchef.my-account").controller("MyAccountModalCtrl",["$modal","$modalInstance","$scope","Alerts","AuthService","Modals","ShippingService","UspsAddressService","tracker",function(e,n,t,r,a,o,i,s,l){t.userInfo=t.$parent.newUserInfo,t.$parent.newOrder&&(t.order=t.$parent.newOrder,t.newOrder=t.$parent.newOrder),t.signupData=t.$parent.signupData,t.tryAutocompleteAddress=function(e){return s.tryAutocompleteAddress(e,t.order.state,t.order.city)},t.populateOtherAddressFields=function(e){s.autofillAddressFields(e,t.order)},t.$watch("order.deliveryWindow",function(){t.order&&(t.nextShippingDates=t.getShipDatesForDeliveryWindow(t.order.deliveryWindow))}),r.init(t),t.formSubmitted=!1;var c={};t.ok=function(e,o){if(r.clear(t),t.formSubmitted=!0,"orderForm"==e.$name){var s=!0,u=!1;_.forOwn(e,function(n,t){t.startsWith("$")||(s=s&&c[t]===e[t].$viewValue,u=u||!!e[t].$error.invalid,c[t]=e[t].$viewValue,e[t].$error.invalid=!1,e[t].$setValidity("invalid",!0))}),o=o||s&&u}var d=e.$valid;return d?e.$dirty?(t.save(o).then(function(r){a.refreshToken().then(function(){r.error?n.close(r):n.close(!0),t.checkFieldsInFormPristine(e,t.$parent)})},function(n){e.$submitted=!1;var a=n.data;if(a&&a.code&&a.error)i.processAddressValidationResponse(a,e,"Save Changes",t,t.ok);else{r.error(t,n.data);var o=_.extend({status:n.status,message:n.data},t.order);l.error("order-error-saving",o)}}),void 0):(n.dismiss(!1),void 0):(l.error("invalid-field"),e.$submitted=!1,void 0)},t.cancelImmediately=function(){n.dismiss(!1)},t.disableClicks=function(e){e.preventDefault()},t.getError=function(e){if(angular.isDefined(e)){if(e.required)return"Required";if(e.email)return"Invalid email";if(e.duplicate)return"Email address already used"}},t.getDollarAmount=function(e){return Math.floor(e).toFixed(0)},t.getCents=function(e){return e=parseFloat(Math.round(100*e)/100).toFixed(2),/\d*$/.exec(e)[0]},t.editAddress=function(){n.dismiss(!1),t.editDelivery()}}]),angular.module("greenchef.my-account").controller("MyAccountPaymentModalCtrl",["$modalInstance","$scope","Alerts","GreenchefAPI","PaymentService","tracker",function(e,n,t,r,a,o){n.payment=n.$parent.newPayment,t.init(n),n.formSubmitted=!1,n.updatingCustomer=!1,n.ok=function(i){n.formSubmitted=!0,n.checkFieldsInFormPristine(i,n.$parent),t.clear(n);var s=i.$valid;if(!s)return o.error("invalid-field"),!1;if(n.stripeCardNumberError||n.stripeCardCvcError||n.stripeCardExpiryError)return o.error("payment-stripe-invalid-values",{cardNumberError:n.stripeCardNumberError,cvcError:n.stripeCardCvcError,cardExpiryError:n.stripeCardExpiryError}),!1;if(n.updatingCustomer)return!1;n.updatingCustomer=!0;var l={name:n.payment.name};a.getStripeInstance().createToken(n.cardNumber,l).then(function(i){if(!i)return n.updatingCustomer=!1,t.error(n,"An error occurred while processing your card. Try again in a little bit."),void 0;if(i.error)t.error(n,i.error.message),o.error("payment-stripe-error",i.error),n.updatingCustomer=!1;else if(i.token){var s=i.token;if(s.card&&"prepaid"===s.card.funding)return t.error(n,"We do not accept prepaid cards. Please enter a credit or debit card to continue."),o.error("payment-stripe-error",{funding:"prepaid"}),n.updatingCustomer=!1,void 0;var l={name:n.payment.name,token:s.id,fingerprint:s.card.fingerprint};r.all("payment").customPUT(l).then(function(t){angular.extend(n.payment,t),e.close(!0)},function(e){var r=a.getErrorMessage(e);t.error(n,r),o.error("payment-save-error",e),n.updatingCustomer=!1})}})},n.cancel=function(){e.dismiss(!1)},n.getError=function(e){return angular.isDefined(e)&&e.required?"Required":void 0}}]),angular.module("greenchef.my-account").controller("MyAccountReactivateCtrl",["$scope","$state","SIGNUP_STATE","AuthService","GreenchefAPI","Modals",function(e,n,t,r,a,o){e.reactivate=function(e){a.all("user").customPUT({},"reactivate").then(function(){r.refreshToken().then(function(){var a=r.getSignupState();if(a==t.registered){var i="Account Reactivated",s="Your account has been reactivated. Please review your upcoming delivery schedule.<br/><br/>";o.showConfirmation(i,s).then(function(){n.go("account")},function(){n.go("account")})}else if(a==t.noDelivery){var i="Account Reactivated",s="Your account has been reactivated.<br/><br/>";o.showConfirmation(i,s).then(function(){n.go("account")})}else n.go("sign-up");e.$submitted=!1},function(){e.$submitted=!1})})}}]),angular.module("greenchef.my-account").controller("OrderReceiptModalCtrl",["$scope","MenuService","receiptData","tracker",function(e,n,t,r){e.orderReceiptData=t,e.printReceipt=function(){r.click("receipt_print",{order_id:t.id}),document.title="Order_Receipt",window.print()},e.emailReceipt=function(){r.click("receipt_email",{order_id:t.id}),n.emailOrderReceipt(e.orderReceiptData)}}]),angular.module("greenchef.recipes",["ui.router"]).config(function(){function e(e){e.state("recipes",{url:"/recipes/:recipeVanity?token",views:{main:{templateUrl:"recipes/recipes.tpl.html",controller:"RecipeDetailCtl"},"summary@recipes":{templateUrl:"recipes/summary.tpl.html",controller:"RecipeSummaryCtl"},"relatedRecipes@recipes":{templateUrl:"recipes/related-recipes.tpl.html",controller:"RelatedRecipesCtl"},"nutrition@recipes":{templateUrl:"recipes/nutrition.tpl.html",controller:"RecipeNutritionCtl"}},data:{pageTitle:"Recipe pages detail",customTrack:!0}})}return e.$inject=["$stateProvider"],e}()).controller("RecipeDetailCtl",["$scope","$state","$stateParams","RecipePages","Alerts","RECIPE_PAGE_EVENTS","MetadataService","URLParam","AuthService","SIGNUP_STATE","tracker","ConversionTracking",function(e,n,t,r,a,o,i,s,l,c,u,d){function p(e){var n=e.pop();return 0===e.length?n?n:"":e.join(", ")+(e.length>1?",":"")+" and "+n}function m(){var n=[];_.forEach(e.recipePage.ingredients,function(t){var r=_.map(t.allergens,function(n){return _.find(e.recipePage.allergensRef,{acronym:n})});n=n.concat(r)}),e.unificationAllergen=_.uniq(n),e.allergensInfo=p(_.pluck(e.unificationAllergen,"name"))}if(a.init(e),r.getRecipePage(e,t.recipeVanity,t.token,a),e.gotoSignup=function(){var t=e.recipePage.stats.servings||0;if(4===t){var r={tv:"choice4"};r["suf-pref-v2"]="original",s.extendParams(r)}n.go("sign-up")},e.isAuthenticated=l.isAuthenticated(),e.isAuthenticated){var g=l.getSignupState();e.isRegistered=g===c.registered}e.$on(o.recipePageUpdated,function(){u.view(n.$current.data.pageTitle,{recipeId:e.recipePage.recipe}),d.trackProductRecipeVisit(e.recipePage),i.setImage(e.recipePage.platedPhoto),i.setTitle("Green Chef: "+e.recipePage.shortName),i.setDescription(e.recipePage.blurb),m()})}]).controller("RecipeSummaryCtl",["$scope","Alerts","$rootScope","$location","tracker",function(e,n,t,r,a){n.init(e),t.socialShareUrl=r.protocol()+"://greenchef.com"+r.path(),e.socialShareText="I'm cooking "+encodeURIComponent(e.recipePage.shortName)+" with Green Chef "+t.socialShareUrl,e.readMoreCallback=function(e){e&&a.click("recipereadmore")},e.shareEmail=function(){a.click("share/email")},e.shareFacebook=function(){a.click("share/facebook")},e.shareTwitter=function(){a.click("share/twitter")},e.shareGoogle=function(){a.click("share/google")},e.sharePinterest=function(){a.click("share/pinterest")}}]).controller("RelatedRecipesCtl",["$scope","RecipePages","Alerts","RECIPE_PAGE_EVENTS","tracker",function(e,n,t,r,a){t.init(e),e.$on(r.recipePageUpdated,function(){n.getRelatedRecipes(e,t)}),e.moreRecipes=function(){a.click("more recipes")}}]).controller("RecipeNutritionCtl",["$scope","RecipePages","Alerts","RECIPE_PAGE_EVENTS",function(e,n,t,r){function a(){function n(e){return _.reduce(e,function(e,n){var t=0;return n.originalUnits&&(t=n.originalUnits.amount),e+parseInt(t)},0)}function t(e){return _.map(e,function(e){return e.name&&!e.extendedIngredients?e.name:!e.name&&e.extendedIngredients?e.extendedIngredients:e.name+" ["+e.extendedIngredients+"]"}).join(", ")}var r=[],a=_.filter(e.recipePage.ingredients,function(e){return!e.isHidden&&"header"!==e.ingredientType});_.forEach(a,function(e){var t={};t.name=e.name,t.weight=n(e.items),t.items=_(e.items).map(function(e){return{name:e.name,weight:e.originalUnits.amount,extendedIngredients:e.extendedIngredients||""}}).filter(function(e){return!!e.name||!!e.extendedIngredients}).sortBy("weight").reverse().value(),r.push(t)}),e.unificationIngredients=_.map(r,function(e){var n="<strong>"+e.name+"</strong>";return _.size(e.items)>=1&&(n+=" ("+t(e.items)+")"),n}).join(", ")}e.$on(r.recipePageUpdated,function(){e.nutrition=e.recipePage.nutrition,a()})}]).controller("ModalInstanceCtrl",["$scope","$modalInstance","steps","title",function(e,n,t,r){e.title=r,e.steps=t,e.cancel=function(){n.dismiss("cancel")},e.getCurrentIndex=function(){return _.findIndex(e.steps,{active:!0})},e.showPrevious=function(){e.$$childTail.prev()},e.showNext=function(){e.$$childTail.next()},e.$watch("steps",function(n){n&&(e.currentIndex=e.getCurrentIndex())},!0)}]),angular.module("greenchef.reset-password",["ui.router"]).config(["$stateProvider","$urlRouterProvider","ABTestProvider","AB_TEST_KEY",function(e,n,t,r){t.isVersion([r.splashHome]);e.state("recover-password",{url:"/recover",views:{main:{controller:"ResetPasswordCtl",templateUrl:"password-reset/0-send-reset-email.tpl.html"}},data:{pageTitle:"Reset Password"}}).state("reset-sent",{url:"/reset/sent",views:{main:{controller:"ResetPasswordCtl",templateUrl:"password-reset/1-reset-email-sent.tpl.html"}},data:{pageTitle:"Reset Password"}}).state("reset",{url:"/reset/:resetToken",views:{main:{controller:"ResetPasswordCtl",templateUrl:"password-reset/2-enter-new-password.tpl.html"}},data:{pageTitle:"Enter New Password"}})}]).controller("ResetPasswordCtl",["$window","$rootScope","$scope","$state","$modal","$stateParams","Alerts","PublicAPI","AuthService","SIGNUP_STATE",function(e,n,t,r,a,o,i,s,l,c){l.getSignupState()==c.registered&&r.go("my-account"),i.init(t),t.resetSubmitted=!1,t.changeSubmitted=!1,t.submitReset=function(e){i.clear(t),t.resetSubmitted=!0,e.$valid&&l.sendPasswordReset(t.email,function(){r.go("reset-sent")},function(e,n){t.resetSubmitted=!1,i.error(t,n)})},t.submitPassword=function(e){i.clear(t),t.changeSubmitted=!0,e.$valid&&l.changePassword(o.resetToken,t.password,function(){r.go("sign-in.done-password-reset")},function(e,n){t.changeSubmitted=!1,i.error(t,n)})},t.getError=function(e){if(angular.isDefined(e)){if(e.required)return"Required";if(e.email)return"Invalid email";if(e.pattern)return"Invalid zip code";if(e.number)return"Invalid zip code";if(e.match)return"Passwords must match"
}}}]),angular.module("greenchef.referral-landing",["ui.router","ui.bootstrap"]).config(function(){function e(e){e.state("referred",{url:"/referral-get-started",resolve:{},views:{main:{controller:"ReferralLandingCtrl",templateUrl:"referral/referral-landing.tpl.html"}},data:{pageTitle:"Referral"}})}return e.$inject=["$stateProvider"],e}()).controller("ReferralLandingCtrl",function(){function e(){}return e.$inject=["$scope"],e}()),angular.module("greenchef.sharebuttons",[]).directive("sharebuttons",function(){return{restrict:"E",replace:!0,controller:function(){function e(e,n,t,r){var a={};n.all("referrals").customGET().then(function(n){e.linkData=a=n},function(){})["finally"](function(){r.getUserInfo().then(function(n){t.init(e,a,n)})})}return e.$inject=["$scope","GreenchefAPI","SocialSharingService","AuthService"],e}(),templateUrl:"share-buttons/share-buttons.tpl.html"}}),angular.module("greenchef.banners",["legalupdate","greenchef"]).directive("gcDiscountBanner",["ABTest",function(){return{restrict:"E",scope:{},templateUrl:"shared/v3.discount-banner.tpl.html",controller:function(){function e(e,n,t,r,a,o,i,s,l,c){function u(){e.signupBanner=t.includes("sign-up")||t.includes("sign-up-v2")?!0:!1,e.showBanner=!(!e.coupon||a.isDoneSignup()||t.includes("sign-in")||t.includes("sign-up-coupon")||t.includes("sign-up-holiday")||t.includes("sign-up-groupon")||t.includes("sign-up-livingsocial")||t.includes("my-account")||t.includes("vegan")||t.includes("keto-landing")||t.includes("sign-up-gilt")||t.includes("press-vegan")||t.includes("family-landing")),c.$broadcast(l.bannerUpdated,{showBanner:e.showBanner})}function d(t){if(e.showBanner&&!e.firstVisit&&!e.notext)return n(function(){e.notext=!0,n(function(){d(t)},1e3)},500),void 0;if(e.notext=!1,!t){var r=i.getVersion();return"omaha"===r&&(e.message=e.signupMessage="Enter your coupon code during signup to claim your Daily Deal Omaha",e.showButton=!0),void 0}e.coupon=t,e.message=t.message,e.signupMessage=t.signupMessage,e.showButton=t.valid,e.firstVisit=!1,u()}e.firstVisit=!0,e.signupBanner=!1,e.showBanner=!1,e.$on("$stateChangeSuccess",u),e.$on(o.userStatusUpdated,u),e.clickBanner=function(){e.showBanner&&!e.signupBanner&&(t.go("sign-up"),s.signUpStart(e.message),s.click("coup_banner",{couponId:e.coupon.couponId}))},r.getCouponData(d,e)}return e.$inject=["$scope","$timeout","$state","PaymentService","AuthService","AUTH_EVENTS","ABTest","tracker","BANNER_STATE","$rootScope"],e}(),link:function(){function e(e,n,t){e.signupBanner=""===t.signupBanner?!0:!1}return e}()}}]).directive("gcEmailCaptureBanner",function(){return{restrict:"E",scope:{},templateUrl:"shared/v2.email-capture-banner.tpl.html",controller:function(){function e(e,n,t,r,a,o,i,s,l,c,u){function d(){e.inSignup=n.includes("sign-up")?!0:!1,e.inSignup&&"congrats"==e.page&&!e.closed&&e.redeemNow(),e.showBanner=!(e.closed||!t.enableEmailCapture()||e.inSignup&&"start"!=e.page||r.isDoneSignup()||n.includes("sign-in")||n.includes("my-account"))}e.showBanner=!1,e.inSignup=!1,e.closed=!1,e.page="start",e.params={email:""},l.init(e),d(),e.$on("$stateChangeSuccess",d),e.$on(a.userStatusUpdated,d),e.submitEmail=function(n){if(l.clear(e),n.$invalid){var t="";return n.email.$error&&(n.email.$error.required?t+="Please enter an email.  ":n.email.$error.email&&(t+="Please enter a valid email.  ")),l.error(e,t),c.error("email-capture-form/invalid-field",{msg:t}),void 0}o.all("subscribeToEmail").customPOST(e.params).then(function(){e.page="congrats",s.setCapturedEmail(e.params.email),u.trackSubscribeToEmail(),window.scrollTo(0,0)})["catch"](function(e){console.log(e)})},e.redeemNow=function(){e.closed=!0,d(),i.setCoupon("4FREEMOBILE"),n.go("sign-up")},e.close=function(){e.closed=!0,d()}}return e.$inject=["$scope","$state","ABTest","AuthService","AUTH_EVENTS","PublicAPI","PaymentService","EmailCaptureService","Alerts","tracker","ConversionTracking"],e}(),link:function(){function e(){}return e}()}}).factory("EmailCaptureService",function(){var e=null;return{setCapturedEmail:function(){function n(n){e={email:n}}return n}(),getCapturedEmail:function(){function n(){return e}return n}()}}),angular.module("greenchef").directive("gcPressLogos",function(){return{restrict:"E",scope:{},templateUrl:"shared/press-logos.tpl.html",controller:PressLogosCtrl}}),angular.module("greenchef.sign-in",["ui.router","ui.bootstrap"]).config(["$stateProvider",function(e){e.state("sign-in",{url:"/sign-in",resolve:{redirect:function(){function e(e,n,t,r){var a=r.defer();return e.isAuthenticated()?t.$evalAsync(function(){n.gotoMyAccount(),a.reject()}):a.resolve(),a.promise}return e.$inject=["AuthService","AccountService","$rootScope","$q"],e}()},views:{main:{controller:"SigninCtl",templateUrl:"sign-in/sign-in.tpl.html"}},data:{pageTitle:"Sign In"}}).state("sign-in.timeout",{url:"/timeout",data:{autoscroll:!0}}).state("sign-in.auth-required",{url:"/login-required"}).state("sign-in.done-password-reset",{url:"/reset"})}]).controller("SigninCtl",["$modal","$rootScope","$scope","$state","$window","SIGNUP_STATE","AccountService","Alerts","AuthService","PaymentService","PublicAPI","tracker",function(e,n,t,r,a,o,i,s,l,c,u,d){t.authInfo={},t.remember=!0,s.init(t),r.is("sign-in.timeout")?s.error(t,"Please sign in again.  Your session has expired."):r.is("sign-in.auth-required")?s.yellow(t,"Please sign in to access your account."):r.is("sign-in.done-password-reset")&&s.yellow(t,"Your password has been changed.  Please sign in below to access your account."),t.signIn=function(p,m){s.clear(t),t.redirectLeadUserToPrefs=function(n){var a=e.open({templateUrl:"password-reset/3-reset-redirects-preferences.tpl.html",windowClass:"redirect-lead-user-modal",scope:t});t.closeResumeModal=function(){a.close()},t.resumeSignUpModal=function(){a.close();var e={email:n,signupState:o.lead};r.go("sign-up-v2.welcome",e)}},l.signIn(a,u,t.authInfo,t.remember,function(){!!c.getCouponData();(!c.getCouponData()||c.isDefaultCoupon())&&c.fetchCouponFromUser(),n="logged in",l.isDoneSignup()?"desktop"===m?i.gotoMyAccount():i.gotoMyAccount(!0):r.go("sign-up")},function(e,n){return p.$submitted=!1,401===e&&n&&n.signupState&&n.signupState===o.lead?(t.redirectLeadUserToPrefs(n.email),void 0):(s.error(t,"Invalid email or password"),d.error("sign-in-error",{status:e,message:n}),void 0)})}}]),function(){function e(){var e=moment("2017-08-28").format(),n="20170828",t="20150511";this.$get=function(){return{changeDate:e,currentChange:n,previousChange:t}}}angular.module("legalupdate",[]).provider("LegalUpdate",e)}(),function(){function e(e,n){var t=this;t.LegalUpdate=n,t.version=e.version}e.$inject=["$stateParams","LegalUpdate"],angular.module("greenchef.terms").controller("TermsCtrl",e)}(),angular.module("greenchef.sign-up").service("SignupDataService",["CookieService","localStorageService",function(e,n){function t(e){return s(e)?l(e):v[e]||d(e)}function r(e,n){s(e)?c(e,n):(v[e]=n,p())}function a(){v={},p()}function o(){u()}function i(){o(),a()}function s(e){return!!m[e]}function l(n){var t=e.getCookie(g);return f=t?JSON.parse(t):{},f[m[n]]}function c(n,t){var r=e.getCookie(g);f=r?JSON.parse(r):{},f[m[n]]=t,e.setCookie(g,JSON.stringify(f),60,!0)}function u(){return e.deleteCookie(g)}function d(e){return(n.get(h)||{})[e]}function p(){n.set(h,v)}var m={email:"em",zipCode:"zp",addressType:"at",deliveryWindow:"dd",firstName:"fn",lastName:"ln",addressLine1:"a1",addressLine2:"a2",city:"ct",state:"st",phoneNumber:"ph"},g="gc_suf",f={},h="nuf2",v={};return{getField:t,setField:r,isUserField:s,clearAllUserData:o,clearAllNonuserData:a,resetAllData:i}}]),angular.module("greenchef.sign-up").constant("SIGNUP_FLOW_DEFAULT_FLOW_ID","default").constant("SIGNUP_FLOW_MAP",{"default":{startState:"sign-up-v2.welcome",stateSettings:{"sign-up-v2.welcome":{name:"Welcome",previousStates:[],nextState:"sign-up-v2.preferences"},"sign-up-v2.preferences":{name:"Preferences",previousStates:["sign-up-v2.welcome"],nextState:"sign-up-v2.shipping",requiredFields:["signUpInfo","shippingDates"]},"sign-up-v2.shipping":{name:"Shipping",previousStates:["sign-up-v2.welcome","sign-up-v2.preferences"],nextState:"sign-up-v2.payment",requiredFields:["signUpInfo","order","nextShippingDates"]},"sign-up-v2.payment":{name:"Checkout",previousStates:["sign-up-v2.welcome","sign-up-v2.preferences","sign-up-v2.shipping"],nextState:"sign-up-v2.thank-you",requiredFields:["signUpInfo","order","nextShippingDates"]},"sign-up-v2.thank-you":{}}},emailZipHome:{startState:"home",stateSettings:{home:{previousStates:[],nextState:"sign-up-v2.preferences"},"sign-up-v2.preferences":{name:"Preferences",previousStates:["home"],nextState:"sign-up-v2.shipping",requiredFields:["signUpInfo","shippingDates"]},"sign-up-v2.shipping":{name:"Shipping",previousStates:["home","sign-up-v2.preferences"],nextState:"sign-up-v2.payment",requiredFields:["signUpInfo","order","nextShippingDates"]},"sign-up-v2.payment":{name:"Payment",previousStates:["home","sign-up-v2.preferences","sign-up-v2.shipping"],nextState:"sign-up-v2.thank-you",requiredFields:["signUpInfo","order","nextShippingDates"]},"sign-up-v2.thank-you":{}}},skippedPreference:{startState:"sign-up-v2.welcome",stateSettings:{"sign-up-v2.welcome":{name:"Welcome",previousStates:[],nextState:"sign-up-v2.shipping"},"sign-up-v2.shipping":{name:"Shipping",previousStates:["sign-up-v2.welcome"],nextState:"sign-up-v2.payment",requiredFields:["signUpInfo","order","shippingDates","selectedMealPlan"]},"sign-up-v2.payment":{name:"Payment",previousStates:["sign-up-v2.welcome","sign-up-v2.shipping"],nextState:"sign-up-v2.thank-you",requiredFields:["signUpInfo","order","nextShippingDates"]},"sign-up-v2.thank-you":{}}},selectedMeal:{startState:"sign-up-v2.welcome",stateSettings:{"sign-up-v2.welcome":{name:"Welcome",previousStates:[],nextState:"sign-up-v2.preferences"},"sign-up-v2.preferences":{name:"Preferences",nextState:"sign-up-v2.shipping",previousStates:["sign-up-v2.welcome"],requiredFields:["signUpInfo","shippingDates","selectedMealPlan"]},"sign-up-v2.shipping":{name:"Shipping",previousStates:["sign-up-v2.welcome","sign-up-v2.preferences"],nextState:"sign-up-v2.payment",requiredFields:["signUpInfo","order","nextShippingDates"]},"sign-up-v2.payment":{name:"Payment",previousStates:["sign-up-v2.welcome","sign-up-v2.preferences","sign-up-v2.shipping"],nextState:"sign-up-v2.thank-you",requiredFields:["signUpInfo","order","nextShippingDates"]},"sign-up-v2.thank-you":{}}},swapWelcomePreferences:{startState:"sign-up-v2.preferences",stateSettings:{"sign-up-v2.preferences":{name:"Preferences",nextState:"sign-up-v2.welcome"},"sign-up-v2.welcome":{name:"Email + Zip",nextState:"sign-up-v2.shipping",requiredFields:["order"]},"sign-up-v2.shipping":{name:"Shipping",nextState:"sign-up-v2.payment",requiredFields:["signUpInfo","order","shippingDates"]},"sign-up-v2.payment":{name:"Payment",nextState:"sign-up-v2.thank-you",requiredFields:["signUpInfo","order","nextShippingDates"]},"sign-up-v2.thank-you":{}}}}).service("SignupFlowService",["$log","$state","SignupDataService","SIGNUP_FLOW_MAP","SIGNUP_FLOW_DEFAULT_FLOW_ID",function(e,n,t,r,a){function o(e){for(var n=s(),t=[],r=n.startState,a=null,o=null;null!=r;)a=n.stateSettings[r],a?(o=a.name,o&&(r===e?t.push({name:o,stateName:r,active:!0,clickable:!1}):t.push({name:o,stateName:r,clickable:n.stateSettings[e].previousStates?n.stateSettings[e].previousStates.includes(r):!1})),r=a.nextState):r=null;return t}function i(){return f}function s(){return f=f||t.getField("flowId"),f&&r.hasOwnProperty(f)||l(a),r[f]}function l(e,n){n||t.clearAllNonuserData(),f=r.hasOwnProperty(e)?e:a,t.setField("flowId",f)}function c(e){var n=s();return e&&n.stateSettings.hasOwnProperty(e)?n.stateSettings[e].nextState:n.startState}function u(e){var n=s();return e&&n.stateSettings.hasOwnProperty(e)?n.stateSettings[e]:null}function d(){return n.go(c())}function p(){return n.go(c(n.current.parent||n.current.name))["catch"](function(n){e.error("SUF Service - Fail to advance to next state: "+n)})}function m(e,t){var r=s(),a=g(e,t,r);a&&n.go(a)}function g(e,n,t){return e&&t.stateSettings.hasOwnProperty(e)?n&&t.stateSettings.hasOwnProperty(n)&&t.stateSettings[e].previousStates.includes(n)?n:void 0:t.stateSettings.startState}var f=null;return{advance:p,getBreadcrumb:o,getUserFlow:i,getCurrentStateSettings:u,goToStep:m,resetSignupFlow:d,setUserSignupFlow:l}}]),angular.module("greenchef.sign-up").config(["$stateProvider","$urlRouterProvider","ABTestProvider",function(e,n,t){var r={testVersion:t.getVersion()};e.state("sign-up-splash",{parent:"sign-up-v2.welcome",url:"^/sign-up-splash"}).state("sign-up",{parent:"sign-up-v2.welcome",url:"^/sign-up"}).state("sign-up-v2",{"abstract":!0,url:"/sign-up-v2",views:{main:{controller:"SignupCtl2",templateUrl:"sign-up/sign-up.tpl.html"}},data:{pageTitle:"Sign-Up",trackerParams:r}})}]).controller("SignupCtl2",SignupCtl2),angular.module("greenchef.unskipPopup",["ui.bootstrap"]).controller("UnskipPopupController",UnskipPopupController).directive("recipecard",recipecard),angular.module("greenchef.unskipSuccessPopup",["ui.bootstrap"]).controller("UnskipSuccessPopupController",UnskipSuccessPopupController),angular.module("greenchef.unsubscribe",[]).config(function(){function e(e){e.state("unsubscribe",{url:"/unsubscribe",views:{main:{controller:"UnsubscribeCtrl",templateUrl:"unsubscribe/unsubscribe.tpl.html"}},data:{pageTitle:"Unsubscribe Email"}})}return e.$inject=["$stateProvider"],e}()).controller("UnsubscribeCtrl",function(){function e(e,n,t){e.unsubscribe=function(r){if(t.click("unsub_unsubscribeemails"),e.isError=e.unsubscribeSuccessful=!1,!r.$valid)return _.isEmpty(e.email)||(e.isError=!0),r.$submitted=!1,void 0;var a={email:e.email,unsubscribedChannelIds:[1544,749,747,624]};n.all("updateSubscriptions").post(a).then(function(){e.unsubscribeSuccessful=!0,r.$submitted=!1},function(n){e.isError=!0,r.$submitted=!1,404!==n.status&&console.log(n.data)})},e.learnMore=function(){t.click("unsub_learnmore")},e.onTheMenu=function(){t.click("unsub_onthemenu")}}return e.$inject=["$scope","PublicAPI","tracker"],e}()),angular.module("greenchef.vegan",["ui.router","plusOne"]).config(["$stateProvider",function(e){e.state("vegan",{url:"/vegan_landing",views:{main:{controller:"VeganCtrl",templateUrl:"vegan/v3.vegan.tpl.html"}},data:{pageTitle:"Healthy Meal Kit Delivery Service",loggingTitle:"vegan_home"}}).state("family-landing",{url:"/family_landing",views:{main:{controller:"VeganCtrl",templateUrl:"vegan/v3.family-landing.tpl.html"}},data:{pageTitle:"Healthy Meal Kit Delivery Service",loggingTitle:"family_home"}})}]).controller("VeganCtrl",function(){function e(){}return e.$inject=["$scope"],e}()),angular.module("plusOne",[]).directive("plusOne",function(){return{link:function(){function e(e,n){gapi.plusone.render(n[0],{size:"medium",href:"http://bit.ly/ngBoilerplate"})}return e}()}}),function(){angular.module("greenchef.home").controller("EmailZipSignupFormController",["$scope","Alerts","ConversionTracking","SignupFlowService","SignupDataService","tracker","WelcomeFormService","SIGNUP_ERROR_CODES",function(e,n,t,r,a,o,i,s){n.init(e),e.showPopUp=!1,e.signUpInfo={tests:{}},e.submitStart=function(t){return n.clear(e),r.setUserSignupFlow("emailZipHome"),e.startSubmitted=!0,t.$invalid?(o.error("signup2-invalid-field"),void 0):(e.formSubmitting=!0,i.processStartForm(e.signUpInfo)["catch"](function(t){e.showPopUp=!0,t===s.ERR_NODELIVERY?n.error(e,"Darn! Looks like we don’t currently deliver to that zip code."):t===s.ERR_INVALID_ZIPCODE?n.error(e,t.message):t===s.ERR_EMAILEXISTS?n.error(e,"The email address is already taken. <a href ui-sref='sign-in'>Please sign in or use a different email address.</a>"):n.error(e,"Could not sign up. Please try again later."),e.formSubmitting=!1}),void 0)},e.togglePopup=function(){e.showPopUp=!e.showPopUp}}]).directive("gcEmailZipSignupForm",function(){return{restrict:"E",scope:{clickEvent:"@"},templateUrl:"home/emailZipSignup/email-zip-signup-form.tpl.html",controller:"EmailZipSignupFormController"}})}(),angular.module("greenchef.paleo-ad",["ui.router"]).config(["$stateProvider",function(e){e.state("paleo-ad",{url:"/paleoad",resolve:{performABTest:function(){function e(e,n,t,r){var a=r.defer();return e.getOrSetABTest(t).then(function(e){return n.go(e),a.reject(),a.promise})}return e.$inject=["ABTest","$state","AB_PALEO_AD","$q"],e}()},data:{pageTitle:"Paleo Ad",loggingTitle:"paleo_ad"}})}]),angular.module("greenchef.paleo-landing").controller("PaleoLandingCtrl",["$scope","price","ABTest","LandingPageService","menusLandingService",function(e,n,t,r,a){$.stellar("refresh"),e.getPriceInteger=a.getPriceInteger,e.getPriceDecimal=a.getPriceDecimal,e.mealPlan="paleo",e.price=n,e.getStarted=function(){return r.startMealPlanFlow(e.mealPlan)},e.introduction={title:"Perfectly Paleo",desc:"Eat like a fancy caveman. Green Chef delivers all you need to cook incredible paleo meals, including organic ingredients and easy recipes.",descMobile:"Green Chef delivers all you need to cook paleo meals, including organic ingredients and easy recipes.",btnText:"Start Paleo Plan"},e.differently={title:"Leave the hunting and gathering to us.",data:[{title:"always paleo",desc:"No gluten, grains, dairy, dried legumes, nightshade potatoes, refined sugars, soy, GMOs, synthetics, or hormones.",url:"//cdn.greenchef.com/assets/MenusLanding/Differents/paleoicon-1@1x.648a533b.png",urlRetina:"//cdn.greenchef.com/assets/MenusLanding/Differents/paleoicon-1@2x.dfb0d62e.png",urlMobile:"//cdn.greenchef.com/assets/MenusLanding/Differents/paleoicon-1_mobile@1x.e9978636.png",urlMobileRetina:"//cdn.greenchef.com/assets/MenusLanding/Differents/paleoicon-1_mobile@2x.6b2395bd.png"},{title:"always premium",desc:"We select the best possible foods for building your body, from quality animal proteins to organic produce.",url:"//cdn.greenchef.com/assets/MenusLanding/Differents/paleoicon-2@1x.f04d6714.png",urlRetina:"//cdn.greenchef.com/assets/MenusLanding/Differents/paleoicon-2@2x.f0e92889.png",urlMobile:"//cdn.greenchef.com/assets/MenusLanding/Differents/paleoicon-2_mobile@1x.2acb5323.png",urlMobileRetina:"//cdn.greenchef.com/assets/MenusLanding/Differents/paleoicon-2_mobile@2x.9f0355eb.png"},{title:"never boring",desc:"We think outside the cave when it comes to flavor and ingredients, with new and varied recipes each week.",url:"//cdn.greenchef.com/assets/MenusLanding/Differents/paleoicon-3@1x.faa02cc5.png",urlRetina:"//cdn.greenchef.com/assets/MenusLanding/Differents/paleoicon-3@2x.6b6130c6.png",urlMobile:"//cdn.greenchef.com/assets/MenusLanding/Differents/paleoicon-3_mobile@1x.2f120a2d.png",urlMobileRetina:"//cdn.greenchef.com/assets/MenusLanding/Differents/paleoicon-3_mobile@2x.6cc892f4.png"}]},e.knowMore={title:"Want to know more?",data:[{title:"How much does the paleo plan cost?",desc:"$"+n+" per serving (+$5.99 shipping per delivery). Each weekly delivery includes 3 dinners for 2 people (6 servings total). Pricing and servings may differ if you choose one of our many other meal plans.",isClose:!0,clickEvent:"q_paleoplancost"},{title:"Is paleo for me?",desc:"Paleo is perfect for anyone who wants to eat gluten-free, dairy-free, or soy-free. Our paleo meals are also low in sugar and high in protein.",isClose:!0,clickEvent:"q_paleoforme"},{title:"Where do you deliver?",desc:"Green Chef delivers almost everywhere in the continental United States. We are currently unable to deliver to Alaska, Hawaii, and parts of Louisiana. If we're not yet in your neighborhood, simply create an account to be notified when we deliver to your area.",isClose:!0,clickEvent:"q_wheredeliver"},{title:"Is there a minimum commitment?",desc:"There are no commitments. You can skip an order, make changes to your preferences, or cancel your subscription before the weekly cutoff time (12 pm ET, 7 days before the scheduled delivery date).",isClose:!0,clickEvent:"q_minimumcommit"},{title:"Is your packaging eco-friendly?",desc:"All of Green Chef's packaging is recyclable, reusable, or compostable. Our packaging is also largely made of recycled materials.",isClose:!0,clickEvent:"q_skipdelivery"}]},e.lovedMeals=[{description:'Seared, herb-seasoned tuna topped by tangy gremolata. Served alongside coconutty cauliflower "rice" and roasted kabocha squash with tomatoes.',descriptionShort:'Seared tuna topped by gremolata. Served with cauliflower "rice", roasted squash & tomatoes.',mealImages:{desktop:"//cdn.greenchef.com/assets/MenusLanding/Meals/Paleo/mediterranean-tuna@1x.3d4d63fd.png",desktopRetina:"//cdn.greenchef.com/assets/MenusLanding/Meals/Paleo/mediterranean-tuna@2x.c04b9836.png"},name:"Mediterranean Tuna",quote:{author:{images:{desktop:"//cdn.greenchef.com/assets/MenusLanding/Authors/Paleo/Desktop/nicky-boyd-1@1x.8bca3f70.png",desktopRetina:"//cdn.greenchef.com/assets/MenusLanding/Authors/Paleo/Desktop/nicky-boyd-1@2x.a9c05c2e.png",mobile:"//cdn.greenchef.com/assets/MenusLanding/Authors/Paleo/Mobile/nicky-boyd-1@1x.38433ac2.png",mobileRetina:"//cdn.greenchef.com/assets/MenusLanding/Authors/Paleo/Mobile/nicky-boyd-1@2x.ee44050e.png"},name:"Nicky Boyd"},content:"Delicious, easy and healthy&#33;&#33;&#33;&#33; Thank you for making dinner quick and simple @greenchef"}},{description:"Savory pork chops served over roasted Brussels sprouts with crispy bacon and pears for sweetness. Lemon-dressed arugula salad adds bright notes.",descriptionShort:"Savory pork chops served with Brussels sprouts, bacon & pears, plus lemon-dressed salad.",mealImages:{desktop:"//cdn.greenchef.com/assets/MenusLanding/Meals/Paleo/sage-pork-chops@1x.40adb538.png",desktopRetina:"//cdn.greenchef.com/assets/MenusLanding/Meals/Paleo/sage-pork-chops@2x.da002a16.png"},name:"Sage-Roasted Pork Chops",quote:{author:{images:{desktop:"//cdn.greenchef.com/assets/MenusLanding/Authors/Paleo/Desktop/nicky-boyd-2@1x.8bca3f70.png",desktopRetina:"//cdn.greenchef.com/assets/MenusLanding/Authors/Paleo/Desktop/nicky-boyd-2@2x.a9c05c2e.png",mobile:"//cdn.greenchef.com/assets/MenusLanding/Authors/Paleo/Mobile/nicky-boyd-2@1x.38433ac2.png",mobileRetina:"//cdn.greenchef.com/assets/MenusLanding/Authors/Paleo/Mobile/nicky-boyd-2@2x.ee44050e.png"},name:"Nicky Boyd"},content:"Brussels sprouts, pear and bacon...so good&#33;&#33;&#33;&#33; The pork chops turned out perfectly and a crisp arugula salad on the side. Delicious&#33;&#33;&#33; #dinnervictory@greenchef"}},{description:"Drumsticks roasted in Dijon-maple sauce, served with spiced parsnip fries. Plus cabbage slaw with snap peas, cranberries, and herb vinaigrette.",descriptionShort:"Dijon-maple drumsticks roasted with parsnip fries, plus cabbage, snap pea & cranberry slaw.",mealImages:{desktop:"//cdn.greenchef.com/assets/MenusLanding/Meals/Paleo/dijon-maple-chicken@1x.aa9eed7c.png",desktopRetina:"//cdn.greenchef.com/assets/MenusLanding/Meals/Paleo/dijon-maple-chicken@2x.98101e46.png"},name:"Dijon-Maple Chicken",quote:{author:{images:{desktop:"//cdn.greenchef.com/assets/MenusLanding/Authors/Paleo/Desktop/rad-fit-yoga@1x.891aac11.png",desktopRetina:"//cdn.greenchef.com/assets/MenusLanding/Authors/Paleo/Desktop/rad-fit-yoga@2x.5289186e.png",mobile:"//cdn.greenchef.com/assets/MenusLanding/Authors/Paleo/Mobile/rad-fit-yoga@1x.9a528d85.png",mobileRetina:"//cdn.greenchef.com/assets/MenusLanding/Authors/Paleo/Mobile/rad-fit-yoga@2x.3506bed6.png"},name:"Rad_fit_yoga"},content:"Trying out @greenchef for the first time... the slaw was the best part, I could eat that all day long."}},{description:"Rosemary-garlic sirloin steaks, seared juicy then topped with artichoke gremolata. Served alongside roasted sweet potatoes, beets, and a kale salad.",descriptionShort:"Seared steaks with artichoke gremolata. Served with roasted sweet potatoes, beets & kale.",mealImages:{desktop:"//cdn.greenchef.com/assets/MenusLanding/Meals/Paleo/rosemary-garlic-steak@1x.5162099f.png",desktopRetina:"//cdn.greenchef.com/assets/MenusLanding/Meals/Paleo/rosemary-garlic-steak@2x.d607e526.png"},name:"Rosemary-Garlic Steak",quote:{author:{images:{desktop:"//cdn.greenchef.com/assets/MenusLanding/Authors/Paleo/Desktop/catherine@1x.943b9791.png",desktopRetina:"//cdn.greenchef.com/assets/MenusLanding/Authors/Paleo/Desktop/catherine@2x.d92d8af4.png",mobile:"//cdn.greenchef.com/assets/MenusLanding/Authors/Paleo/Mobile/catherine@1x.62fa377c.png",mobileRetina:"//cdn.greenchef.com/assets/MenusLanding/Authors/Paleo/Mobile/catherine@2x.eea1e074.png"},name:"Catherine"},content:"gettinrichinthekitch#SteakSundaycourtesy of @greenchef! This dish was so cohesive and full of flavor - we loved every bite!"}},{description:"Tikka masala-spiced chicken served over sweet potatoes, bell peppers, tomatoes & snap peas sautéed in creamy coconut milk. Jalapeño adds gentle heat.",descriptionShort:"Tikka masala chicken served over sweet potatoes, tomatoes & snap peas in coconut milk.",mealImages:{desktop:"//cdn.greenchef.com/assets/MenusLanding/Meals/Paleo/chicken-tikka-masala@1x.5a363351.png",desktopRetina:"//cdn.greenchef.com/assets/MenusLanding/Meals/Paleo/chicken-tikka-masala@2x.23525d3c.png"},name:"Chicken Tikka Masala",quote:{author:{images:{desktop:"//cdn.greenchef.com/assets/MenusLanding/Authors/Paleo/Desktop/chrissy-brown@1x.39e3374a.png",desktopRetina:"//cdn.greenchef.com/assets/MenusLanding/Authors/Paleo/Desktop/chrissy-brown@2x.954055e8.png",mobile:"//cdn.greenchef.com/assets/MenusLanding/Authors/Paleo/Mobile/chrissy-brown@1x.82b56c5f.png",mobileRetina:"//cdn.greenchef.com/assets/MenusLanding/Authors/Paleo/Mobile/chrissy-brown@2x.adc7a7c8.png"},name:"Chrissy Brown"},content:"@greenchef knocked it out of the park with this one. &#128588;&#127995;The crunch from the snap peas, the kick from the jalapeños, the flavor of the sauce...yummm! &#128525;"}},{description:'Seared sirloin steaks sprinkled with sumac and sesame seeds, then topped by tahini. Served with ginger-garlic roasted veggies and cauliflower "rice".',descriptionShort:'Sirloin steaks topped by tahini, sumac & sesame, with garlicky veggies & cauliflower "rice"',mealImages:{desktop:"//cdn.greenchef.com/assets/MenusLanding/Meals/Paleo/sumac-steak@1x.3c90913d.png",desktopRetina:"//cdn.greenchef.com/assets/MenusLanding/Meals/Paleo/sumac-steak@2x.dd332de4.png"},name:"Sumac Steak",quote:{author:{images:{desktop:"//cdn.greenchef.com/assets/MenusLanding/Authors/Paleo/Desktop/cilla@1x.2027c372.png",desktopRetina:"//cdn.greenchef.com/assets/MenusLanding/Authors/Paleo/Desktop/cilla@2x.5a082ba1.png",mobile:"//cdn.greenchef.com/assets/MenusLanding/Authors/Paleo/Mobile/cilla@1x.ef58672a.png",mobileRetina:"assets/MenusLanding/Authors/Paleo/Mobile/cilla1@2x.png"},name:"Cilla"},content:"Paleo dinner for me and bae tonight. Thanks to @greenchef &#10084;&#65039;"}},{description:"Shrimp & bell peppers sautéed in Southwestern spices then piled in crisp romaine leaves. Served with jicama fries & paleo Caesar salad with green beans.",descriptionShort:"Southwestern shrimp & bell peppers in romaine cups, with jicama fries & paleo Caesar salad.",mealImages:{desktop:"//cdn.greenchef.com/assets/MenusLanding/Meals/Paleo/chipotle-shrimp-wraps@1x.e262a9ec.png",desktopRetina:"//cdn.greenchef.com/assets/MenusLanding/Meals/Paleo/chipotle-shrimp-wraps@2x.b006442b.png"},name:"Chipotle Shrimp Wraps",quote:{author:{images:{desktop:"//cdn.greenchef.com/assets/MenusLanding/Authors/Paleo/Desktop/sheila-west@1x.a26d6fd3.png",desktopRetina:"//cdn.greenchef.com/assets/MenusLanding/Authors/Paleo/Desktop/sheila-west@2x.c7cf050d.png",mobile:"//cdn.greenchef.com/assets/MenusLanding/Authors/Paleo/Mobile/sheila-west@1x.dcbb04f7.png",mobileRetina:"//cdn.greenchef.com/assets/MenusLanding/Authors/Paleo/Mobile/sheila-west@2x.4883d3de.png"},name:"Sheila West"},content:"This meal was OUTSTANDING. DH and I both loved it!"}}],e.getting=[{desc:"Convenient weekly deliveries"},{desc:"Ingredients for 3 dinners to serve 2 people"},{desc:"Easy recipes ready in about 30 minutes"},{desc:"Fresh organic ingredients, prepped and ready to cook"},{desc:"Sauces, spices, dressings, and marinades"}],e.startCooking={title:"Ready To Start Cooking?",desc:{desktop:"Eat like a fancy caveman. Green Chef delivers all you need to cook incredible paleo meals, including organic ingredients and easy recipes.",mobile:"Green Chef delivers all you need to cook paleo meals, including organic ingredients and easy recipes."},btnText:"Cook Paleo"},e.scrollTo=function(){$("body").animate({scrollTop:$(".differently").offset().top-60},"slow")}}]),angular.module("greenchef.tv-landing").controller("TvLandingCtrl",["$modal","$scope","$state","DEFAULT_TEST_VERSION","HomeDataService","URLParam",function(e,n,t,r,a,o){function i(e){e=e||r,o.extendParams({tv:e}),t.go("sign-up")}function s(){n.isFullScreen=!0,n.modalInstance=e.open({templateUrl:"landing/tv/tv-landing-modal.tpl.html",windowClass:"v3-page tv-landing-modal-video",scope:n,backdrop:"static"})}function l(){n.modalInstance&&(n.modalInstance.dismiss(),n.isFullScreen=!1)}$.stellar("refresh"),n.pressLogos=a.getPressLogos(),n.diets=a.getDiets(),n.showFullScreen=s,n.cancel=l,n.isFullScreen=!1,n.signUp=i}]),angular.module("greenchef.tv-landing").directive("videoPlayer",["Utility",function(e){return{restrict:"E",scope:{val:"="},template:'<div class="video-wrap hidden-xs"><video poster="assets/Landing/hero-image.jpg" id="bgvid" playsinline autoplay muted loop><source ng-if="urlVideo" src="{{urlVideo}}" type="video/mp4"></video></div>',link:function(){function n(n){var t=document.getElementById("bgvid");n.$watch("val",function(e){e?t.pause():t.play()}),e.isMobile()||(n.urlVideo="//cdn.greenchef.com/assets/Video/hp-background-video1.4ae3e9fa.mp4")}return n}()}}]),angular.module("greenchef.vegan-ad",["ui.router"]).config(["$stateProvider",function(e){e.state("vegan-ad",{url:"/veganad",resolve:{performABTest:function(){function e(e,n,t,r){var a=r.defer();return e.getOrSetABTest(t).then(function(e){return n.go(e),a.reject(),a.promise})}return e.$inject=["ABTest","$state","AB_VEGAN_AD","$q"],e}()},data:{pageTitle:"Vegan Ad",loggingTitle:"vegan_ad"}})}]),angular.module("greenchef.vegan-landing").controller("VeganLandingCtrl",["$scope","LandingPageService","menusLandingService","price",function(e,n,t,r){$.stellar("refresh"),e.getPriceInteger=t.getPriceInteger,e.getPriceDecimal=t.getPriceDecimal,e.mealPlan="vegan",e.price=r,e.getStarted=function(){return n.startMealPlanFlow(e.mealPlan)},e.introduction={title:"Let's Vegan",desc:"Eat thoughtfully without having to think about it. Green Chef delivers all you need to cook vegan meals, including organic ingredients and easy recipes.",descMobile:"Green Chef delivers all you need to cook vegan meals, including organic ingredients and easy recipes.",btnText:"Start Vegan Plan"},e.differently={title:"Green Chef gets vegan.",data:[{title:"surprise your palate",desc:"With new recipes each week, we're all about unexpected culinary experiences. Discover vegan tastes you've never tried before.",url:"//cdn.greenchef.com/assets/MenusLanding/Differents/veganicon-1@1x.790e7fbe.png",urlRetina:"//cdn.greenchef.com/assets/MenusLanding/Differents/veganicon-1@2x.a2acc980.png",urlMobile:"//cdn.greenchef.com/assets/MenusLanding/Differents/veganicon-1_mobile@1x.899306cf.png",urlMobileRetina:"//cdn.greenchef.com/assets/MenusLanding/Differents/veganicon-1_mobile@2x.8473bf03.png"},{title:"savor every bite",desc:"Plant-based just got even tastier. Our chefs mastermind flavorful, creative meals that delight.",url:"//cdn.greenchef.com/assets/MenusLanding/Differents/veganicon-2@1x.c2e0bc25.png",urlRetina:"//cdn.greenchef.com/assets/MenusLanding/Differents/veganicon-2@2x.89afdafc.png",urlMobile:"//cdn.greenchef.com/assets/MenusLanding/Differents/veganicon-2_mobile@1x.5f24307b.png",urlMobileRetina:"//cdn.greenchef.com/assets/MenusLanding/Differents/veganicon-2_mobile@2x.cc40b71f.png"},{title:"eat great, feel great",desc:"Every nutritious dinner is made from organic, non-GMO ingredients. Our clean, whole foods energize and satisfy.",url:"//cdn.greenchef.com/assets/MenusLanding/Differents/veganicon-3@1x.9627aa54.png",urlRetina:"//cdn.greenchef.com/assets/MenusLanding/Differents/veganicon-3@2x.0754b98b.png",urlMobile:"//cdn.greenchef.com/assets/MenusLanding/Differents/veganicon-3_mobile@1x.6b409b4a.png",urlMobileRetina:"//cdn.greenchef.com/assets/MenusLanding/Differents/veganicon-3_mobile@2x.792c6c46.png"}]},e.knowMore={title:"Want to know more?",data:[{title:"How much does the vegan plan cost?",desc:"$"+r+" per serving (+$5.99 shipping per delivery). Each weekly delivery includes 3 dinners for 2 people (6 servings total). Pricing and servings may differ if you choose one of our many other meal plans.",isClose:!0,clickEvent:"q_veganplancost"},{title:"Where do you deliver?",desc:"Green Chef delivers almost everywhere in the continental United States. We are currently unable to deliver to Alaska, Hawaii, and parts of Louisiana. If we're not yet in your neighborhood, simply create an account to be notified when we deliver to your area.",isClose:!0,clickEvent:"q_wheredeliver"},{title:"Is there a minimum commitment?",desc:"There are no commitments. You can skip an order or cancel your subscription before the weekly cutoff time (12 pm ET, 7 days before the scheduled delivery date).",isClose:!0,clickEvent:"q_minimumcommit"},{title:"Can I skip a delivery?",desc:"Yes! You can easily skip a delivery or make changes to your preferences before the weekly cutoff time (12 pm ET, 7 days before the scheduled delivery date).",isClose:!0,clickEvent:"q_skipdelivery"},{title:"Is your packaging eco-friendly?",desc:"All of Green Chef&#39;s packaging is recyclable, reusable, or compostable. Our packaging is always sustainably sourced and largely made of recycled materials.",isClose:!0,clickEvent:"q_ecofriendly"}]},e.lovedMeals=[{description:"Just-browned red lentil burgers topped with arugula, red onion, and vegan red curry mayo. Served with smoky, crispy kale chips.",descriptionShort:"Topped by arugula, red onion & vegan red curry mayo. Served with smoky, crispy kale chips.",mealImages:{desktop:"//cdn.greenchef.com/assets/MenusLanding/Meals/Vegan/red-lentil-burger@1x.47410f4e.png",desktopRetina:"//cdn.greenchef.com/assets/MenusLanding/Meals/Vegan/red-lentil-burger@2x.f35f74b9.png"},name:"Red Lentil Burger",quote:{author:{images:{desktop:"//cdn.greenchef.com/assets/MenusLanding/Authors/Vegan/Desktop/rachel@1x.462a27f9.png",desktopRetina:"//cdn.greenchef.com/assets/MenusLanding/Authors/Vegan/Desktop/rachel@2x.6c90a543.png",mobile:"//cdn.greenchef.com/assets/MenusLanding/Authors/Vegan/Mobile/danah@1x.cc70f454.png",mobileRetina:"//cdn.greenchef.com/assets/MenusLanding/Authors/Vegan/Mobile/danah@2x.31e75555.png"},name:"Rachel Redding Wilde"},content:"I just finished making this meal&#33; It is SO delicious. I cannot wait to make it again. Seriously, I am so satisfied with all of it. Kale chips rock"}},{description:"Comforting linguine mixed with garlicky butternut squash, cashew Parmesan, and mushrooms. Roasted green beans with pine nuts join on the side.",descriptionShort:'Linguine with butternut squash, mushrooms & "Parmesan," plus roasted green beans on the side.',mealImages:{desktop:"//cdn.greenchef.com/assets/MenusLanding/Meals/Vegan/butternut-squash-linguine@1x.b8429b2b.png",desktopRetina:"//cdn.greenchef.com/assets/MenusLanding/Meals/Vegan/butternut-squash-linguine@2x.39f35568.png"},name:"Butternut Squash Linguine",quote:{author:{images:{desktop:"//cdn.greenchef.com/assets/MenusLanding/Authors/Vegan/Desktop/cassondra@1x.500994fe.png",desktopRetina:"//cdn.greenchef.com/assets/MenusLanding/Authors/Vegan/Desktop/cassondra@2x.c4746a2d.png",mobile:"//cdn.greenchef.com/assets/MenusLanding/Authors/Vegan/Mobile/cassondra@1x.2fa1c804.png",mobileRetina:"//cdn.greenchef.com/assets/MenusLanding/Authors/Vegan/Mobile/cassondra@2x.91930ca9.png"},name:"Cassondra Yarlott"},content:"I just made this. It was so good. Definitely one of the best meals I&#39;ve had from a meal delivery service."}},{description:"A hearty stew of butternut squash, hominy, chili-spiced tomatoes, pinto beans, and kale, served with oven-warmed tortillas.",descriptionShort:"A hearty stew of butternut squash, hominy, pinto beans & kale, served with warm tortillas.",mealImages:{desktop:"//cdn.greenchef.com/assets/MenusLanding/Meals/Vegan/hominy-stew@1x.b4d23741.png",desktopRetina:"//cdn.greenchef.com/assets/MenusLanding/Meals/Vegan/hominy-stew@2x.eba96fd5.png"},name:"Hominy Stew",quote:{author:{images:{desktop:"//cdn.greenchef.com/assets/MenusLanding/Authors/Vegan/Desktop/naomi@1x.b33c935d.png",desktopRetina:"//cdn.greenchef.com/assets/MenusLanding/Authors/Vegan/Desktop/naomi@2x.0fd76e0a.png",mobile:"//cdn.greenchef.com/assets/MenusLanding/Authors/Vegan/Mobile/naomi@1x.d1682551.png",mobileRetina:"//cdn.greenchef.com/assets/MenusLanding/Authors/Vegan/Mobile/naomi@2x.88f839e5.png"},name:"Naomi Mac Ross"},content:"Combating the polar vortex with a piping hot bowl of spicy bean and hominy stew, another @greenchef winner &#128538;&#128076;&#10052;&#65039;"}},{description:"Paprika-spiced black-eyed pea patties served with roasted sweet potatoes, sautéed chard and mustard greens, and tangy-sweet corn relish.",descriptionShort:"Spiced black-eyed pea patties with roasted sweet potatoes, sautéed greens & corn relish.",mealImages:{desktop:"//cdn.greenchef.com/assets/MenusLanding/Meals/Vegan/black-eyed-pea-patties@1x.5aaf0411.png",desktopRetina:"//cdn.greenchef.com/assets/MenusLanding/Meals/Vegan/black-eyed-pea-patties@2x.e3c14d05.png"},name:"Black-Eyed Pea Patties",quote:{author:{images:{desktop:"//cdn.greenchef.com/assets/MenusLanding/Authors/Vegan/Desktop/ashharrel@1x.c0b42d5c.png",desktopRetina:"//cdn.greenchef.com/assets/MenusLanding/Authors/Vegan/Desktop/ashharrel@2x.f20eaca8.png",mobile:"//cdn.greenchef.com/assets/MenusLanding/Authors/Vegan/Mobile/ashharrel@1x.1cfa5814.png",mobileRetina:"assets/MenusLanding/Authors/Vegan/Mobile/ashharrel-l@2x.png"},name:"ashharrel"},content:"I almost feel like I&#39;m in California again&#33; Black-eyed pea patties with corn relish, sweet potatoes and sautéed greens."}},{description:"A slow-cooked casserole with chorizo seitan, mushrooms, carrots, kale, and cannellini beans. Homemade croutons add crunch on top.",descriptionShort:"A casserole with chorizo seitan, mushrooms & cannellini beans, plus crunchy croutons on top.",mealImages:{desktop:"//cdn.greenchef.com/assets/MenusLanding/Meals/Vegan/chorizo-seitan-cassoulet@1x.fbd819cc.png",desktopRetina:"//cdn.greenchef.com/assets/MenusLanding/Meals/Vegan/chorizo-seitan-cassoulet@2x.3296aee6.png"},name:"Chorizo Seitan Cassoulet",quote:{author:{images:{desktop:"//cdn.greenchef.com/assets/MenusLanding/Authors/Vegan/Desktop/laural-l@1x.65ae28b5.png",desktopRetina:"//cdn.greenchef.com/assets/MenusLanding/Authors/Vegan/Desktop/laural-l@2x.1a2b4171.png",mobile:"//cdn.greenchef.com/assets/MenusLanding/Authors/Vegan/Mobile/laural-l@1x.f7d6d730.png",mobileRetina:"//cdn.greenchef.com/assets/MenusLanding/Authors/Vegan/Mobile/laural-l@2x.0a90369f.png"},name:"LauraL"},content:"love that the Green Chef boxes make it easy to get veggies in this time of year, when I usually feel uninspired."}},{description:"Soba noodles meet sautéed shiitakes, bell peppers, ginger, cabbage, and edamame. Dressed in ponzu vinaigrette and topped by sesame seeds and scallions.",descriptionShort:"Soba noodles meet sautéed shiitakes, bell peppers, ginger, edamame & ponzu vinaigrette.",mealImages:{desktop:"//cdn.greenchef.com/assets/MenusLanding/Meals/Vegan/ginger-tamari-noodle-bowl@1x.cbef44ca.png",desktopRetina:"//cdn.greenchef.com/assets/MenusLanding/Meals/Vegan/ginger-tamari-noodle-bowl@2x.0a218d21.png"},name:"Ginger-Tamari Noodle Bowl",quote:{author:{images:{desktop:"//cdn.greenchef.com/assets/MenusLanding/Authors/Vegan/Desktop/annambanks@1x.7e8a7926.png",desktopRetina:"//cdn.greenchef.com/assets/MenusLanding/Authors/Vegan/Desktop/annambanks@2x.eadcb526.png",mobile:"//cdn.greenchef.com/assets/MenusLanding/Authors/Vegan/Mobile/annambanks@1x.acb05d5f.png",mobileRetina:"//cdn.greenchef.com/assets/MenusLanding/Authors/Vegan/Mobile/annambanks@2x.cc09fcaf.png"},name:"Anna B"},content:"I love #greenchefvegan because I get to try new things ! &#128154;"}},{description:"A superfood bowl packed with sweet potatoes, baby broccoli, edamame, and shiitakes. Plus black rice, walnuts, goji berries, and miso-turmeric dressing.",descriptionShort:"A bowlful of sweet potatoes, edamame, shiitakes & black rice, tossed in miso-turmeric sauce.",mealImages:{desktop:"//cdn.greenchef.com/assets/MenusLanding/Meals/Vegan/miso-turmeric-rice-bowl@1x.a699a647.png",desktopRetina:"//cdn.greenchef.com/assets/MenusLanding/Meals/Vegan/miso-turmeric-rice-bowl@2x.c1538729.png"},name:"Miso-Turmeric Rice Bowl",quote:{author:{images:{desktop:"//cdn.greenchef.com/assets/MenusLanding/Authors/Vegan/Desktop/sarah-kath@1x.75ee2d48.png",desktopRetina:"//cdn.greenchef.com/assets/MenusLanding/Authors/Vegan/Desktop/sarah-kath@2x.ca83a322.png",mobile:"//cdn.greenchef.com/assets/MenusLanding/Authors/Vegan/Mobile/sarah-kath@1x.7dbd5ac0.png",mobileRetina:"//cdn.greenchef.com/assets/MenusLanding/Authors/Vegan/Mobile/sarah-kath@2x.3c0f5bc2.png"},name:"Sarah Kathleen McWilson"},content:"The gift of green chef's vegan box this week means cooking together and letting someone else treat us + tell us what to make and how."}}],e.getting=[{desc:"Convenient weekly deliveries"},{desc:"Ingredients for 3 dinners to serve 2 people"},{desc:"Easy recipes ready in about 30 minutes"},{desc:"Fresh organic ingredients, prepped and ready to cook"},{desc:"Specialty vegan sauces, dressings, and more"}],e.startCooking={title:"Ready To Start Cooking?",desc:{desktop:"Eat thoughtfully without having to think about it. Green Chef delivers all you need to cook vegan meals, including organic ingredients and easy recipes.",mobile:"Green Chef delivers all you need to cook vegan meals, including organic ingredients and easy recipes."},btnText:"Cook Vegan"},e.scrollTo=function(){$("body").animate({scrollTop:$(".differently").offset().top-60},"slow")
}}]),angular.module("greenchef.how-it-works-marketing",["ui.router"]).config(["$stateProvider",function(e){e.state("how-it-works",{url:"/how-it-works",views:{main:{controller:"HowItWorksMarketingCtrl",templateUrl:"marketing/how-it-works/how-it-works-marketing.tpl.html"}},data:{pageTitle:"How It Works Marketing",loggingTitle:"how_it_works_marketing"},resolve:{planPrices:function(){function e(e,n,t){return e.getOrSetABTest(n.pd12).then(function(){return t.getMenusData()})}return e.$inject=["ABTest","AB_TESTVERSION_SPLIT","SiteCMSService"],e}()}})}]).controller("HowItWorksMarketingCtrl",["$scope","SignupFlowService","planPrices",function(e,n,t){function r(n){n===e.expanded.index?(e.expanded.index=-1,e.expanded.text=""):(e.expanded.index=n,e.expanded.text=e.whatsInBox.meals[n].expandedText)}function a(){n.setUserSignupFlow("default"),n.advance()}e.planPrices=t,e.getStartedOnclick=a,e.expandedBox=r,e.expanded={index:-1,text:""},e.howWeDoIt={title:"This is<br />how we<br />do it."},e.chooseThePlan={title:"Choose the plan<br />that&apos;s right<br />for you",desc:["Green Chef has a wide variety of meal plans to suit your lifestyle.","Paleo &middot; Vegan &middot; Gluten-Free &middot; Omnivore &middot; Keto &middot; Vegetarian","We deliver premium ingredients and easy recipes to cook delicious dinners in about 30 minutes. Each box includes new recipes from the meal plan of your choice."],link:{text:"See the menu",url:"https://greenchef.com/menus/main",title:"Greenchef menus",loggingEvent:"how-see-the-menu1"}},e.getDinner={title:"Get dinner at your door",secondTitle:"Every week (or 2 or 4)",desc:["Green Chef is a meal kit subscription service. With Green Chef, you can enjoy restaurant-quality meals that are quick and easy to cook. No meal planning, recipe hunting, or grocery shopping required.","All you have to do to is sign up, sit back, and enjoy the convenience of weekly deliveries. Or you can opt for a flexible bi-weekly or monthly subscription.","Not sure how often you want to cook&quest; Plan to travel to the Bahamas for a week&quest; Not to worry&excl; There&apos;s no minimum commitment, you can skip orders (no charge, of course), and you can easily change or cancel your subscription."]},e.whatsInBox={title:"What&apos;s in the box&quest;",meals:[{title:"Organic ingredients",desc:"Organic ingredients in each box have no GMOs, toxic pesticides, irradiation, sewage sludge, antibiotics, growth hormones, or steroids.",imageSrc:"//cdn.greenchef.com/assets/Marketing/how-it-works/box-organic-ingredients@1x.b297223f.jpg",imageSrcSet:"//cdn.greenchef.com/assets/Marketing/how-it-works/box-organic-ingredients@2x.7433586a.jpg",imageMobileSrc:"//cdn.greenchef.com/assets/Marketing/how-it-works/box-organic-ingredients@1x.b297223f.jpg",imageMobileSrcSet:"//cdn.greenchef.com/assets/Marketing/how-it-works/box-organic-ingredients@2x.7433586a.jpg",expandedText:"<p>What our organic ingredients do have is a lot of delicious, clean goodness.</p>",loggingEvent:"organic-ingredients"},{title:"Prepped ingredients &amp; signature sauces",desc:"Ingredients come pre-measured and prepped along with pre-made sauces, marinades, and spice blends. More flavor, less time.",imageSrc:"//cdn.greenchef.com/assets/Marketing/how-it-works/box-prepped-ingredients@1x.cb92aa44.jpg",imageSrcSet:"//cdn.greenchef.com/assets/Marketing/how-it-works/box-prepped-ingredients@2x.f3f37317.jpg",imageMobileSrc:"//cdn.greenchef.com/assets/Marketing/how-it-works/box-prepped-ingredients_mobile@1x.9df6d83e.jpg",imageMobileSrcSet:"//cdn.greenchef.com/assets/Marketing/how-it-works/box-prepped-ingredients_mobile@2x.894a2c40.jpg",expandedText:"<p>Ever try to fine-chop raw butternut squash? Or make cauliflower rice? It&apos;s hard work. That&apos;s why we do it for you by prepping most ingredients.</p><p>Our pre-made sauces are crafted in-house to complement and highlight each meal. It&apos;s surprising that so much flavor can be contained in those little jars.</p>",loggingEvent:"prepped-ingredients"},{title:"Easy recipes",desc:"Recipes are quick and easy, with step-by-step instructions, chef&apos;s tips, and photos. Ready in just about 30 minutes.",imageSrc:"//cdn.greenchef.com/assets/Marketing/how-it-works/box-easy-recipes@1x.302b581f.jpg",imageSrcSet:"//cdn.greenchef.com/assets/Marketing/how-it-works/box-easy-recipes@2x.d6003f3b.jpg",imageMobileSrc:"//cdn.greenchef.com/assets/Marketing/how-it-works/box-easy-recipes_mobile@1x.c4dc6525.jpg",imageMobileSrcSet:"//cdn.greenchef.com/assets/Marketing/how-it-works/box-easy-recipes_mobile@2x.1347e283.jpg",expandedText:"<p>Each dinner has a recipe card with simple instructions that guide you to a perfectly prepared meal. For the best experience, take a look at the card before cooking. It&apos;ll show you which ingredients and kitchenware to use.</p>",loggingEvent:"easy-recipes"},{title:"Thoughtful packaging",desc:"We carefully hand-pack all ingredients so they have a happy, cushioned, cool journey to your door.",imageSrc:"//cdn.greenchef.com/assets/Marketing/how-it-works/box-packaging@1x.4efa190e.jpg",imageSrcSet:"//cdn.greenchef.com/assets/Marketing/how-it-works/box-packaging@2x.651db8a6.jpg",imageMobileSrc:"//cdn.greenchef.com/assets/Marketing/how-it-works/box-packaging_mobile@1x.63a4666b.jpg",imageMobileSrcSet:"//cdn.greenchef.com/assets/Marketing/how-it-works/box-packaging_mobile@2x.79ff10d5.jpg",expandedText:"<p>Our food scientists design in-box temperature zones to keep everything protected. This means placing each separate ingredient in its own spot next to friendly neighboring ingredients.</p><p>Ingredients are also color-coded per recipe, so organizing them in your fridge is easy. When it&apos;s time to cook, simply match the color of the recipe card with the colored stickers on each ingredient.</p>",loggingEvent:"thoughtful-packaging"}]},e.innerChef={title:"Tap into<br />your inner chef",desc:"Impress yourself (and everyone else) with the cooking skills you didn&apos;t know you had. Yes, you. Our step-by-step instructions make cooking easy and rewarding for anybody. So whether you&apos;re a beginner who needs guidance or an old pro looking for a shortcut to great food, Green Chef helps you achieve dinner victory.",link:{text:"See why cooking Green Chef is better",url:"https://greenchef.com/why-green-chef",title:"Why Greenchef",loggingEvent:"seewhycooking"},imageSrc:"//cdn.greenchef.com/assets/Marketing/how-it-works/inner-chef@1x.456c798b.jpg",imageSrcSet:"//cdn.greenchef.com/assets/Marketing/how-it-works/inner-chef@2x.f1e62e64.jpg"},e.outOfAmazing={title:"Take a bite out of amazing.",desc:"Eating in is the new dining out. Every recipe is designed by our expert chefs to deliver five-star flavor you would find in top restaurants. From the comfort of your own home, you can enjoy restaurant-quality meals that save you time and money. (You can even cook in your PJs, we won&apos;t tell.) Plus, Green Chef is a better, tastier choice than takeout.",link:{text:"See the menu",url:"https://greenchef.com/menus/main",title:"Greenchef menus",loggingEvent:"how-see-the-menu2"},promotionTitle:"&quot;Imaginative, rewarding recipes&quot;",promotionDesc:"&quot;Best meal kit overall &amp; best taste&quot;",promotionLogoSrc:"//cdn.greenchef.com/assets/Marketing/how-it-works/usatoday@1x.6496903f.png",promotionLogoSrcSet:"//cdn.greenchef.com/assets/Marketing/how-it-works/usatoday@2x.78fdacf6.png",promotionLogoMobileSrc:"//cdn.greenchef.com/assets/Marketing/how-it-works/usatoday_mobile@1x.6496903f.png",promotionLogoMobileSrcSet:"//cdn.greenchef.com/assets/Marketing/how-it-works/usatoday_mobile@2x.78fdacf6.png"},e.eventNameReadMore="how-more-faqs",e.getStartedTitle="That&apos;s how we do it.",e.eventNameGetStarted="how-getstarted"}]),angular.module("greenchef.keto-plan-marketing",["ui.router"]).config(["$stateProvider",function(e){function n(e,n,t){return e.getOrSetABTest(n.pd12).then(function(){return t.getMenusData()})}function t(e,n,t){return e.getOrSetABTest(n.pd12).then(function(){return t.getMenusData()})}n.$inject=["ABTest","AB_TESTVERSION_SPLIT","SiteCMSService"],t.$inject=["ABTest","AB_TESTVERSION_SPLIT","SiteCMSService"],e.state("keto-plan-landing",{url:"/keto-plan",views:{main:{controller:"KetoPlanCtrl",templateUrl:"marketing/keto-plan/keto-plan.tpl.html"}},data:{pageTitle:"GreenChef - Keto Plan",loggingTitle:"keto_plan_landing_page"},resolve:{menusData:n,planPrices:t}})}]).controller("KetoPlanCtrl",["$scope","$state","MenuService","SignupFlowService","Utility","menusData","planPrices",function(e,n,t,r,a,o,i){function s(){e.faqConfig={title:"Frequently Asked Questions",items:[]},e.faqConfig.items.push({toggle:!1,question:"What ingredients are part of Green Chef’s Keto Plan?",answer:"<div><p>Green Chef Keto has NO:</p><p>Grains: wheat, corn, rice, cereal, etc.</p> <p>Excess sugar: refined sugar, honey, agave, maple syrup, etc.</p><p>Fruit: apples, bananas, oranges, etc.</p><p>Tubers: potatoes, yams, etc.</p><p>Farmed seafood: shrimp, salmon, trout, etc.</p><p>Gluten</p><p>Peanuts</p><p>Soy</p></div><div><p>Green Chef Keto has:</p><p>Meat: beef, pork, poultry, lamb, game</p><p>Seafood: wild-caught fish</p><p>Leafy greens: spinach, kale, etc.</p><p>Above-ground vegetables: broccoli, cauliflower, etc.</p><p>Limited root vegetables: carrots</p><p>Nuts and seeds: macadamias, walnuts, sunflower seeds, etc.</p><p>Avocados and berries: raspberries, blackberries, and other low-glycemic berries</p><p>Sweeteners: stevia, erythritol, monk fruit, etc.</p><p>Eggs</p><p>Tree nuts</p></div>",event_name:"keto-faq-1"}),null!==e.ketoMealType&&e.faqConfig.items.push({toggle:!1,question:"How much does Green Chef Keto cost?",answer:"<p>$"+e.ketoMealType.cost+" per serving, plus $5.99 shipping and handling per box.</p><p>1 box of Green Chef Keto includes "+e.ketoMealType.numRecipes+" dinners to serve "+e.ketoMealType.numPeople+" people ("+e.ketoMealType.numRecipes*e.ketoMealType.numPeople+" servings total).</p>",event_name:"keto-faq-2"}),e.faqConfig.items.push({toggle:!1,question:"How can I hit my nutrient macros with Green Chef Keto?",answer:"<p>Green Chef Keto meals generally fall into a range of 400-600 calories and typically contain less than 30g net carbs per serving. Full nutritional info is provided online for each recipe. Our meals are designed to be keto-friendly, not keto-stringent. To hit a desired fat profile, consider cooking with saturated fats like coconut oil, butter, or ghee. We provide plenty of vegetables, so you can limit carbs further and still enjoy a filling meal by saving some veggies for later.</p>",event_name:"keto-faq-4"}),e.faqConfig.items.push({toggle:!1,question:"What are net carbs?",answer:"<p>We use the term “net carbs” to estimate total carbohydrate content minus the fiber content of the meal.</p>",event_name:"keto-faq-5"})}$.stellar("refresh"),e.ketoMealType=t.getMealTypeObject(o,"keto"),e.planPrices=i,s(),e.getStartedOnclick=function(){r.setUserSignupFlow("default"),r.advance()},e.initOwl=function(){a.isMobile()&&$(document).ready(function(){$("#preview-recipes").owlCarousel({margin:8,loop:!0,autoWidth:!0,nav:!1,items:2})})},e.navbarIndicator=[{sectionName:"The New Keto Plan",eventName:"new-keto-plan"},{sectionName:"What Is Keto?",eventName:"what-is-keto"},{sectionName:"Keto Faq",eventName:"keto-faq"}],e.scrollTo=function(e){$("html, body").animate({scrollTop:$("#"+e).offset().top-60},"slow")}}]),angular.module("greenchef.why-gc-marketing",["ui.router"]).config(["$stateProvider",function(e){e.state("why-green-chef",{url:"/why-green-chef",views:{main:{controller:"WhyGreenChefCtrl",templateUrl:"marketing/why-gc/why-gc.tpl.html"}},data:{pageTitle:"Why GreenChef",loggingTitle:"why_greenchef_landing"},resolve:{planPrices:function(){function e(e,n,t){return e.getOrSetABTest(n.pd12).then(function(){return t.getMenusData()})}return e.$inject=["ABTest","AB_TESTVERSION_SPLIT","SiteCMSService"],e}()}})}]).controller("WhyGreenChefCtrl",["$scope","SignupFlowService","planPrices",function(e,n,t){function r(){n.setUserSignupFlow("default"),n.advance()}e.planPrices=t,e.getStartedTitle="That’s Why.",e.getStartedOnclick=r,e.eventNameGetStarted="why-getstarted",e.eventNameReadMore="why-more-faqs",e.trustingFood={title:"You Can Trust The Food You Eat",desc1:"It’s an old saying but it holds true: You are what you eat. That’s why Green Chef is proud to be a USDA-certified organic company. We source wholesome, clean, sustainable ingredients of the highest quality.",desc2:"Nothing artificial here.",reasons:[{type:"gmo",title:"GMO Free",description:"Genetically modified organisms (GMOs) are specifically excluded from certified organic ingredients."},{type:"usda",description:"Green Chef was the first company in the category to be USDA-certified organic."},{type:"sustainable",title:"Sustainable &amp; Traceable",description:"We work closely with farmers and food manufacturers who reinvest in the environment."}],text_more:"See Why Choosing Organic Makes A Difference",reasons_choosing1:"Organic ingredients have no GMOs, toxic pesticides, petroleum-based synthetic fertilizers, irradiation, human sewage sludge, antibiotics, growth hormones, or steroids. Organic farming also supports healthier ecosystems by promoting biodiversity, protecting wildlife, and conserving water and soil.",toggle:!1,event_name_text:"choosing-organic",event_name_plus:"plus-choosing-organic"},e.comments={vogue:"&ldquo;Crowd-Pleasing Meals&rdquo;",forbes:"&ldquo;It’s like having your own private sous chef&rdquo;",self:"&ldquo;Less time than it takes to catch up on the most recent episode of <span>Girls</span>&rdquo;"},e.hardParts={title:"We Do The Hard Parts",description:"From designing the menu to chopping the veggies, Green Chef does the heavy lifting. All you have to do is cook, eat, and enjoy.",parts:[{title:"No More<br/>Planning",content:"You choose the meal plan for your lifestyle, and we send you new, easy-to-prepare recipes crafted by our expert chefs to delight your palate. No more agonizing over what’s for dinner."},{title:"Prepped<br/>Ingredients",content:"We’re your sous chef. All ingredients come pre-measured, perfectly portioned, and mostly prepped. Each recipe also features our pre-made signature sauces, dressings, and spices."}]},e.discoverGreenchef=[{type:"yoga",title:'Take Your Time Back.<br><span class="specified-character">Yoga</span> Misses You.',description:"Green Chef doesn’t just give you delicious dinners—we give you your time back. By removing meal planning, grocery shopping, and prep from your routine, you’ll free up hours each week and enjoy dinners far tastier than boring ol’ takeout. That’s more time every week to read for book club, cheer at your kid’s soccer game, try hot yoga, or simply do nothing at all.",placeholder_text_desktop:"Placeholder",placeholder_text_mobile:"Placehold<br>er",content_url:"See The Menu",href_url:"https://greenchef.com/menus/main",event_name:"why-see-the-menu1"},{type:"tokyo",title:'Travel To <span class="specified-character">Tokyo</span>.<br>In Just 30 Minutes.',description:"Explore a world of flavor without leaving your kitchen. Green Chef meals include everything from classic comfort foods to global cuisines. You’ll love discovering ingredients, spices, and flavor profiles you may have never tried before. We send new, always delightful recipes each week.",placeholder_text_desktop:"Placehold<br>er",placeholder_text_mobile:"Placehold<br>er",content_url:"See The Menu",href_url:"https://greenchef.com/menus/main",event_name:"why-see-the-menu2"}],e.beAGreenChef={title:"Be A Green Chef",desc1:"&ldquo;Green&ldquo; isn’t just a name, it’s our philosophy. We strongly believe in sustainability and green innovation. All of Green Chef’s packaging is recyclable, reusable, or compostable, wherever possible. We also offset 100% of our carbon emissions from operations, including shipment of every single box. Shopping with Green Chef means choosing the eco-friendly option.",desc2:"Green can also mean &ldquo;novice.&ldquo; Our expert chefs have harnessed their know-how to design gourmet dinners that even beginners can cook with ease. From children just old enough to help in the kitchen to grandparents who have only ever used the microwave, anyone can achieve dinner victory with Green Chef.",content_url_desktop:"Read About Our Sustainable Packaging",content_url_mobile:"Read More:<br>Sustainable Packaging",href_url:"https://greenchef.com/eco-friendly-packaging",event_name:"sustainable-packaging"}}]),angular.module("greenchef.on-the-menu").directive("elemReady",["$parse",function(e){return{restrict:"A",link:function(){function n(n,t,r){t.bind("load",function(){n.$apply(function(){var t=e(r.elemReady);t(n)})})}return n}()}}]),angular.module("greenchef.on-the-menu").filter("indicatorDisplayText",["INDICATOR_DISPLAY_TEXT",function(e){return function(n){return e[n]?e[n]:n}}]),angular.module("greenchef.on-the-menu").directive("joinNow",function(){return{restrict:"E",scope:{position:"="},templateUrl:"on-the-menu/directives/join-now.tpl.html",link:function(){function e(e,n,t){var r=t.position;e.logEvents="top"===r?"join_above":"join_below"}return e}()}}),angular.module("greenchef.on-the-menu").constant("GENERIC_ERROR","Oops! An error occurred during the update.").controller("MenusPageCtrl",["$scope","$state","$timeout","$window","AB_TESTVERSION_SPLIT","ABTest","ConversionTracking","PlanInfoService","RecipePages","SignupDataService","SiteCMSService",function(e,n,t,r,a,o,i,s,l,c,u){function d(e,n){return e.planRecipes&&e.planRecipes[n]?e.planRecipes[n]:e.planCatalogs&&e.planCatalogs[n]?e.planCatalogs[n]:void 0}function p(n,t){return u.getRecipesByPlanId(t,n.nextMenuDate).then(function(n){n&&(n.planRecipes||n.planCatalogs)&&n.nextMenuDate&&(n.planRecipes[t]||n.planCatalogs[t])&&(e.recipeDataNext=n)}).then(function(){return u.getRecipesByPlanId(t,n.previousMenuDate).then(function(n){n&&(n.planRecipes||n.planCatalogs)&&n.nextMenuDate&&(n.planRecipes[t]||n.planCatalogs[t])&&(e.recipeDataPrev=n)})})}function m(e,n){l.navigateToRecipePage(e,n)}function g(e){n.go("menus."+e)}function f(n){var r=e.recipeDataNext;if(e.recipeDataPrev=n,e.startOfWeek=moment(n.nextMenuDate).format("MMMM Do"),e.endOfWeek=moment(n.nextMenuDate).add(6,"days").format("MMMM Do"),r&&(r.planRecipes||r.planCatalogs)){if(e.recipeData=r,!r.planRecipes[e.planId]&&!r.planCatalogs[e.planId])return;if(e.recipes=d(r,e.planId).recipes,r.nextMenuDate)return u.getRecipesByPlanId(e.planId,r.nextMenuDate).then(function(n){t(function(){n&&(n.planRecipes||n.planCatalogs)&&d(n,e.planId)&&(e.recipeDataNext=n)},500)});e.recipeData.nextMenuDate=null}}function h(n){var r=e.recipeDataPrev;if(e.recipeDataNext=n,e.startOfWeek=moment(n.previousMenuDate).format("MMMM Do"),e.endOfWeek=moment(n.previousMenuDate).add(6,"days").format("MMMM Do"),r&&(r.planRecipes||r.planCatalogs)){if(e.recipeData=r,!d(r,e.planId))return;if(e.recipes=d(r,e.planId).recipes,r.previousMenuDate)return u.getRecipesByPlanId(e.planId,r.previousMenuDate).then(function(n){t(function(){n&&(n.planRecipes||n.planCatalogs)&&(d(n,e.planId)?e.recipeDataPrev=n:e.recipeData.previousMenuDate=null)},500)});e.recipeData.previousMenuDate=null}}function v(n){var r=angular.element(document.getElementById("all-menus-slide"));n?r.css("transition","all 0.5s ease").css("left","-200%"):r.css("transition","all 0.5s ease").css("left","0%"),t(function(){r.css("transition","all 0s ease").css("left","-100%"),e.displayAllMenus.splice(parseInt(-1*e.numberMenuDisplay),e.numberMenuDisplay);var n=e.displayAllMenus.slice(Math.max(e.displayAllMenus.length-e.numberMenuDisplay,0));n.reverse(),_.forEach(n,function(n){e.displayAllMenus.unshift(n)})},500)}function y(e,n,t){$(e).addClass("active"),$(t).removeClass("active"),$("html, body").animate({scrollTop:$(n).offset().top},800)}function b(){var e=$(document).scrollTop(),n=".meal-plan-choice a";$(".meal-plans .meal-plan").each(function(t){var r=$(this).position().top,a=$(this).height();e>=r&&r+a>e&&($(n+".active").removeClass("active"),$(n).eq(t).addClass("active"))})}function S(){n.go("sign-up")}$.stellar("refresh"),$(document).on("scroll",b),"menus"===n.current.name&&n.go("menus.main"),e.numberMenuDisplay=4,e.twoPersonPlans=s.getTwoPersonPlansSortedByPopularity(),e.familyPlans=s.getFamilyPlansSortedByPopularity(),e.twoPersonPlanMinCost=s.getMinTwoPersonPlanCost(),e.familyPlanMinCost=s.getMinFamilyPlanCost(),e.navigateToRecipePage=m,e.navigateToMenuPage=g,e.allMenus=[],e.nextAllMenu=_.debounce(v,500,!0),e.scrollTo=y,e.gotoSignup=S,e.communityPosts=[{profileImage:"//cdn.greenchef.com/assets/Photos/WeeklyMenu/MainPage/TwitterPost/mihockeymom@1x.bdd7eb0b.png",profileImageRetina:"//cdn.greenchef.com/assets/Photos/WeeklyMenu/MainPage/TwitterPost/mihockeymom@2x.6ee8dc86.png",name:"Shawn Rosenthal",twitterHandle:"@mihockeymom",tweet:"Love how fresh all of the produce is from Green Chef! Tonight's meal was perfect. So loving this.",location:"Coconut Creek, FL"},{profileImage:"//cdn.greenchef.com/assets/Photos/WeeklyMenu/MainPage/TwitterPost/carilynp@1x.967708bc.png",profileImageRetina:"//cdn.greenchef.com/assets/Photos/WeeklyMenu/MainPage/TwitterPost/carilynp@2x.2ef3c601.png",name:"Carilyn Platt",twitterHandle:"@carilynp",tweet:"Cooking mushroom & kale linguine with @greenchef...my family thinks I'm a superhero.",location:"Seattle, WA"},{profileImage:"//cdn.greenchef.com/assets/Photos/WeeklyMenu/MainPage/TwitterPost/tin-lizzie-bikes@1x.ad747e27.png",profileImageRetina:"//cdn.greenchef.com/assets/Photos/WeeklyMenu/MainPage/TwitterPost/tin-lizzie-bikes@2x.28867763.png",name:"Elizabeth A. Denton",twitterHandle:"@TinLizzieBikes",tweet:"So happy to have @greenchef vegan meals again this weekend! Seriously feels like high class dining but cheaper and more fun.",location:"Arlington, VA"},{profileImage:"//cdn.greenchef.com/assets/Photos/WeeklyMenu/MainPage/TwitterPost/ri-gator-mom@1x.5149fbab.png",profileImageRetina:"//cdn.greenchef.com/assets/Photos/WeeklyMenu/MainPage/TwitterPost/ri-gator-mom@2x.c17126c0.png",name:"Joanna R+F",twitterHandle:"@RiGatorMom",tweet:"Very impressed with our first @greenchef order! Love the packaging, fact that it’s organic, gluten free & already prepped makes life easier!",location:"Rhode Island"},{profileImage:"//cdn.greenchef.com/assets/Photos/WeeklyMenu/MainPage/TwitterPost/juliaphood@1x.699c5b97.png",profileImageRetina:"//cdn.greenchef.com/assets/Photos/WeeklyMenu/MainPage/TwitterPost/juliaphood@2x.e62fa753.png",name:"Julia Hood",twitterHandle:"@juliaphood",tweet:"Hands down the BEST home meal delivery service! This is our first meal with Green Chef- but not our last!!",location:"Salt Lake City, UT"}],e.twoPersonPlans.forEach(function(e){e.menusPage.imageURL="//cdn.greenchef.com/assets/Photos/WeeklyMenu/MainPage/"+e.internalName+"@1x.png",e.menusPage.imageRetinaURL="//cdn.greenchef.com/assets/Photos/WeeklyMenu/MainPage/"+e.internalName+"@2x.png"}),e.familyPlans.forEach(function(e){e.menusPage.imageURL="//cdn.greenchef.com/assets/Photos/WeeklyMenu/MainPage/"+e.internalName+"@1x.png",e.menusPage.imageRetinaURL="//cdn.greenchef.com/assets/Photos/WeeklyMenu/MainPage/"+e.internalName+"@2x.png"});var P=_.map(e.twoPersonPlans.concat(e.familyPlans),function(e){return{name:e.name,value:e.internalName,extendedSubtitle:e.extendedSubtitle,isFamilyPlan:e.isFamilyPlan,imageUrL:"//cdn.greenchef.com/assets/Photos/WeeklyMenu/MainPage/"+e.internalName+"@1x.png",imageRetinaUrL:"//cdn.greenchef.com/assets/Photos/WeeklyMenu/MainPage/"+e.internalName+"@2x.png",url:e.name,glutenCertified:e.glutenCertified,isHidden:e.isHidden}});e.allMenus=_.filter(P,function(e){return!e.isHidden}),e.displayAllMenus=_.clone(e.allMenus);var w=e.displayAllMenus.slice(parseInt(-1*e.numberMenuDisplay)).reverse();_.forEach(w,function(n){e.displayAllMenus.unshift(n)}),e.$on("$stateChangeSuccess",function(){var t,r=e.twoPersonPlans.concat(e.familyPlans);_.contains(n.current.name,"menus.")&&"menus.main"!==n.current.name&&(t=n.current.name.split(".")[1],e.planId=r.filter(function(e){return e.internalName===t})[0].planId,o.getOrSetABTest(a.pd12).then(function(n){var t={tests:{}};return n&&(t.tests["price-drop"]=n),u.getRecipesByPlanId(e.planId,null,t)}).then(function(n){e.recipeData=n;var t=d(n,e.planId);return e.recipes=t.recipes,e.cost=t.cost,e.startOfWeek=moment(n.menuDate).format("MMMM Do"),e.endOfWeek=moment(n.menuDate).add(6,"days").format("MMMM Do"),e.previousMenuV2=_.debounce(h,500,!0),e.nextMenuV2=_.debounce(f,500,!0),e.recipeDataPrev=null,e.recipeDataNext=null,n}).then(function(n){return p(n,e.planId)}))}),$(r).scroll(function(){var e=$(r).scrollTop(),n=".meal-plan-choice .btn-group .btn";e>=100?$(".meal-plans .meal-plan").each(function(t){var r=$(this).position().top;1===t&&(r-=150),e>=r&&($(n+".active").removeClass("active"),$(n).eq(t).addClass("active"))}):($(n+".active").removeClass("active"),$(n+":first").addClass("active"))}).scroll()}]),angular.module("greenchef.on-the-menu").controller("ChoiceOmnivoreMenuCtrl",["$scope","ConversionTracking",function(e,n){$.stellar("refresh");var t=_.find(e.$parent.twoPersonPlans,{internalName:"choice-omnivore"}),r=t.planId,a=t.numPeople,o=t.numRecipes,i=t.cost;e.data={name:"omnivore",value:"choice-omnivore",isFamilyPlan:!1,menuSpecificSummary:"Crave variety? This diverse, flexible menu has plenty of choices including meat, seafood, and vegetarian dinners. It’s up to you!",menuSpecificSummaryMobile:"Crave variety? This flexible menu has meat, seafood, and vegetarian choices. It’s up to you!",totalCost:i*a*o,planId:r,quantity:a*o},n.trackProductPageVisit(e.data),e.testimonials=[{title:"I am Green Chef because",content:"&#8220;3 Things I love most about Green Chef: <br /> 1. Delicious organic meals delivered to my door! <br /> 2. My teenage son is learning to cook! <br /> 3. I haven&#39;t been to the grocery store in weeks!&#8221;",author:"Shari F"},{title:"I am Green Chef because",content:"&#8220;2 huge successes this week with our @greenchef meals! Slowly getting the &#128102;&#127995; to be open to eating new foods and meals and tonight he was raving about how our meal tasted like we were eating in a restaurant! Seriously yummy! #iamgreenchef #organic #convenience #greenchefgives #nomnomnom&#8221;",author:"@kate_alexandra_b"},{title:"I am Green Chef because",content:"&#8220;Bravo! We absolutely loved this dish! The complex flavors, textures and colors. Thank you for going beyond the minimum and bringing us the full on beauty of this dish! With so many ingredients this is a dish I would not attempt. However, you let me take joy in putting this together and watching my family truely appreciate! Thank you Green Chef!&#8221;",author:"Krista T"}]}]),angular.module("greenchef.on-the-menu").controller("PescatarianMenuCtrl",["$scope","ConversionTracking",function(e,n){$.stellar("refresh");var t=_.find(e.$parent.twoPersonPlans,{internalName:"choice-pescatarian"}),r=t.planId,a=t.numPeople,o=t.numRecipes,i=t.cost;e.data={name:"pescatarian",value:"choice-pescatarian",isFamilyPlan:!1,menuSpecificSummary:"Enjoy the seasonal, select organic produce of a plant-focused vegetarian diet, with the addition of sustainably sourced fish and seafood.",menuSpecificSummaryMobile:"Enjoy the seasonal, select organic produce of a plant-focused vegetarian diet, with the addition of sustainably sourced fish and seafood.",totalCost:i*a*o,planId:r,quantity:a*o},n.trackProductPageVisit(e.data),e.testimonials=[{title:"I am Green Chef because",content:"&#8220;3 Things I love most about Green Chef: <br /> 1. Delicious organic meals delivered to my door! <br /> 2. My teenage son is learning to cook! <br /> 3. I haven&#39;t been to the grocery store in weeks!&#8221;",author:"Shari F"},{title:"I am Green Chef because",content:"&#8220;2 huge successes this week with our @greenchef meals! Slowly getting the &#128102;&#127995; to be open to eating new foods and meals and tonight he was raving about how our meal tasted like we were eating in a restaurant! Seriously yummy! #iamgreenchef #organic #convenience #greenchefgives #nomnomnom&#8221;",author:"@kate_alexandra_b"},{title:"I am Green Chef because",content:"&#8220;Bravo! We absolutely loved this dish! The complex flavors, textures and colors. Thank you for going beyond the minimum and bringing us the full on beauty of this dish! With so many ingredients this is a dish I would not attempt. However, you let me take joy in putting this together and watching my family truely appreciate! Thank you Green Chef!&#8221;",author:"Krista T"}]}]),angular.module("greenchef.on-the-menu").controller("FamilyCarnivoreMenuCtrl",["$scope","ConversionTracking",function(e,n){$.stellar("refresh");var t=_.find(e.$parent.familyPlans,{internalName:"family-meat"}),r=t.planId,a=t.numPeople,o=t.numRecipes,i=t.cost;e.data={name:"carnivore",value:"family-meat",isFamilyPlan:!0,menuSpecificSummary:"Our family-style dinners are for parents and kids alike. Each recipe is designed to make cooking easy, so you get an extra helping of quality time.",menuSpecificSummaryMobile:"Our family-style dinners are for parents & kids alike. Each recipe is designed to give you extra quality time.",totalCost:i*a*o,planId:r,quantity:a*o},n.trackProductPageVisit(e.data),e.favorites=[{name:"Shrimp Pasta Primavera",isPublished:!0,recipeVanity:"family-shrimp-primavera-pasta",mealIntro:"Parmesan & pesto, green beans, creminis, carrots",thumbnailImageUrl:"//cdn2.greenchef.com/uploaded/57dcb0648a3a5cff5a620796.jpg"},{name:"Chili Con Carne",isPublished:!0,recipeVanity:"family-chili-con-carne",mealIntro:"Monterey Jack, black beans, jalapeño cornbread",thumbnailImageUrl:"//cdn2.greenchef.com/uploaded/57cb7b5c972b7d3d44b8ed60.jpg"},{name:"Lemon-Herb Chicken",isPublished:!0,recipeVanity:"family-lemon-thyme-roast-chicken",mealIntro:"Rice trio, apple salad, creamy caper-tomato sauce",thumbnailImageUrl:"//cdn2.greenchef.com/uploaded/57cb7b914c51556d0dac2a47.jpg"}],e.testimonials=[{title:"I am Green Chef because",content:"&#8220;The kids made Sunday dinner with the help of a green chef box delivery!&#8221;-",author:"@sonyamounts"},{title:"I am Green Chef because",content:"&#8220;Battle of the boxed dinners: @greenchef crushes @blueapron. And I LOVE the new for-4 family plan.&#8221;-",author:"@XXfounder"},{title:"I am Green Chef because",content:"&#8220;One of my friends gave me her meals for a week because she was going out of town..... AMAZING!! My kids loved helping put it all together. And we absolutely loved the food!! <br /> I get my first member meals delivered today!! Can't wait &#128515;&#8221;-",author:"Lisa S"},{title:"I am Green Chef because",content:"&#8220;Look at the awesome dinner Sam made tonight thanks to Green Chef! This was our second #greencheffamily meal and it turned out really good! Not even too hard for a Sam to put together&#8221;-",author:"Cory"}]}]),angular.module("greenchef.on-the-menu").controller("FamilyOmnivoreMenuCtrl",["$scope","ConversionTracking",function(e,n){$.stellar("refresh");var t=_.find(e.$parent.familyPlans,{internalName:"family-omnivore"}),r=t.planId,a=t.numPeople,o=t.numRecipes,i=t.cost;e.data={name:"omnivore",value:"family-omnivore",isFamilyPlan:!0,menuSpecificSummary:"Our family-style dinners are for parents and kids alike. Each recipe is designed to make cooking easy, so you get an extra helping of quality time.",menuSpecificSummaryMobile:"Our family-style dinners are for parents & kids alike. Each recipe is designed to give you extra quality time.",totalCost:i*a*o,planId:r,quantity:a*o},n.trackProductPageVisit(e.data),e.favorites=[{name:"Veggie Quesadillas",isPublished:!0,recipeVanity:"family-mushroom-quesadilla-with-refried-beans",mealIntro:"Mushrooms & spinach, black beans, corn salsa",thumbnailImageUrl:"//cdn2.greenchef.com/uploaded/57ef23931ee229345f3d06c0.jpg"},{name:"Greek Chicken Flatbread",isPublished:!0,recipeVanity:"family-greek-chicken-flatbread-pizza",mealIntro:"Quinoa, sun-dried tomato & spinach salad, hummus",thumbnailImageUrl:"//cdn2.greenchef.com/uploaded/57e5739fa85d82170e443d4b.jpg"},{name:"Citrus-Glazed Salmon Bowl",isPublished:!0,recipeVanity:"family-citrus-glazed-salmon-rice-bowl-with-roasted-broccoli",mealIntro:"Tamari rice, roasted broccoli, almonds, orange",thumbnailImageUrl:"//cdn2.greenchef.com/uploaded/57ef23508e1dff475a0fee2e.jpg"}],e.testimonials=[{title:"I am Green Chef because",content:"&#8220;The kids made Sunday dinner with the help of a green chef box delivery!&#8221;-",author:"@sonyamounts"},{title:"I am Green Chef because",content:"&#8220;Battle of the boxed dinners: @greenchef crushes @blueapron. And I LOVE the new for-4 family plan.&#8221;-",author:"@XXfounder"},{title:"I am Green Chef because",content:"&#8220;One of my friends gave me her meals for a week because she was going out of town..... AMAZING!! My kids loved helping put it all together. And we absolutely loved the food!! <br /> I get my first member meals delivered today!! Can't wait &#128515;&#8221;-",author:"Lisa S"},{title:"I am Green Chef because",content:"&#8220;Look at the awesome dinner Sam made tonight thanks to Green Chef! This was our second #greencheffamily meal and it turned out really good! Not even too hard for a Sam to put together&#8221;-",author:"Cory"}]
}]),angular.module("greenchef.on-the-menu").controller("GlutenFreeMenuCtrl",["$scope","ConversionTracking","MenuService",function(e,n,t){$.stellar("refresh");var r=_.find(e.$parent.twoPersonPlans,{internalName:"choice-glutenfree"}),a=r.planId,o=r.numPeople,i=r.numRecipes,s=r.cost;e.data={name:"gluten-free",value:"choice-glutenfree",isFamilyPlan:!1,menuSpecificSummary:"Our gluten-free menu features flavor above all else. Each week has 2 meat or seafood dinners and 1 vegetarian dinner.",menuSpecificSummaryMobile:"Our gluten-free menu features flavor above all. Each week has 2 meat or seafood dinners + 1 vegetarian dinner.",glutenCertified:!0,totalCost:s*o*i,planId:a,quantity:o*i},n.trackProductPageVisit(e.data),e.favorites=t.getFavoritesFromThePast("gluten-free"),e.testimonials=[{title:"Why green chefs love "+e.data.name,content:"&#8220;Love Green Chef meals....don't have to worry what's for dinner anymore...no more running to grocery because I forgot 1 item! Love that it is organic and gluten-free. Delicious meals!! I'm hooked.&#8221;-",author:"Emily Bizyak Blackburn"},{title:"Why green chefs love "+e.data.name,content:"&#8220;This is something I would never had made on my own. We really enjoyed it&#8221;-",author:"Jennifer"},{title:"Why green chefs love "+e.data.name,content:"&#8220;Everything about the company is a ten. The effort into the top notch ingredients coupled with the health and deliciousness you can't help but love it!&#8221;-",author:"Tonya J."}]}]),angular.module("greenchef.on-the-menu").controller("KetoMenuCtrl",["$scope","$state","ConversionTracking","MenuService",function(e,n,t){$.stellar("refresh");var r=_.find(e.$parent.twoPersonPlans,{internalName:"choice-keto"}),a=r.planId,o=r.numPeople,i=r.numRecipes,s=r.cost;e.data={name:"keto",value:"choice-keto",isFamilyPlan:!1,menuSpecificSummary:"Our keto-friendly menu offers satisfying dinners designed for low-carb lifestyles. These tasty meals are gluten-free.",menuSpecificSummaryMobile:"Our keto-friendly menu offers satisfying dinners designed for low-carb lifestyles. These tasty meals are gluten-free.",landingBannerStateName:"keto-plan-landing",glutenCertified:!0,totalCost:s*o*i,planId:a,quantity:o*i},t.trackProductPageVisit(e.data)}]),angular.module("greenchef.on-the-menu").controller("PaleoMenuCtrl",["$scope","ConversionTracking","MenuService",function(e,n,t){$.stellar("refresh");var r=_.find(e.$parent.twoPersonPlans,{internalName:"choice-paleo"}),a=r.planId,o=r.numPeople,i=r.numRecipes,s=r.cost;e.data={name:"paleo",value:"choice-paleo",isFamilyPlan:!1,menuSpecificSummary:"Our paleo menu is rich in animal proteins and fresh produce, with no overly processed foods, grains, dried legumes, or dairy.",menuSpecificSummaryMobile:"Our paleo menu is rich in animal proteins & produce. No overly processed foods, grains, dried legumes, or dairy.",glutenCertified:!0,totalCost:s*o*i,planId:a,quantity:o*i},n.trackProductPageVisit(e.data),e.favorites=t.getFavoritesFromThePast("paleo"),e.testimonials=[{title:"Why green chefs love "+e.data.name,content:"&#8220;Been using Green Chef for a while and have not had a paleo meal we haven't enjoyed yet! Thanks for the most delicious fresh food and bringing the joy of cooking back! We're hooked&#8221;-",author:"Deborah P."},{title:"Why green chefs love "+e.data.name,content:"&#8220;I don't know what mad genius develops @greenchef recipes but we've been having some stellar Paleo dinners lately.&#8221;-",author:"@ettay"},{title:"Why green chefs love "+e.data.name,content:"&#8220;We do the paleo option. Delicious. Convenient. And it's really helped us stick to our diets.&#8221;-",author:"Sharon Blavier Hargrove"}]}]),angular.module("greenchef.on-the-menu").controller("VeganMenuCtrl",["$scope","ConversionTracking","MenuService",function(e,n,t){$.stellar("refresh");var r=_.find(e.$parent.twoPersonPlans,{internalName:"vegan"}),a=r.planId,o=r.numPeople,i=r.numRecipes,s=r.cost;e.data={name:"vegan",value:"vegan",isFamilyPlan:!1,menuSpecificSummary:"Our innovative plant-based dinners use natural, speciality ingredients, from in-house sauces to cashew cheese – and more!",menuSpecificSummaryMobile:"Our plant-based dinners use natural, speciality ingredients, from in-house sauces to cashew cheese & more.",totalCost:s*o*i,planId:a,quantity:o*i},n.trackProductPageVisit(e.data),e.favorites=t.getFavoritesFromThePast("vegan"),e.testimonials=[{title:"Why green chefs love "+e.data.name,content:"&#8220;I love Green Chef! It has changed my family's life. Dinner is so easy now. Cooking vegan food for my family was extremely challenging, now it's quick, easy, and it taste really good! Everyone should try it!&#8221;-",author:"Noelle Chavez"},{title:"Why green chefs love "+e.data.name,content:"&#8220;Green Chef- i love you! I have been very impressed with the vegan meals that ive received. Such a wide variety and pretty darn tasty- and this comes from a very picky vegan.&#8221;-",author:"Jennifer White"},{title:"Why green chefs love "+e.data.name,content:"&#8220;My entire life I've been a terrified and terrible cook. Pat recently surprised me with a subscription to the vegan menu from @greenchef and my world has been forever changed.&#8221;-",author:"allieboodle"}]}]),angular.module("greenchef.on-the-menu").controller("VegetarianMenuCtrl",["$scope","ConversionTracking","MenuService",function(e,n,t){$.stellar("refresh");var r=_.find(e.$parent.twoPersonPlans,{internalName:"choice-vegetarian"}),a=r.planId,o=r.numPeople,i=r.numRecipes,s=r.cost;e.data={name:"vegetarian",value:"choice-vegetarian",isFamilyPlan:!1,menuSpecificSummary:"Whether you're vegetarian or going meatless for the month, these unique dinners are designed to excite your taste buds.",menuSpecificSummaryMobile:"Whether you're vegetarian or taking a break from meat, these unique dinners will excite your taste buds.",totalCost:s*o*i,planId:a,quantity:o*i},n.trackProductPageVisit(e.data),e.favorites=t.getFavoritesFromThePast("vegetarian"),e.testimonials=[{title:"Why green chefs love "+e.data.name,content:"&#8220;Thanks Green Chef! As a vegetarian household with two working parents and two young kids it's awesome to have a delicious organic meal three times a week without the shopping or planning &#128522;&#8221;-",author:"David L."},{title:"Why green chefs love "+e.data.name,content:"&#8220;The vegetarian meals are superb. All of the sauces were perfect. And no waste!&#8221;-",author:"Pattie"},{title:"Why green chefs love "+e.data.name,content:"&#8220;I'm a vegetarian ER doctor with very little time and energy to cook and this is so wonderful for me and may have saved my marriage. Way to overshoot, Green Chef.&#8221;-",author:"Gabriel C."}]}]),function(){function e(e,r,a,o,i,s){function l(){var e=o.isAuthenticated();if(e){var r=o.getPayload(),a=!(r.trackingAttributes&&r.trackingAttributes.termsOfServiceAcceptance),i=t(u,p)&&n(u,g);c.shouldDisplay=a&&i}}var c=this;c.LegalUpdate=a;var u=moment(),d=moment(a.changeDate),p=moment(d).subtract(1,"month"),m=moment(d).add(1,"month"),g=moment(d).add(2,"months");s.getParams().today&&(u=moment(s.getParams().today)),c.shouldDisplay=!1,c.v1=t(u,p)&&moment(u).isBefore(d),c.v2=t(u,d)&&moment(u).isBefore(m),c.v3=t(u,m)&&n(u,g),c.acceptTerms=function(){var e=moment().format("YYYY-MM-DD");r.acceptTerms(e)},e.$on(i.userStatusUpdated,l)}function n(e,n){return moment(e).isSame(n)||moment(e).isBefore(n)}function t(e,n){return moment(e).isSame(n)||moment(e).isAfter(n)}e.$inject=["$scope","LegalChangesService","LegalUpdate","AuthService","AUTH_EVENTS","URLParam"],angular.module("greenchef.banners").controller("LegalChangesController",e)}(),function(){function e(){return{restrict:"E",templateUrl:"shared/legal-changes/legal-changes.tpl.html",controller:"LegalChangesController",controllerAs:"vm",scope:{}}}angular.module("greenchef.banners").directive("gcLegalChanges",e)}(),function(){function e(e,n){this.acceptTerms=function(t){e.all("user").customPUT({termsOfServiceAcceptance:t},"trackingAttributes").then(function(){n.refreshToken()})}}e.$inject=["GreenchefAPI","AuthService"],angular.module("greenchef.banners").service("LegalChangesService",e)}(),function(){function e(){return{restrict:"E",templateUrl:"terms/directives/20170828.privacy.tpl.html"}}angular.module("greenchef.terms").directive("currentPrivacy",e)}(),function(){function e(){return{restrict:"E",templateUrl:"terms/directives/20170828.tos.tpl.html"}}angular.module("greenchef.terms").directive("currentTerms",e)}(),function(){function e(){return{restrict:"E",templateUrl:"terms/directives/20150511.privacy.tpl.html"}}angular.module("greenchef.terms").directive("previousPrivacy",e)}(),function(){function e(){return{restrict:"E",templateUrl:"terms/directives/20150511.tos.tpl.html"}}angular.module("greenchef.terms").directive("previousTerms",e)}(),angular.module("greenchef.sign-up.delivery-details",[]).directive("gcSignupDeliveryDetails",function(){return{scope:{order:"=",enableAutomaticDeliveryDayChoice:"=",allPossibleShipping:"=",shippingDates:"=",nextShippingDates:"="},restrict:"E",templateUrl:"sign-up/delivery-details/delivery-details.tpl.html",controller:"SignupDeliveryDetailsDirectiveController"}}).factory("DeliveryDetailsService",["ShippingService",function(e){return{getDeliveryWindow:function(){function n(n,t){return e.findNewDeliveryWindow(null,n,t)}return n}(),getDeliveryDates:function(){function n(n,t){return e.findFirstDeliveryDate(n,t)}return n}()}}]).controller("SignupDeliveryDetailsDirectiveController",["$scope","DeliveryDetailsService","SignupDataService",function(e,n,t){function r(){var r=n.getDeliveryWindow(e.shippingDates,e.enableAutomaticDeliveryDayChoice),a=t.getField("deliveryWindow");e.order.deliveryWindow=e.shippingDates.availableDaysOfWeek.includes(a)?a:r,o(e.order.deliveryWindow)}function a(n){e.shippingDates=e.allPossibleShipping[n],i(),r()}function o(t){var r=n.getDeliveryDates(e.shippingDates,t);r&&(e.order.firstDeliveryDate=r.firstDeliveryDate,e.nextShippingDates=r.nextShippingDates,i())}function i(){_.forEach(e.order,function(e,n){e&&t.isUserField(n)&&t.setField(n,e)})}e.order.addressType=t.getField("addressType")||"home",r(),e.updateFirstDeliveryDate=o,e.updateShippingDates=a}]),angular.module("greenchef.sign-up.coupon",["ui.router","ui.bootstrap"]).config(["$stateProvider","$urlRouterProvider",function(e){e.state("sign-up-groupon",{url:"/sign-up-groupon",views:{main:{controller:"CouponController",templateUrl:"sign-up/coupon/groupon-landing.tpl.html"}},data:{pageTitle:"Sign-Up"}}).state("sign-up-livingsocial",{url:"/sign-up-livingsocial",views:{main:{controller:"CouponController",templateUrl:"sign-up/coupon/livingsocial-landing.tpl.html"}},data:{pageTitle:"Sign-Up"}}).state("sign-up-coupon",{url:"/sign-up-coupon",views:{main:{controller:"CouponController",templateUrl:"sign-up/coupon/coupon-landing.tpl.html"}},data:{pageTitle:"Sign-Up"}}).state("sign-up-holiday",{url:"/sign-up-holiday",views:{main:{controller:"CouponController",templateUrl:"sign-up/coupon/holiday-landing.tpl.html"}},data:{pageTitle:"Sign-Up"}}).state("sign-up-mma",{url:"/mma",views:{main:{controller:"CouponController",templateUrl:"sign-up/coupon/coupon-landing.tpl.html"}},data:{pageTitle:"Sign-Up"}}).state("sign-up-gilt",{url:"/sign-up-gilt",views:{main:{controller:"GiltController",templateUrl:"sign-up/coupon/coupon-landing.tpl.html"}},data:{pageTitle:"Sign-Up"}})}]).controller("CouponController",["$rootScope","$scope","$state","Alerts","PaymentService","URLParam","PAYMENT_EVENTS",function(e,n,t,r,a,o,i){n.couponSubmitted=!1,n.grouponCode=null,n.introTitle="Welcome",n.introBody="We're excited to help you cook wholesome, delicious meals at home. Green Chef delivers fresh, organic ingredients and original, easy-to-master recipes right to your door. Our weekly deliveries include all you need for 3 organic dinners for 2 or 4 people.<br/><br/>",n.introBody+="Green Chef is a weekly delivery service, but don't worry! We'll only send you Green Chef when you want it. Use your Delivery Schedule to manage when you receive your deliveries. Make sure you do so before your weekly cutoff time, 7 days before your delivery date.",t.is("sign-up-mma")&&(n.introTitle="From red carpet to Green Chef",n.introBody="Welcome to Green Chef. We send you fresh, organic, pre-measured ingredients and original recipes catered to your taste. We provide all you need for 3 nourishing, home-cooked meals in weekly deliveries.<br/><br/>",n.introBody+="We're here for you when you want us. You can skip orders or cancel whenever you wish. Simply click &ldquo;Delivery Schedule&rdquo; on your account page to skip next deliveries. Make sure you do so before your weekly cutoff time, 7 days before your delivery date."),r.init(n),n.submitCoupon=function(){r.clear(n),n.couponInvalid=!1,a.setTicket(n.grouponCode)},n.$on(i.couponInvalid,function(){n.couponInvalid=!0,r.error(n,"Invalid coupon code")});var s=function(e,n){n&&n.valid&&t.go("sign-up-v2.welcome")};n.$on(i.fetchedCouponCode,s)}]),angular.module("greenchef.sign-up.coupon").controller("GiltController",["$scope","$state","Alerts","PaymentService","URLParam","PAYMENT_EVENTS",function(e,n,t,r,a,o){function i(t,r){r&&r.valid&&e.couponSubmitted&&n.go("sign-up-v2.welcome")}function s(){t.clear(e),e.couponInvalid=!1,e.couponSubmitted=!0,r.setTicket(e.grouponCode)}function l(){e.couponInvalid=!0,e.couponSubmitted=!1,t.error(e,"Invalid coupon code")}e.couponGilt=!0,e.grouponCode=null,e.introTitle="Welcome Gilt Members",e.introBody="Thanks for signing up! We're excited to help you cook wholesome, delicious meals.<br/><br/>",e.introBody+="Green Chef delivers fresh, organic ingredients and original, tasty recipes right to your door. You'll get weekly deliveries with all you need for 3 organic dinners for 2 or 4 people, customized to your preferences. Green Chef is a weekly delivery service, but don't worry! We'll only send you Green Chef when you want it. Use your Delivery Schedule to manage when you receive your deliveries. Make sure you do so before your weekly cutoff time, 7 days before your delivery date by 9AM PST.",e.submitCoupon=s,t.init(e),e.$on(o.couponInvalid,l),e.$on(o.fetchedCouponCode,i)}]);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};angular.module("greenchef.sign-up.payment",["ui.router","ui.bootstrap"]).config(["$stateProvider",function(e){e.state("sign-up-v2.payment",{url:"/payment",resolve:{signupData:function(){function e(e,n){return e.getSignup().then(function(e){return n.filterPlansAndAddCopy(e)})}return e.$inject=["SiteCMSService","PlanInfoService"],e}(),priceTestGroup:function(){function e(e,n){return e.getOrSetABTest(n.pd12).then(function(n){return n?e.addUserToTest("price-drop",n,!0):void 0})}return e.$inject=["ABTest","AB_TESTVERSION_SPLIT"],e}()},views:{"sign-up":{controller:"Signup2PaymentCtl",templateUrl:"sign-up/payment/payment.tpl.html"}},data:{autoscroll:!0}})}]).controller("Signup2PaymentCtl",["$modal","$q","$scope","$state","AUTH_EVENTS","ERROR_CODE","PAYMENT_EVENTS","ABTest","AccountService","Alerts","AuthService","ConversionTracking","GreenchefAPI","MenuService","OrderService","PaymentService","PlanInfoService","PricingService","SignupDataService","SignupFlowService","signupData","tracker",function(e,n,t,r,a,o,i,s,l,c,u,d,p,m,g,f,h,v,y,b,S,P){function w(e){if(!e||"object"!==("undefined"==typeof e?"undefined":_typeof(e)))return!1;var n=["firstName","lastName","addressLine1","city","state","zipCode","phoneNumber"];return _.all(n,function(n){return!!e[n]})}function k(){r.go("sign-up-v2.shipping")}function C(e,n){n&&n.valid&&(t.coupon=n);var r=!1;t.coupon&&parseInt(t.order.numPeople)<parseInt(t.coupon.defaultPeopleOnOrder)&&(t.order.numPeople=t.coupon.defaultPeopleOnOrder,r=!0),t.invoice.updateForKitCode(t.order.mealPreference,t.order.numPeople*t.mealType.numRecipes).then(function(){t.orderFutureTerms=f.orderFutureTerms(t.mealType,t.coupon,t.order,t.invoice),r&&SignupAPI.all("order").customPUT(t.order).then(function(){},function(){P.error("order-error-saving",t.order)})})}function T(){var e=t.order.mealPreference,n=t.order.numPeople*t.mealType.numRecipes;return t.invoice.updateForKitCode(e,n)}c.init(t),t.showShipping=k,t.signupData=S,t.planInfo=h.getPlanInfoSortedByPopularity(),t.twoPersonPlans=h.getTwoPersonPlansSortedByPopularity(),t.familyPlans=h.getFamilyPlansSortedByPopularity(),t.order=y.getField("order"),t.signUpInfo=y.getField("signUpInfo"),t.nextShippingDates={value:y.getField("nextShippingDates")},t.paymentInfo={},t.password="",t.signUpInfo.isTestAccount&&(c.yellow(t,"You are creating a TEST account"),t.paymentInfo.name="Test Account");var M=f.initializeStripeElements(t);return w(t.order)?(t.mealType=m.getMealTypeObject(S.mealPlans,t.order.mealPreference),t.planInfo=m.getPlanSummary(t.mealType,t.order,S.mealPlans.planTypes),f.getCouponData(function(e){e&&e.valid&&(t.coupon=e,t.couponCode=e.couponType)},t),t.invoice=v.createInvoice(!0),C(),t.isEditEmail=!1,t.invalidCouponCode=!1,t.termsSignupFlow=!0,t.showShippingAddress=!0,t.showCompleteButton=!0,t.status={iHaveCode:!1,couponApplied:!1,couponCode:""},t.submitPayment=function(e){var a=new P.Timer("submitPayment");if(t.paymentSubmitted=!0,t.errorPayment=!1,c.clear(t),!t.creatingCustomer){var i=e.$valid;if(!i)return P.error("payment-invalid-field"),void 0;if(!g.validateOrder(t.order))return P.error("order-error-saving",t.order),t.errorPayment=!0,c.error(t,'Invalid address. Please check details on <a href ng-click="showShipping()">shipping</a> page.'),void 0;if(t.stripeCardNumberError||t.stripeCardCvcError||t.stripeCardExpiryError)return t.errorPayment=!0,P.error("payment-invalid-field",{cardNumberError:t.stripeCardNumberError,cvcError:t.stripeCardCvcError,cardExpiryError:t.stripeCardExpiryError}),!1;t.formSubmitting=!0;var m={testVersion:s.getVersion()};P.click("done",m),t.creatingCustomer=!0,a.step("call_stripe");var h={name:t.paymentInfo.name},v=void 0;if(t.signUpInfo.isTestAccount){var S={token:{id:"tok_visa",card:{fingerprint:"VSAxa3Y660rhuhOS"}}};v=Promise.resolve(S)}else v=f.getStripeInstance().createToken(M.cardNumber,h);v.then(function(e){if(c.clear(t),!e)return t.formSubmitting=!1,t.creatingCustomer=!1,t.errorPayment=!0,c.error(t,"An error occurred while processing your card. Try again in a little bit."),void 0;if(e.error)t.formSubmitting=!1,t.creatingCustomer=!1,t.errorPayment=!0,c.error(t,e.error.message),P.error("payment-stripe-error",e.error);else if(e.token){var i=e.token;if(a.step("stripe_done"),i.card&&"prepaid"===i.card.funding)return t.formSubmitting=!1,t.creatingCustomer=!1,t.errorPayment=!0,c.error(t,"We do not accept prepaid cards. Please enter a credit or debit card to continue."),P.error("payment-stripe-error",{funding:"prepaid"}),void 0;var g={name:t.paymentInfo.name,token:i.id,fingerprint:i.card.fingerprint,password:t.password},h=f.getCouponData();h&&h.valid&&(g.couponClaimMethod=h.couponClaimMethod,g.couponCode=f.getCouponCode()),g.orderTotal=t.invoice.total,g.testVersion=s.getVersion();var v=P.getCampaignParameters();v&&(g.registerCampaign=v);var S=[];S.push(s.addUserToTest("signup",s.getVersion(),!0)),S.push(s.addUserToTest("meal-choice","on",!0)),a.step("post_payment"),p.all("payment").customPOST(g).then(function(e){a.step("post_payment_done");var o=e.id;n.all(S).then(function(){u.refreshToken().then(function(){P.signUpDone(m),b.advance(r),t.creatingCustomer=!1,a.step("refresh_token").log();var e={pricePerServing:t.mealType&&t.mealType.cost||0,numServings:t.planInfo&&t.planInfo.mealNum||0,numBoxes:t.planInfo&&t.planInfo.boxNum||0,planId:t.mealType&&t.mealType.planId||"no-plan"};d.trackAddPaymentInfo(g,e),d.trackDoneSignup(g,t.order,o,t.signUpInfo.email,e),y.resetAllData()})})},function(e){t.formSubmitting=!1,t.errorPayment=!0,409==e.status&&"refreshToken"==e.data&&n.all(S).then(function(){u.refreshToken().then(function(){l.gotoMyAccount()})});var r;r=e.data&&e.data.attrs&&e.data.attrs.code===o.INCOMPLETE_ADDRESS?'Invalid address. Please check details on <a href ng-click="showShipping()">shipping</a> page.':f.getErrorMessage(e),c.error(t,r),P.error("payment-save-error",e),t.creatingCustomer=!1})}})}},t.applyCoupon=function(){t.invalidCouponCode=!1,f.fetchCouponTicket(t.status.couponCode).then(function(e){e.valid?f.setTicket(t.status.couponCode):t.invalidCouponCode=!0})},t.changeFirstDelivery=function(){t.newFirstDeliveryDate=t.order.firstDeliveryDate,t.modalInstance=e.open({templateUrl:"sign-up/summary/first-delivery-modal.tpl.html",windowClass:"first-delivery-modal",scope:t,controller:"SignupSummaryCtl"})},t.$on(a.userStatusUpdated,T),t.$on(i.fetchedCouponCode,C),t.$on(i.couponInvalid,function(){t.invalidCouponCode=!0}),t.$on(i.couponValid,function(){t.status.couponCode&&(t.status.couponApplied=!0),t.invalidCouponCode=!1}),void 0):(b.resetSignupFlow(r),void 0)}]),angular.module("greenchef.sign-up.preferences",["ui.router","ui.bootstrap"]).config(["$stateProvider",function(e){e.state("sign-up-v2.preferences",{url:"/preferences",resolve:{signupData:function(){function e(e){return e.getSignup()}return e.$inject=["SiteCMSService"],e}(),resolvePlanInfoService:function(){function e(e){return e.resolveData()}return e.$inject=["PlanInfoService"],e}()},views:{"sign-up":{controller:"Signup2PreferenceCtl",templateUrl:"sign-up/preferences/v2/v2Preferences.tpl.html"}}})}]).controller("Signup2PreferenceCtl",["$filter","$modal","$scope","$state","$q","AUTH_EVENTS","PAYMENT_EVENTS","ABTest","AccountService","Alerts","AuthService","ConversionTracking","DeliveryDetailsService","GreenchefAPI","MenuService","PaymentService","PlanInfoService","PricingService","SignupAPI","SignupDataService","SignupFlowService","signupData","tracker",function(e,n,t,r,a,o,i,s,l,c,u,d,p,m,g,f,h,v,y,b,S,P,w){function k(){return t.invoice.updateForKitCode(t.order.mealPreference,t.order.numPeople*t.selectedMealType.numRecipes)}function C(){var e;e=t.selectedMealPlan&&t.selectedMealFlow?t.selectedMealPlan:s.defaultMealPlan(),t.selectedMealType=g.getMealTypeObject(P.mealPlans,e)}function T(){var e=null,n=P.mealPlans.mealTypes;e=function(e){return e.value===t.selectedMealPlan?"standard":"specialty"};var r=_.groupBy(n,e),a=r.standard||[];t.selectedMealType=_.first(a),t.order.mealPreference=t.selectedMealType.value,t.order.numPeople=t.selectedMealType.numPeople,t.mealNum=g.getPlanSummary(t.selectedMealType,t.order).mealNum,k(),M()}function M(){t.planName=t.selectedMealType.planInfo.name}function D(){C(),t.order={numPeople:t.selectedMealType.numPeople,mealPreference:t.selectedMealType.value,addressType:"home",firstDeliveryDate:null,dietaryOptOuts:[],fromUI:"pref"},t.signUpInfo&&(t.order.zipCode=t.signUpInfo.zipCode),T(),k(),f.getCouponData(function(e){e&&e.valid&&parseInt(e.defaultPeopleOnOrder)>parseInt(t.order.numPeople)&&(t.order.numPeople=e.defaultPeopleOnOrder)},t)}function I(e){return t.userOption.number=e,w.click("num_people",{numPeople:e}),E(t.userOption)}function A(e){return t.userOption.plan=e,w.click("would_eat",{wouldEat:e.internalName}),E(t.userOption)}function x(e){return g.getRecommendedMealPlans(e.plan.internalName,e.number).then(function(e){t.mealPlanOptions=e.suggestedPlans,_.each(t.mealPlanOptions,function(e){var n=_.find(t.twoPersonPlans,{internalName:e.indicator});n&&(e.cost=n.cost)})}).then(function(){$("html, body").animate({scrollTop:$("#mealOptionChoices").offset().top-50},800)})}function E(e){return t.showMealPlanOption=e.number&&e.plan,t.needsNumber=!1,t.showMealPlanOption?x(e):(e.number||(t.needsNumber=!0),a.reject())}function R(e){t.selectedMealType=_.find(t.twoPersonPlans,{internalName:t.userOption.plan.internalName}),t.order.mealPreference=t.selectedMealType.internalName,t.order.numPeople=e*t.selectedMealType.numPeople,w.click("select_plan",{select_plan:t.order.mealPreference+e}),t.order.deliveryWindow=p.getDeliveryWindow(t.shippingDates,t.enableAutomaticDeliveryDayChoice);var n=p.getDeliveryDates(t.shippingDates,t.order.deliveryWindow);t.order.firstDeliveryDate=n.firstDeliveryDate,t.nextShippingDates.value=n.nextShippingDates,k(),t.submitPreference({$invalid:!1})}c.init(t),t.signUpInfo=b.getField("signUpInfo"),t.shippingDates=b.getField("shippingDates"),t.signUpInfo.isTestAccount&&c.yellow(t,"You are creating a TEST account."),t.nextShippingDates={value:[]},t.newPlanChoice=t.planChoice,t.deliveryDetailTemplate="sign-up/preferences/delivery-detail.tpl.html";var U=S.getUserFlow();t.selectedMealFlow="selectedMeal"===U,t.selectedMealPlan=b.getField("selectedMealPlan")||"keto",t.hideDeliveryDetails="swapWelcomePreferences"===U,t.invoice=v.createInvoice(!0),t.planName=null,t.order=null,t.selectedMealType=null,t.signupData=P,t.numberPeople=[1,2,3,4],t.errorValidation=!1,t.showMealPlanOption=!1,t.userOption={number:2},t.selectNumber=I,t.selectPlan=A,t.confirmMealPlanChoice=R,t.twoPersonPlans=h.getTwoPersonPlansSortedByPopularity(),D(),t.chooseMealPlan=function(e){t.order.mealPreference=e.value,t.selectedMealType=e,k()},t.changeServingSize=function(){t.servingSizeInBoxes=_.times(t.selectedMealType.planInfo.maxBoxNum,function(e){return t.selectedMealType.numPeople*(e+1)}),t.newOrder={numPeople:t.order.numPeople};var e=n.open({templateUrl:"sign-up/preferences/change-serving-modal.tpl.html",windowClass:"change-serving-modal",scope:t});e.result.then(function(){k()},function(){k()}),t.closeModal=function(n){n&&(t.order.numPeople=t.newOrder.numPeople),e.close()}},t.getDollarAmount=function(e){return g.getDollarAmount(e)},t.getCents=function(e){return g.getCents(e)},t.getBoxPerWeekDisplay=function(){var n=g.getBoxPerWeek(t.selectedMealType,t.order);return e("formatBoxNum")(n)},t.getBoxNum=function(){var e=g.getBoxPerWeek(t.selectedMealType,t.order);return e+" "+(e>1?"boxes":"box")},t.getNumMeals=function(){return t.order.numPeople*t.selectedMealType.numRecipes},t.submitPreference=function(e){if(c.clear(t),t.prefSubmitted=!0,e.$invalid)return w.error("pref-invalid-field",t.order),void 0;t.formSubmitting=!0;var n={pricePerServing:t.invoice.items[0].perPlate||0,numServings:t.invoice.items[0].qty||0,numBoxes:t.invoice.items.length,planId:t.invoice.items[0]._id||"no-plan"};"swapWelcomePreferences"===U?(c.clear(t),b.setField("order",t.order),S.advance(r).then(function(){d.trackDonePreference(t.invoice.total,t.order.mealPreference,n)})):y.all("order").customPUT(t.order).then(function(e){c.clear(t),e&&e.city&&e.state&&(t.order.city=e.city,t.order.state=e.state),b.setField("signUpInfo",t.signUpInfo),b.setField("order",t.order),b.setField("shippingDates",t.shippingDates),b.setField("nextShippingDates",t.nextShippingDates.value),S.advance(r).then(function(){d.trackDonePreference(t.invoice.total,t.order.mealPreference,n)})},function(e){if(t.formSubmitting=!1,409==e.status&&"refreshToken"==e.data)return u.refreshToken().then(function(){l.gotoMyAccount()}),void 0;c.error(t,e.data);var n=_.extend({status:e.status,message:e.data},t.order);w.error("order-error-saving",n)})},t.$on(o.userStatusUpdated,k),t.$on(i.fetchedCouponCode,function(e,n){t.signUpInfo.signupCoupon={claimMethod:n.couponClaimMethod,code:n.code,couponTypeCode:n.couponType},t.order.signupCoupon=t.signUpInfo.signupCoupon,t.couponDescription=n.orderLineDescription,k()})}]),angular.module("greenchef.sign-up.shipping",["ui.router","ui.bootstrap"]).config(["$stateProvider","$urlRouterProvider",function(e){e.state("sign-up-v2.shipping",{url:"/shipping",resolve:{signupData:function(){function e(e,n){return e.getSignup().then(function(e){return n.filterPlansAndAddCopy(e)})}return e.$inject=["SiteCMSService","PlanInfoService"],e}()},views:{"sign-up":{controller:"Signup2ShippingCtl",templateUrl:"sign-up/shipping/shipping.tpl.html"}},data:{autoscroll:!0}})}]).controller("Signup2ShippingCtl",["$modal","$q","$scope","$state","$http","$timeout","localStorageService","Alerts","AuthService","ConversionTracking","SignupAPI","Lookups","MenuService","PaymentService","PricingService","ShippingService","AccountService","ZipOfferService","SignupFlowService","SignupDataService","UspsAddressService","signupData","tracker","AUTH_EVENTS","PAYMENT_EVENTS",function(e,n,t,r,a,o,i,s,l,c,u,d,p,m,g,f,h,v,y,b,S,P,w,k,C){function T(){var e=t.order.mealPreference,n=t.order.numPeople*t.mealType.numRecipes;t.invoice.updateForKitCode(e,n).then(function(){t.orderFutureTerms=m.orderFutureTerms(t.mealType,t.coupon,t.order,t.invoice)})}function M(){var e=t.order.mealPreference,n=t.order.numPeople*t.mealType.numRecipes;return t.invoice.updateForKitCode(e,n)}function D(){t.servingSizeInBoxes=_.times(t.selectedMealType.planInfo.maxBoxNum,function(e){return t.selectedMealType.numPeople*(e+1)}),t.newOrder={numPeople:t.order.numPeople};var n=e.open({templateUrl:"sign-up/preferences/change-serving-modal.tpl.html",windowClass:"change-serving-modal",scope:t});n.result.then(function(){T()},function(){T()}),t.closeModal=function(e){e&&(t.order.numPeople=t.newOrder.numPeople),n.close()}}function I(e,n){var r=f.findFirstDeliveryDate(e,n);t.order.firstDeliveryDate=r.firstDeliveryDate,t.nextShippingDates.value=r.nextShippingDates}s.init(t),t.tryAutocompleteAddress=function(e){return S.tryAutocompleteAddress(e,t.order.state,t.order.city)},t.populateOtherAddressFields=function(e){w.click("autocomplete_select"),S.autofillAddressFields(e,t.order)},t.order=b.getField("order"),t.nextShippingDates={value:b.getField("nextShippingDates")},t.signUpInfo=b.getField("signUpInfo"),t.shippingDates=b.getField("shippingDates"),t.allPossibleShipping=b.getField("allPossibleShipping"),t.changeServingSize=D,t.signUpInfo.isTestAccount&&(s.yellow(t,"You are creating a TEST account."),t.order.isTestAccount=!0,t.order.addressLine1="5490 Conestoga Ct.",t.order.addressLine2="Unit A",t.order.phoneNumber="5555555555");var A=y.getUserFlow();t.termsSignupFlow=!1,t.selectedMealType=t.mealType=p.getMealTypeObject(P.mealPlans,t.order.mealPreference),"skippedPreference"===A&&(t.order.numPeople=t.mealType.numPeople,t.showNumBoxLink=!0),t.getBoxNum=function(){return p.getBoxPerWeek(t.selectedMealType,t.order)},m.getCouponData(function(e){e&&e.valid&&(t.coupon=e,t.couponCode=e.couponType)},t),t.planInfo=p.getPlanSummary(t.mealType,t.order),t.invoice=g.createInvoice(!0),T(),t.order.fromUI="ship",t.states=_.map(d.states,function(e){return e.postalCode}),t.showShippingAddress=!1,t.showCompleteButton=!1,t.changeFirstDelivery=function(){t.newFirstDeliveryDate=t.order.firstDeliveryDate,t.modalInstance=e.open({templateUrl:"sign-up/summary/first-delivery-modal.tpl.html",windowClass:"first-delivery-modal",scope:t,controller:"SignupSummaryCtl"})},t.updateAvailableDates=function(){t.order.zipCode&&5===t.order.zipCode.length&&f.getShippingDates(t.order.zipCode,t.order.addressType,void 0,!0).then(function(n){if(n&&n[t.order.addressType]){var r=n[t.order.addressType];r.availableDaysOfWeek.length<1||(s.clear(t),t.shippingDates=r,r.availableDaysOfWeek.length>0&&-1===r.availableDaysOfWeek.indexOf(t.order.deliveryWindow)&&(t.order.deliveryWindow=r.availableDaysOfWeek[0],I(t.shippingDates,t.order.deliveryWindow),o(function(){t.deliveryDayModal=e.open({templateUrl:"sign-up/shipping/delivery-window-modal.tpl.html",windowClass:"delivery-window-modal",scope:t,backdrop:"static",keyboard:!1}),t.closeDeliveryModal=function(e){e.$valid&&I(t.shippingDates,t.order.deliveryWindow),t.deliveryDayModal.close()}},1e3)))}},function(){return n.reject()})},t.zipBlur=function(){saveUserEnteredField(),w.action("zipcode_change")};var x=1,E=2,$=3,R={};t.submitShippingForm=function(e,a){s.clear(t),t.shippingSubmitted=!0;var o=!0,i=!1;_.forOwn(e,function(n,t){t.startsWith("$")||(o=o&&R[t]===e[t].$viewValue,i=i||!!e[t].$error.invalid,R[t]=e[t].$viewValue,e[t].$error.invalid=!1,e[t].$setValidity("invalid",!0))}),a=a||o&&i,e.$invalid||(t.formSubmitting=!0,u.all("order").customPUT(t.order,"",{forceSave:!!a}).then(function(e){return s.clear(t),l.refreshToken().then(function(){return l.isDeliverable()?(b.setField("signUpInfo",t.signUpInfo),b.setField("order",t.order),b.setField("shippingDates",t.shippingDates),b.setField("nextShippingDates",t.nextShippingDates.value),y.advance(r).then(function(){c.trackDoneShipping(t.order)
}),e):n.reject({code:x})})},function(e){return 409==e.status&&"refreshToken"==e.data?n.reject({code:E,error:e}):n.reject({code:$,error:e})})["catch"](function(n){if(t.formSubmitting=!1,n.code===E)l.refreshToken().then(function(){h.gotoMyAccount()});else if(n.code===x)s.error(t,"Unfortunately, your address is outside of our current delivery area. We look forward to serving you someday!"),w.error("order-error-saving",{status:200,message:"No delivery"});else{var r=n.error.data;if(r&&r.code&&r.error)f.processAddressValidationResponse(r,e,"Continue",t,t.submitShippingForm);else{s.error(t,n.error.data);var a=_.extend({status:n.error.status,message:n.error.data},t.order);w.error("order-error-saving",a)}}}))},t.$on(k.userStatusUpdated,M),t.$on(C.fetchedCouponCode,T);var U=["firstName","lastName","addressLine1","addressLine2","city","state","phoneNumber"];_.forEach(U,function(e){b.isUserField(e)&&(t.order[e]?b.setField(e,t.order[e]):t.order[e]=b.getField(e))}),t.saveUserEnteredFields=function(){_.forEach(t.order,function(e,n){e&&b.isUserField(n)&&b.setField(n,e)})}}]),angular.module("greenchef.sign-up.thankyou",["ui.router","ui.bootstrap"]).config(["$stateProvider","$urlRouterProvider",function(e){function n(e,n){var t=e.defer();return n.then(function(e){t.resolve(e)},function(e){console.log(e),t.resolve({})}),t.promise}e.state("sign-up-v2.thank-you",{url:"/thank-you",resolve:{orderData:function(){function e(e,t){return n(t,e.all("order").customGET())}return e.$inject=["GreenchefAPI","$q"],e}(),referralLinkData:function(){function e(e,t){return n(t,e.all("referrals").customGET())}return e.$inject=["GreenchefAPI","$q"],e}(),userData:function(){function e(e,n,t){return e.isDoneSignup()?e.getUserInfo():t.when(null)}return e.$inject=["AuthService","ABTest","$q"],e}(),showHearAboutUs:function(){function e(e,n){return e.getOrSetABTest(n)}return e.$inject=["ABTest","AB_HEAR_ABOUT_US"],e}()},views:{"sign-up":{controller:"Signup2ThankYouCtl",templateUrl:"sign-up/thankyou/thank-you.tpl.html"}},data:{autoscroll:!0}})}]).controller("Signup2ThankYouCtl",["SocialSharingService","$scope","$log","MenuService","orderData","referralLinkData","userData","showHearAboutUs","$state","$rootScope","tracker","ABTest","AccountService",function(e,n,t,r,a,o,i,s,l,c,u,d,p){function m(){return r.getNextEditableDeliveryDay()}function g(){var e=document.getElementById("referralLink");e.focus(),e.setSelectionRange(0,e.value.length),selectedText=e.value,document.execCommand("copy")}function f(){var e,n=navigator.userAgent,t=n.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return t=t[2]?[t[1],t[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(e=n.match(/version\/(\d+)/i))&&t.splice(1,1,e[1]),"Safari"===t[0]&&parseInt(t[1])<10?!0:!1}function h(){return n.formFeedback.feedbackValue?!1:!0}function v(){n.responseFeedback=!0;var e="Other"===n.formFeedback.feedbackValue?"other:"+n.formFeedback.feedbackValueOther:n.formFeedback.feedbackValue;return u.click("submit_feedback",{feedback:e}),e}function y(){n.responseFeedback=!1,n.focusedMe="Other"===n.formFeedback.feedbackValue?!0:!1}function b(){n.formFeedback.feedbackValue="Other",n.responseFeedback=!1}n.order=a,n.linkData=o,n.showHearAboutUs=s,n.getPlanChangeDeliveryDay=m,n.copyReferralLink=g,n.isSafariLessThanTen=f(),n.gotoMyAccount=p.gotoMyAccount,n.responseFeedback=!1,n.formFeedback={},n.checkRadioIsSelected=h,n.submitSurvey=v,n.focused=b,n.selectOption=y,n.surveyData=["Print publication (magazine, newspaper)","TV commercial","TV show","Facebook","Pinterest","YouTube","Consumer Reports","Friend or family","Website article/blog post","Internet search","Mailer","Radio","Podcast","Digital ads","Instagram","Twitter","Event (charity, fundraiser)","Coupon card"].sort(function(){return.5-Math.random()}),n.surveyData.push("Other"),e.init(n,o,i)}]).directive("focusMe",["$timeout",function(e){return{restrict:"A",scope:{trigger:"@focusMe"},link:function(){function n(n,t){n.$watch("trigger",function(n){"true"===n&&e(function(){t[0].focus()})})}return n}()}}]),angular.module("greenchef.sign-up.summary",[]).controller("SignupSummaryCtl",["$window","$rootScope","$scope","$modal","AuthService","SIGNUP_STATE","GreenchefAPI","SignupAPI","tracker",function(e,n,t,r,a,o,i,s,l){t.changeFirstDelivery=function(){t.newFirstDeliveryDate=t.order.firstDeliveryDate,t.modalInstance=r.open({templateUrl:"sign-up/2.2-first-delivery-modal.tpl.html",windowClass:"first-delivery-modal",scope:t}),t.modalInstance.result.then(function(){},function(){})},t.selectedFirstDelivery=function(e){t.order.firstDeliveryDate=e,t.modalInstance.close(!0),a.getSignupState()===o.lead&&s.all("order").customPUT(t.order).then(function(){},function(){l.error("order-error-updating",t.order)})},t.closeDeliveryModal=function(){t.modalInstance.dismiss(!1)}}]),angular.module("greenchef.sign-up.welcome").config(["$stateProvider","$urlRouterProvider",function(e){e.state("sign-up-v2.welcome",{url:"/welcome",params:{email:null,zipCode:null,signupState:null,familyPlanInfo:null},views:{"sign-up":{controller:"Signup2WelcomeCtl",templateUrl:"sign-up/welcome/welcome.tpl.html"}},data:{autoscroll:!0}})}]).controller("Signup2WelcomeCtl",["$q","$scope","$state","$stateParams","$modal","ABTest","tracker","PaymentService","Alerts","AuthService","AccountService","Google360Service","ShippingService","ZipOfferService","ConversionTracking","SignupFlowService","SignupDataService","WelcomeFormService","DELIVERY_STATE","SIGNUP_STATE","SIGNUP_ERROR_CODES","LegalUpdate",function(e,n,t,r,a,o,i,s,l,c,u,d,p,m,g,f,h,v,y,b,S,P){return n.LegalUpdate=P,r.signupState!==b.lead&&c.isAuthenticated()&&c.isDoneSignup()?(u.gotoMyAccount(),void 0):(n.swapWelcomePreferencesTemplate=!1,"swapWelcomePreferences"===f.getUserFlow()&&(n.order=h.getField("order"),n.swapWelcomePreferencesTemplate=!0),l.init(n),n.signUpInfo={tests:{}},n.signUpInfo.email=h.getField("email"),n.signUpInfo.zipCode=h.getField("zipCode"),n.alertTestUser=function(){l.clear(n),l.yellow(n,"You are creating a TEST account. Hooray!")},n.saveUserEnteredFields=function(){var e=/(\+).*(@greenchef.com)/g;_.forEach(n.signUpInfo,function(t,r){"email"===r&&t&&t.match(e)&&(n.signUpInfo.userType="test",n.signUpInfo.isTestAccount=!0,n.alertTestUser()),t&&h.isUserField(r)&&h.setField(r,t)})},n.submitStart=function(e){return l.clear(n),n.startSubmitted=!0,e.$invalid?(i.error("signup2-invalid-field"),void 0):(d.trackEvent("funnel","continueCtaClick",n.signUpInfo.zipCode+" | "+n.signUpInfo.email),n.formSubmitting=!0,v.processStartForm(n.signUpInfo,r.familyPlanInfo,n.order)["catch"](function(e){e===S.ERR_NODELIVERY?l.error(n,"Darn! Looks like we don’t currently deliver to that zip code."):e===S.ERR_INVALID_ZIPCODE?l.error(n,e.message):e===S.ERR_EMAILEXISTS?l.error(n,"The email address is already taken. <a href ui-sref='sign-in'>Please sign in or use a different email address.</a>"):l.error(n,"Could not sign up. Please try again later."),n.formSubmitting=!1}),void 0)},void 0)}]),angular.module("greenchef.sign-up.welcome").constant("SIGNUP_ERROR_CODES",{ERR_NODELIVERY:1,ERR_EMAILEXISTS:2,ERR_USER_CREATE:3,ERR_INVALID_ZIPCODE:4}).controller("BaitAndHurrayModalController",["$modalInstance","$scope","cityName","deal","dealDescription","tracker",function(e,n,t,r,a,o){function i(){e.close()}n.cityName=t,n.dealDescription=a,n.deal=r,o.view("suf_bonus_popup_"+r),n.cancelModal=i}]).service("WelcomeFormService",["$modal","$q","$state","AB_ORG_BONUS","AB_TESTVERSION_SPLIT","DELIVERY_STATE","SIGNUP_ERROR_CODES","ABTest","AuthService","ConversionTracking","Google360Service","PaymentService","SignupDataService","SignupFlowService","ZipOfferService","tracker",function(e,n,t,r,a,o,i,s,l,c,u,d,p,m,g,f){function h(t,g,h){var y=t,b=f.getCampaignParameters();y.testVersion=s.getVersion(),b.utm_campaign&&(y.customerProfile={signupCampaign:b});var S=d.getCouponData();S&&"referral-link"==S.couponClaimMethod&&(y.referralPath=d.getCouponCode());var P=!1,w="",k="";return s.getOrSetABTest(r).then(function(e){return k=e,v(y.zipCode)}).then(function(e){if(e===!0&&(!S||S&&"referral"!=S.couponClaimMethod)){P=e;var n=s.zipOfferReplacementCoupon(k);return d.setCoupon(n)}}).then(function(){var e=d.getCouponData();return e&&(y.signupCoupon={claimMethod:e.couponClaimMethod,code:d.getCouponCode(),couponTypeCode:d.getCouponType()},w=e.orderLineDescription),s.getOrSetABTest(a.pd12)}).then(function(e){return h&&(y.order=h),e&&(y.tests["price-drop"]=e),y.tests["suf-flow-id"]=m.getUserFlow(),l.signUpAsLead(y)}).then(function(t){{var r=t.shippingDates;l.getDeliveryState()}if(l.getDeliveryState()===o.noDelivery)return n.reject({code:i.ERR_NODELIVERY});if(p.setField("signUpInfo",y),p.setField("allPossibleShipping",r),p.setField("shippingDates",r.home),p.setField("couponDescription",w),h&&(h.city=t.order.city,h.state=t.order.state,h.zipCode=y.zipCode,p.setField("order",h)),g&&("showFamilyChoice"in g&&p.setField("showFamilyChoice",g.showFamilyChoice),"enableFamilyPlans"in g&&p.setField("enableFamilyPlans",g.enableFamilyPlans)),P){f.abtest("org-bonus",k),u.trackEvent("funnel","welcomePopupBonus","impression");var a,v,b=t.order&&t.order.city?t.order.city:"your neighborhood";s.enableZipOfferPopupAmount()?(a=w.toLowerCase(),v=a+" your first order"):(a=s.numOfFreeMeals()+" meals free",v=a);var S=e.open({templateUrl:"sign-up/welcome/bait-and-hurray.tpl.html",windowClass:"bait-and-hurray",backdropClass:"bait-and-hurray-backdrop",controller:"BaitAndHurrayModalController",resolve:{cityName:function(){function e(){return b}return e}(),dealDescription:function(){function e(){return v}return e}(),deal:function(){function e(){return a}return e}()}}),C=function(){"skippedPreference"===m.getUserFlow()&&(t.order.mealPreference=p.getField("selectedMealPlan"),t.order.addressType="home",p.setField("order",t.order)),m.advance().then(function(){c.trackDoneEmailZipCapture(l.getPayload().id,d.getCouponCode(),y.email.toLowerCase(),y.zipCode)})};S.result.then(C,C)}else m.advance().then(function(){c.trackDoneEmailZipCapture(l.getPayload().id,d.getCouponCode())})},function(e){return 403===e.status?1007===e.data.error.code?n.reject({code:i.ERR_INVALID_ZIPCODE,message:e.data.error.message}):(f.error("signup-duplicate-email",{email:y.email}),n.reject(i.ERR_EMAILEXISTS)):(f.error("signup-unknown"),n.reject(i.ERR_USER_CREATE))})}function v(e){var t=n.defer();return s.alwaysShowZipOfferPopup()?(t.resolve(!0),t.promise):n(function(n){g.shouldGetZipOffer(e).then(function(e){n(e)})})}return{processStartForm:h}}]),function(){function e(e,n,t){function r(e){o.selectedIndex=e,a(),o.selectCart({$event:e}),n.click("date-tab",{menuDate:o.displayCarts[e].menuDate})}function a(){o.selectedDeliveryDate=o.carts[o.selectedIndex].deliveryDate}var o=this;o.select=r,o.displayCarts=t.hydrateCarts(o.carts),e.$watch("vm.carts",function(e,n){e!==n&&(o.displayCarts=t.hydrateCarts(o.carts),o.select(o.selectedIndex))}),o.selectCartForDate=function(e){var n=moment(e).startOf("isoWeek").format("YYYY-MM-DD");r(_.findIndex(o.displayCarts,function(e){return e.menuDate===n}))},o.selectedIndex=0,a()}e.$inject=["$scope","tracker","CalendarNavService"],angular.module("greenchef.account").controller("CalendarNavController",e)}(),angular.module("greenchef.account").directive("gcCalendarNav",function(){return{restrict:"E",controller:"CalendarNavController",controllerAs:"vm",templateUrl:"account/directives/calendar-nav/calendar-nav.tpl.html",scope:{carts:"=",selectCart:"&"},bindToController:!0}}),angular.module("greenchef.account").service("CalendarNavService",function(){this.hydrateCarts=function(e){var n=_.cloneDeep(e);return _(n).groupBy(function(e){return moment(e.deliveryDate).day("monday").format("YYYY-MM-DD")}).mapValues(function(e,n){return{dates:_(e).map(function(e){return moment(e.deliveryDate)}).sortBy(function(e){return e.day()}).value(),status:_(e).map("status").contains("DELIVERY")?"DELIVERY":"SKIP",singleDate:1===e.length,sameDate:_.every(e,function(n){return n.deliveryDate===_.first(e).deliveryDate}),menuDate:n}}).pairs().sortBy(function(e){return e[0]}).map(function(e){return e[1]}).first(5).value()}}),angular.module("greenchef.account").controller("AddressFormWithValidationController",["Alerts","UspsAddressService","ShippingService","GreenchefAPI",function(e,n,t,r){var a=this;a.tryAutocompleteAddress=function(e){return n.tryAutocompleteAddress(e,a.address.state,a.address.city)},a.populateOtherAddressFields=function(e){n.autofillAddressFields(e,a.address)};var o={};a.clearAddressForm=function(){o={},e.init(a),a.formSubmitted=!1,a.cancelAddress()},a.clearAddressForm(),a.submitAddress=function(n,i){e.clear(a),a.formSubmitted=!0;var s=!0,l=!1;_.forOwn(n,function(e,t){t.startsWith("$")||(s=s&&o[t]===n[t].$viewValue,l=l||!!n[t].$error.invalid,o[t]=n[t].$viewValue,n[t].$error.invalid=!1,n[t].$setValidity("invalid",!0))}),i=i||s&&l;var c=n.$valid;return c?r.one("users","user-"+a.userId).customPOST(a.address,"address/validate",{forceSave:!!i}).then(function(e){e.phoneNumber=a.address.phoneNumber,e.addressType=a.address.addressType,e.labelName=a.address.labelName,a.addAddress(e.plain()),n.$submitted=!1,a.formSubmitted=!1},function(r){n.$submitted=!1;var o=r.data;o&&o.code&&o.error?(a.order=a.address,t.processAddressValidationResponse(o,n,"Add Address",a,a.submitAddress)):e.error(a,r.data)}):(n.$submitted=!1,void 0)}}]),angular.module("greenchef.account").directive("gcAddressForm",function(){return{restrict:"E",templateUrl:"account/directives/address-form/address-form.tpl.html",scope:{address:"=",addAddress:"=",cancelAddress:"&",userId:"="},controller:"AddressFormWithValidationController",controllerAs:"vm",bindToController:!0}}),function(){function e(e,n,t,r){function a(e,n){e!==n&&(o.calendarData=r.populateCalendarData(o.carts,o.selectedDeliveryDate))}var o=this;o.calendarData=r.populateCalendarData(o.carts,o.selectedDeliveryDate),o.hideCalendar=!0,o.collapseCalendar=function(){o.hideCalendar=!0},o.selectDate=function(e){o.selectCartForDate({$event:e.date})};var i=n[0].getElementsByClassName("calendar-btn")[0],s=n[0].getElementsByClassName("calendar-container")[0];n.bind("click",function(n){i.contains(n.target)||s.contains(n.target)||o.hideCalendar||e.$apply(o.collapseCalendar)}),e.$watch("vm.carts",a),e.$watch("vm.selectedDeliveryDate",a)}e.$inject=["$scope","$document","$window","CalendarUiService"],angular.module("greenchef.account").controller("CalendarUiController",e)}(),angular.module("greenchef.account").directive("gcCalendarUi",function(){return{restrict:"E",controller:"CalendarUiController",controllerAs:"vm",templateUrl:"account/directives/calendar-ui/calendar-ui.tpl.html",scope:{carts:"=",selectedDeliveryDate:"@",selectCartForDate:"&"},bindToController:!0}}),angular.module("greenchef.account").service("CalendarUiService",["calendrical",function(e){this.populateCalendarData=function(e,n){var t=_.chain(e).cloneDeep().sortBy("deliveryDate").groupBy("deliveryDate").forIn(function(e,n,t){var r=_(e).map("status").contains("DELIVERY")?"DELIVERY":"SKIP";t[n]=r}).value(),r=this.buildMonthData(t),a=this.addCartsToMonthData(r,t,n);return a},this.buildMonthData=function(n){return _.chain(_.keys(n)).sort().reduce(function(e,n){var t=moment(n),r=t.month(),a=_.find(e,function(e){return e.month===r});return a||e.push({month:r,year:t.year()}),e},[]).map(function(n){var t=moment().month(n.month).year(n.year).date(1).hour(1);return{title:t.format("MMMM YYYY"),dates:e.getWeeksInMonth(new Date(t),{weekStartsWith:1})}}).value()},this.addCartsToMonthData=function(e,n,t){var r=moment(t);return _.map(e,function(e){return e.dates=_.map(e.dates,function(e){var t=!1;return _.forEach(e,function(e){var a=moment(e.date).format("YYYY-MM-DD");n[a]&&(e.status=n[a]),moment(e.date).isSame(r,"day")&&(t=!0)}),{currentWeek:t,days:e}}),e})}}]),function(){function e(e,n,t,r,a,o,i,s,l,c,u,d,p){function m(){return _.isEqual(_.omit(k.upcomingCart.address,"labelName"),_.omit(k.upcomingSubscription.address,"labelName"))}function g(){return _.isEqual(k.upcomingCart.items[0].quantity,k.upcomingSubscription.quantity)}function f(e){return e?k.isMenuWeekSelectable()&&_.some(k.upcomingCart.recipes,function(n){return n._id===e._id}):void 0}function h(){u.isMobile()&&e.$evalAsync(function(){var e="cart"+k.upcomingCart.index+"Owl";k.showRecipes||k.loadingRecipes||(e+="-empty"),u.initOwl({id:e,mobileitemcount:2,margin:20})}),void 0!==k.clearSelectedRecipes&&k.clearSelectedRecipes()}function v(){var e=s.getMealTypeObject(k.mealPlans.mealPlans,k.upcomingCart.mealPreference.mealPlan);k.planName=e.name,k.isFamilyPlan=e.isFamilyPlan,k.isChoicePlan=s.isUserChoicePlan(k.upcomingCart.mealPreference.mealPlan),k.cutOff=moment(k.upcomingCart.cutoffTime).isBefore(),k.cutoffTime=moment(k.upcomingCart.cutoffTime).format("dddd, MMMM Do"),k.addressModification=c.getAddressString(k.upcomingCart.address),k.upcomingCart.recipes=_.compact(k.upcomingCart.recipes),k.showRecipes=s.processRecipes(k.upcomingCart.recipes,k.isFamilyPlan),k.sortChoiceRecipesCallback(k.upcomingCart,k.currentPlan),h()}function y(){r.click("skip-order",{menuUser:k.upcomingCart.menuUserId,deliveryDate:k.upcomingCart.deliveryDate}),n.open({templateUrl:"account/modals/skip-order/skip-order.tpl.html",windowClass:"skip-order-modal",controller:"SkipOrderController",controllerAs:"vm",resolve:{mealPlans:function(){function e(){return k.mealPlans.mealPlans}return e}(),otherMenus:function(){function e(){var e=k.upcomingCart.mealPreference.mealPlan,n=k.upcomingCart.deliveryDate;return i.getRecommendedKits(e,n)}return e}(),upcomingCart:k.upcomingCart,subscription:k.upcomingSubscription}}).result.then(function(e){if("skipOrder"===e.action){k.updateCartInScopeCallback(e.updatedCart);var t=moment().format("YYYY-MM-DD");o.getUserCarts(e.updatedCart.userId,t,p.limit).then(function(e){k.updateAllCartsInScopeCallback(e)})}else"getPlan"===e.action&&(k.updateCartInScopeCallback(e.updatedCart),r.view("success-order-replaced"),n.open({templateUrl:"account/modals/confirm-selection/confirm-selection.tpl.html",windowClass:"confirm-selection-modal",controller:"ConfirmSelectionController",controllerAs:"vm",resolve:{newPlanName:function(){function n(){return e.newPlanName}return n}(),oldPlanName:function(){function n(){return e.oldPlanName}return n}(),affectedDeliveryDate:function(){function n(){return e.updatedCart.deliveryDate}return n}(),updatedCart:e.updatedCart}}))})}function b(){var e={status:"DELIVERY"};o.updateUserCart(k.upcomingCart.userId,k.upcomingCart.id,e).then(function(e){r.click("unskip-order",{menuUser:e.menuUserId,deliveryDate:k.upcomingCart.deliveryDate});var n=moment().format("YYYY-MM-DD");o.getUserCarts(e.userId,n,p.limit).then(function(e){k.updateAllCartsInScopeCallback(e),l.showRAF()})})}function S(){r.click("modify-order",{menuUser:k.upcomingCart.menuUserId}),n.open({controllerAs:"vm",templateUrl:"account/modals/upcoming-order/upcoming-order.tpl.html",windowClass:"upcoming-order-modal",controller:"UpcomingOrderController",resolve:{mealPlans:k.mealPlans.mealPlans,orderToModify:k.upcomingCart,upcomingSubscription:k.upcomingSubscription,user:k.user}}).result.then(function(e){var t=e.savedCart.deliveryDate,r=P(k.upcomingCart,e.savedCart);e.savedCart&&k.updateCartInScopeCallback(e.savedCart),n.open({templateUrl:"account/modals/local-change-notification/local-change-notification.tpl.html",windowClass:"change-notification-modal",controller:"LocalChangeNotificationController",controllerAs:"vm",resolve:{cartDate:function(){function e(){return t}return e}(),cartUpdate:r}})})}function P(e,n){var r={};if(_.isEqual(e.address,n.address)||(r["Shipping Address"]=c.getAddressString(n.address)),e.deliveryDate!==n.deliveryDate&&(r["Delivery day"]=t("date")(n.deliveryDate,"MMMM d")),e.mealPreference.mealPlan!==n.mealPreference.mealPlan){var a=s.getMealName(k.mealPlans.mealPlans,n.mealPreference.mealPlan);r.Menu=t("capitalizeFirst")(a);var o=_.map([e.mealPreference.mealPlan,n.mealPreference.mealPlan],function(e){return s.isUserFamilyPlan(e)}),i=o[0],l=o[1];i!==l&&(r.Plan=l?"Family Plan":"2-Person Plan")}if(!_.isEqual(e.mealPreference.dietaryOptOuts,n.mealPreference.dietaryOptOuts)){var u=s.listDietaryOptOuts(n.mealPreference);u&&(r["Opt Outs"]=u)}return e.items[0].quantity!==n.items[0].quantity&&(r["No. of Boxes"]=n.items[0].quantity),r}function w(){$("html, body").animate({scrollTop:$(".order-summary-detail").offset().top-50},800)}var k=this;k.showSkipOrderPopup=y,k.unskipOrderChange=b,k.viewUpcomingOrder=S,k.showModificationAddress=m,k.showModificationQuantity=g,k.showRecipeSelectedTag=f,k.isFamilyPlan=s.isUserFamilyPlan(k.upcomingCart.mealPreference.mealPlan),k.isChoicePlan=s.isUserChoicePlan(k.upcomingCart.mealPreference.mealPlan),k.disableActions=a.isSuspended(),k.editMode=!1,k.choiceRecipes=[],k.editButtonText="0 of 3 SELECTED",k.readyToSave=!1,d.init(k),v(),e.$watch("vm.upcomingCart",function(e,n){e!==n&&v()}),k.toggleEditMode=function(e){k.editMode=e,k.editMode===!1&&k.clearSelectedRecipes()},k.isMenuWeekSelectable=function(){return k.currentPlan.recipes&&k.currentPlan.recipes.length>3&&k.isChoicePlan},k.selectNewRecipes=function(e,n){if(k.choiceRecipes.includes(e._id)||n!==!0){var t=k.choiceRecipes.indexOf(e._id);k.choiceRecipes.splice(t,1)}else k.choiceRecipes.push(e._id);k.updateEditButtonText()},k.selectedRecipeClass=function(e){return k.editMode&&e},k.updateEditButtonText=function(){3===k.choiceRecipes.length?(k.editButtonText="SAVE CHANGES",k.readyToSave=!0):(k.editButtonText=k.choiceRecipes.length+" of 3 selected",k.readyToSave=!1)},k.disableUncheckedBoxes=function(e){return 3!==k.choiceRecipes.length||e?void 0:!0},k.saveSelectedRecipes=function(){if(k.readyToSave===!0){var e=k.upcomingCart.userId,n=k.upcomingCart.id,t=k.choiceRecipes;o.updateMealChoiceCart(e,n,t).then(function(e){k.upcomingCart.recipes=e.recipes,v(),w(),l.showRAF()})}},k.clearSelectedRecipes=function(){k.editMode=!1,k.choiceRecipes=[],k.editButtonText="0 of 3 SELECTED";var e=k.currentPlan&&k.currentPlan.recipes?k.currentPlan.recipes:[];e.forEach(function(e){e&&(e.checkedStatus=!1)})},k.isCartDeliverable=function(){return"DELIVERY"===k.upcomingCart.status},k.getNoRecipeCaptions=function(){var e=["Still cooking...","Check back soon."];return k.isFamilyPlan||e.push("This menu is in the works."),e}}e.$inject=["$scope","$modal","$filter","tracker","AuthService","FlexibleOrderingAPI","SiteCMSService","MenuService","Modals","OrderService","YourPlanService","Alerts","NUM_CARTS_FETCHED"],angular.module("greenchef.account").controller("CartDetailController",e)}(),angular.module("greenchef.account").directive("gcCartDetail",function(){return{restrict:"E",controller:"CartDetailController",controllerAs:"vm",templateUrl:"account/directives/cart-detail/cart-detail.tpl.html",scope:{upcomingSubscription:"=",upcomingCart:"=",currentPlan:"=",mealPlans:"=",user:"=",sortChoiceRecipesCallback:"=",updateCartInScopeCallback:"=",updateAllCartsInScopeCallback:"=",navigateToRecipePage:"="},bindToController:!0}}),angular.module("greenchef.account").controller("DropdownUiController",["$scope",function(e){var n=this;n.makeSelection=function(e){n.selectedIndex=e,n.setSelectedItemCallback({selectedItem:n.dropdownItemList[e]})},n.makeSelection(n.selectedIndex),e.$watch("vm.dropdownItemList",function(e,t){e!==t&&n.makeSelection(0)})}]),angular.module("greenchef.account").directive("gcDropdownMenu",function(){return{restrict:"E",transclude:!0,controller:"DropdownUiController",controllerAs:"vm",templateUrl:"account/directives/dropdown-menu/dropdown-menu.tpl.html",scope:{dropdownItemList:"=",selectedIndex:"=",setSelectedItemCallback:"&"},bindToController:!0}}),function(){function e(e,n){function t(){return moment(a.order.cutoffTime).isBefore()}function r(){return n.getMealTypeObject(a.mealPlans.mealPlans,a.order.mealPreference.mealPlan)}var a=this;a.viewOrderDetail=!1,a.toggleViewOrderDetail=function(){a.viewOrderDetail=!a.viewOrderDetail},a.planDetail=r(),a.cutOff=t(),e.$watch("vm.order",function(e,n){e!==n&&(a.planDetail=r(),a.cutOff=t())})}e.$inject=["$scope","MenuService"],angular.module("greenchef.account").controller("OrderDetailController",e)}(),angular.module("greenchef.account").directive("gcNWODetail",function(){return{restrict:"E",controller:"OrderDetailController",controllerAs:"vm",templateUrl:"account/directives/order-detail/order-detail.tpl.html",scope:{order:"=",mealPlans:"="},bindToController:!0}}),angular.module("greenchef.account.modals").controller("ConfirmSelectionController",ConfirmSelectionController),function(){function e(e,n,t,r,a,o){function i(e,n){var t={};if(e.quantity!==n.quantity&&(t.quantity=n.quantity),e.deliveryWindow!==n.deliveryWindow&&(t.deliveryWindow=n.deliveryWindow),e.interval!==n.interval){var r=n.interval/7;t.frequencyMessage=l(r)}return _.isEqual(e.mealPreference.dietaryOptOuts,n.mealPreference.dietaryOptOuts)||(t.dietaryOptOutsMessage=o.listDietaryOptOuts(n.mealPreference)),e.mealPreference.mealPlan!==n.mealPreference.mealPlan&&(t.mealPlan=n.mealPreference.mealPlan.name,e.mealPreference.mealPlan.isFamilyPlan!==n.mealPreference.mealPlan.isFamilyPlan&&(t.planName=n.mealPreference.mealPlan.planInfo.name.toLowerCase())),e.intervalStartDate!==n.intervalStartDate&&n.intervalStartDate!==a.deliveryDate&&(t.intervalStartDate=moment(n.intervalStartDate).format("dddd, MMMM Do")),0===_.size(t)&&(t.none=!0),t}function s(){var e="";return a&&(e="These changes will affect your plan after <b>"+moment(a.deliveryDate).format("dddd, MMMM Do")+"</b>.</br>",moment().isAfter(moment(a.cutoffTime))&&(e+="&ast;Your current order is past the cut-off and will not be affected.</br>")),e}function l(e){return 1==e?"weekly":e+" weeks"}function c(){n.dismiss()}var u=this;u.subscriptionUpdate=i(t,r),u.mealPlan=u.subscriptionUpdate.mealPlan,u.footerMessage=s(),u.cancel=c}e.$inject=["$scope","$modalInstance","subscription","updatedSubscription","cart","MenuService"],angular.module("greenchef.account.modals").controller("ConfirmSubscriptionController",e)}(),function(){function e(e,n,t,r,a){function o(e){for(var n=0;n<s.shippingDates.availableDaysOfWeek.length;++n)if(s.shippingDates.availableDaysOfWeek[n]==e){var t=s.shippingDates.nextShippingDates[n],r=_.map(t,function(e){return{text:moment(e).format("dddd, MMMM Do"),value:e}});return r}return null}function i(){a.getShippingDates(s.subscription.address.zipCode,s.subscription.address.addressType).then(function(e){e&&(s.shippingDates=e[s.subscription.address.addressType],s.shippingDates&&0!==s.shippingDates.nextShippingDates.length&&(s.nextShippingDates=o(s.subscription.deliveryWindow)))})}var s=this;s.mealPlans=r,s.subscription=t,s.frequency=s.subscription.frequency,s.frequencyStartDate=null,i(),s.ok=function(){n.close({frequency:s.frequency,frequencyStartDate:s.frequencyStartDate})},s.cancel=function(){n.dismiss()}}e.$inject=["$scope","$modalInstance","subscription","mealPlans","ShippingService"],angular.module("greenchef.account.modals").controller("EditFrequencyController",e)}(),angular.module("greenchef.account.modals").controller("EditSubsController",["$modal","$modalInstance","$scope","GENERIC_ERROR","Alerts","FlexibleOrderingAPI","MenuService","ShippingService","mealPlans","menusLandingService","subscription",function(e,n,t,r,a,o,i,s,l,c,u){function d(){s.getShippingDates(b.subscription.address.zipCode,b.subscription.address.addressType).then(function(e){e&&(b.shippingDates=e[b.subscription.address.addressType],!b.shippingDates||0===b.shippingDates.nextShippingDates.length)},function(e){404===e.status&&(e.data="No delivery available to zip code: "+b.subscription.address.zipCode),a.error(b,"Error in updateAvailableDates: "+e.data)})}function p(e){if(!k())return e.$submitted=!1,void 0;a.clear(b),b.planFormValidationMessage=null;var t={};if((b.subscriptionUpdated.frequency||e.frequency.$dirty)&&(t.interval=7*b.subscription.frequency,t.intervalStartDate=b.subscription.frequencyStartDate||m()),e.deliveryWindow.$dirty&&(t.deliveryWindow=e.deliveryWindow.$modelValue),e.quantity.$dirty&&(t.quantity=e.quantity.$modelValue),b.subscriptionUpdated.mealPreference){b.subscription.mealPreference.mealPlan.proteinCustomizable||(b.subscription.mealPreference.dietaryOptOuts=[]);var i=_.intersection(b.subscription.mealPreference.mealPlan.permittedDietaryOptOuts,b.subscription.mealPreference.dietaryOptOuts);t.mealPreference={mealPlan:b.subscription.mealPreference.mealPlan.value,dietaryOptOuts:i}}return _.isEmpty(t)?(n.dismiss(),void 0):(o.updateUserSubscription(b.subscription.userId,b.subscription.id,t).then(function(e){n.close({updatedSubscription:e.data})},function(){e.$submitted=!1,a.error(b,r)}),void 0)}function m(){for(var e=0;e<b.shippingDates.availableDaysOfWeek.length;e++)if(b.shippingDates.availableDaysOfWeek[e]===b.subscription.deliveryWindow)return b.shippingDates.nextShippingDates[e][0]}function g(){n.dismiss()}function f(){b.subscription.mealPreference.dietaryOptOuts=_.intersection(b.subscription.mealPreference.dietaryOptOuts,b.subscription.mealPreference.mealPlan.permittedDietaryOptOuts)}function h(e){b.subscriptionUpdated.mealPreference=!0,b.subscription.mealPreference.mealPlan=e,b.planFormValidationMessage=null,f()}function v(e){if(b.planChoice=e,y(e),w!==b.planChoice){var n=_.first(b.allMealPlans);h(n)}else b.subscription.mealPreference.mealPlan=P;f(),b.boxes=_.times(b.subscription.mealPreference.mealPlan.planInfo.maxBoxNum,function(e){return e+1})}function y(e){b.allMealPlans=i.getAvailableMealPlans(l,e)}var b=this;a.init(b),b.mealPlans=l,b.subscriptionUpdated={},b.selectPlanChoice=v,b.chooseMealPlan=h,b.ok=p,b.cancel=g,b.cancelImmediately=g,b.menusLandingService=c,b.subscription=u,b.showProteinDeselectPrompt=!1;var S=2,P=u.mealPreference.mealPlan;b.subscription.frequency=b.subscription.interval/7,b.allMealPlans=[],b.templateDietaryOptOuts="account/modals/edit-subscription/dietary-opt-outs.tpl.html";var w=b.planChoice=b.subscription.mealPreference.mealPlan.isFamilyPlan?"family":"2-person";v(w),b.subscription.mealPreference.mealPlan=b.subscription.mealPreference.mealPlan,d(),b.isChoicePlan=function(){return b.subscription.mealPreference&&b.subscription.mealPreference.mealPlan&&b.subscription.mealPreference.mealPlan.value?b.subscription.mealPreference.mealPlan.value.toLowerCase().includes("choice"):!1},b.getPlanChangeDeliveryDay=function(){return i.getNextEditableDeliveryDay()},b.changeFrequencyStartDate=function(){e.open({templateUrl:"account/modals/edit-subscription/edit-frequency-modal.tpl.html",controller:"EditFrequencyController",controllerAs:"vm",windowClass:"delivery-frequency-modal",scope:t,resolve:{subscription:b.subscription,mealPlans:l}}).result.then(function(e){b.subscriptionUpdated.frequency=!0,b.subscription.frequency=e.frequency,b.subscription.frequencyStartDate=e.frequencyStartDate})};var k=function(){var e=!0;return b.isChoicePlan()&&b.subscription.mealPreference.dietaryOptOuts.length>S&&(e=!1,b.showProteinDeselectPrompt=!0,b.planFormValidationMessage="Please correct the protein selection before saving."),e};b.toggleOptOut=function(e){b.subscriptionUpdated.mealPreference=!0,b.planFormValidationMessage=null;var n=b.subscription.mealPreference.dietaryOptOuts.indexOf(e);-1===n?b.isChoicePlan()&&b.subscription.mealPreference.dietaryOptOuts.length>=S?(console.log(b.subscription.mealPreference.dietaryOptOuts),b.showProteinDeselectPrompt=!0):b.subscription.mealPreference.dietaryOptOuts.push(e):(b.showProteinDeselectPrompt=!1,b.subscription.mealPreference.dietaryOptOuts.splice(n,1))}}]),angular.module("greenchef.account.modals").controller("IntroToFlexibleOrderingController",IntroToFlexibleOrderingController),angular.module("greenchef.account.modals").controller("LocalChangeNotificationController",LocalChangeNotificationController),function(){function e(e,n,t,r,a,o){function i(){if("DELIVERY"===c.currentCart.status){var n={mealPreference:{mealPlan:c.replacePlan.value,dietaryOptOuts:[]}};return a.updateUserCart(t.userId,t.id,n).then(function(n){e.close({action:"replacedSuccess",updatedCart:n})})}e.close({action:"unskipConfirm",data:{mealPreference:{mealPlan:c.replacePlan.value,dietaryOptOuts:[]}}})
}function s(){e.dismiss({})}function l(){e.close({})}var c=this;c.currentMealPlan=n,c.currentCart=t,c.replacePlan=r,c.cancel=s,c.closeModal=l,c.comfirmReplace=i,c.isFamilyPlan=o.isUserFamilyPlan(c.currentCart.mealPreference.mealPlan)}e.$inject=["$modalInstance","currentMealPlan","currentCart","replacePlan","FlexibleOrderingAPI","MenuService"],angular.module("greenchef.account.modals").controller("ReplaceOrderController",e)}(),angular.module("greenchef.account.modals").controller("SkipOrderController",SkipOrderController),function(){function e(e,n,t,r,a){function o(){n.updateUserCart(l.currentCart.userId,l.currentCart.id,{status:"DELIVERY"}).then(function(){return n.updateUserCart(l.currentCart.userId,l.currentCart.id,a)}).then(function(n){e.close({action:"unskipSuccess",updatedCart:n})})}function i(){e.dismiss({upcomingCart:t})}function s(){e.close({upcomingCart:t})}var l=this;l.currentCart=t,l.replaceMealPlan=r,a=a||{},l.data=a,l.unSkipOrder=o,l.closeModal=s,l.cancel=i}e.$inject=["$modalInstance","FlexibleOrderingAPI","currentCart","replaceMealPlan","data"],angular.module("greenchef.account.modals").controller("UnSkipOrderController",e)}(),angular.module("greenchef.account.modals").controller("UpcomingOrderController",["$modalInstance","GENERIC_ERROR","Alerts","FlexibleOrderingAPI","GreenchefAPI","UspsAddressService","mealPlans","orderToModify","upcomingSubscription","user",function(e,n,t,r,a,o,i,s,l,c){function u(e){g.invalidDeliveryDate=!1;for(var n in e)e[n]===g.selectedDeliveryDate&&(g.invalidDeliveryDate=!0)}function d(e,n){var t=i[n][0];g.servingTypes.push({id:e,name:t.planInfo.name,maxBoxes:t.planInfo.maxBoxNum,description:t.numRecipes+" dinners ("+t.numPeople*t.numRecipes+" servings/box)",mealPlanKey:n})}function p(){return t.clear(g),g.formSubmitting=!0,r.updateUserCart(s.userId,s.id,{deliveryDate:g.selectedDeliveryDate,address:g.possibleAddresses[g.selectedAddressIndex].value,mealPreference:{mealPlan:g.availableMealPlans[g.selectedMealPlanIndex].value,dietaryOptOuts:_.keys(g.selectedDietaryOptOuts)},quantity:g.numBoxes[g.selectedNumBoxesIndex],isFlexed:!0}).then(function(n){g.formSubmitting=!1,e.close({savedCart:n})},function(e){g.formSubmitting=!1,$(".modal").animate({scrollTop:$(".modal-body .alertsContainer").offset().top},800),e.data.includes("No possible delivery day!")?t.error(g,"Unfortunately, your area is currently unsupported by our deliverers."):t.error(g,n)})}function m(){e.dismiss()}var g=this;t.init(g),g.saveChanges=p,g.closeModal=m,i.mealTypes=i.mealTypes.filter(function(e){return!e.isHidden}),i.familyMealTypes=i.familyMealTypes.filter(function(e){return!e.isHidden}),g.setServingType=function(e){g.availableMealPlans=i[e.mealPlanKey],g.numBoxes=_.times(e.maxBoxes,function(e){return e+1})},g.setMealPlan=function(e){if(g.isChoicePlan=e.meals&&e.meals.isChoicePlan,e.proteinCustomizable){g.availableDietaryOptOuts=e.permittedDietaryOptOuts;var n=g.isChoicePlan?l.mealPreference.dietaryOptOuts:s.mealPreference.dietaryOptOuts;g.selectedDietaryOptOuts=_.indexBy(_.intersection(n,e.permittedDietaryOptOuts))}else g.availableDietaryOptOuts=[],g.selectedDietaryOptOuts=[]},g.toggleOptOut=function(e){g.selectedDietaryOptOuts.hasOwnProperty(e)?delete g.selectedDietaryOptOuts[e]:g.selectedDietaryOptOuts[e]=e},g.cancelAddress=function(){g.showNewAddressForm=!1,g.newDefaultAddress={}},g.addAddress=function(e){g.possibleAddresses.push({name:o.createFullTextAddress(e),value:e}),g.showNewAddressForm=!1,g.newDefaultAddress={},g.selectedAddressIndex=g.possibleAddresses.length-1,g.updateAvailableDeliveryDays(e)},g.updateAvailableDeliveryDays=function(e){a.one("users",s.userId).customPOST(e,"address/deliveryDates",{menuDate:moment(s.deliveryDate).day(1).format("YYYY-MM-DD")}).then(function(e){u(e),g.availableDeliveryDates=e})},g.selectDeliveryDay=function(e){g.selectedDeliveryDate=e,u(g.availableDeliveryDates)},g.servingTypes=[],d("2-person","mealTypes"),d("family","familyMealTypes"),g.numBoxes=[],g.possibleAddresses=[],_.any(g.servingTypes,function(e,n){g.selectedMealPlanIndex=_.findIndex(i[e.mealPlanKey],function(e){return e.value===s.mealPreference.mealPlan});var t=g.selectedMealPlanIndex>=0;return t&&(g.selectedServingTypeIndex=n,g.numBoxes=_.times(e.maxBoxes,function(e){return e+1})),t}),g.selectedDietaryOptOuts=_.indexBy(s.mealPreference.dietaryOptOuts),g.selectedNumBoxesIndex=_.findIndex(g.numBoxes,function(e){return e===s.items[0].quantity}),g.possibleAddresses.push({name:o.createFullTextAddress(s.address),value:s.address}),g.userId=c.id,g.showNewAddressForm=!1,g.newDefaultAddress={},g.selectedAddressIndex=0,g.selectedDeliveryDate=s.deliveryDate,g.updateAvailableDeliveryDays(s.address)}]);